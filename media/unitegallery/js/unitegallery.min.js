// Unite Gallery, Version: 1.7.45, released 27 Feb 2017 / modif. pascal sans eval() / hide left/right button in lightbox if only one image to display
function debugLine(a,e,d){!0===a&&(a="true"),!1===a&&(a="false");var b=a;if("object"==typeof a)for(name in b="",a){var f=a[name];b+=" "+name+": "+f}if(!0!=e||d||(b+=" "+Math.random()),!0==d){var c=jQuery("#debug_line");c.width(200),c.height()>=500&&c.html(""),b=c.html()+"<br> -------------- <br>"+b}jQuery("#debug_line").show().html(b)}function debugSide(a){var b="";for(name in a){var c=a[name];b+=name+" : "+c+"<br>"}jQuery("#debug_side").show().html(b)}function trace(a){"undefined"!=typeof console&&console.log(a)}function UGFunctions(){var a=null,b=this,c={starTime:0,arrThemes:[],isTouchDevice:-1,isRgbaSupported:-1,timeCache:{},dataCache:{},lastEventType:"",lastEventTime:0,lastTouchStartElement:null,touchThreshold:700,handle:null};function d(b,a,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a[b]=c}this.debugVar="",this.z__________FULL_SCREEN___________=function(){},this.toFullscreen=function(a,b){if(a.requestFullscreen)a.requestFullscreen();else if(a.mozRequestFullScreen)a.mozRequestFullScreen();else if(a.webkitRequestFullscreen)a.webkitRequestFullscreen();else{if(!a.msRequestFullscreen)return!1;a.msRequestFullscreen()}return!0},this.exitFullscreen=function(){if(!1==b.isFullScreen())return!1;if(document.exitFullscreen)document.exitFullscreen();else if(document.cancelFullScreen)document.cancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},this.addFullScreenChangeEvent=function(a){document.webkitCancelFullScreen?d("webkitfullscreenchange",document,a):document.msExitFullscreen?d("MSFullscreenChange",document,a):document.mozCancelFullScreen?d("mozfullscreenchange",document,a):d("fullscreenchange",document,a)},this.destroyFullScreenChangeEvent=function(){jQuery(document).unbind("fullscreenChange"),jQuery(document).unbind("mozfullscreenchange"),jQuery(document).unbind("webkitfullscreenchange"),jQuery(document).unbind("MSFullscreenChange")},this.getFullScreenElement=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},this.isFullScreen=function(){var a;return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement)},this.z__________GET_PROPS___________=function(){},this.getBrowserPrefix=function(){if(null!==a)return a;var c=["webkit","Moz","ms","O"],d=document.createElement("div");for(var e in c){var b=c[e];if(b+"Transform" in d.style)return a=b=b.toLowerCase(),b}return a="",""},this.getImageInsideParentDataByImage=function(a,d,e){var f=a.parent(),c=b.getImageOriginalSize(a);return b.getImageInsideParentData(f,c.width,c.height,d,e)},this.getImageInsideParentData=function(m,i,j,l,a,c,f){if(!a)var a={};var h={};if(void 0===c)var c=m.width();if(void 0===f)var f=m.height();a.padding_left&&(c-=a.padding_left),a.padding_right&&(c-=a.padding_right),a.padding_top&&(f-=a.padding_top),a.padding_bottom&&(f-=a.padding_bottom);var d=null,b="100%",e=null,g=null,n="display:block;margin:0px auto;";if(i>0&&j>0){if("down"==l&&i<c&&j<f)b=j,g=(c-(d=i))/2,e=(f-b)/2;else if("fill"==l){var k=i/j;(d=(b=f)*k)<c?(b=(d=c)/k,g=0,e=Math.round(-((b-f)/2*1))):(e=0,g=Math.round(-((d-c)/2*1)))}else{var k=i/j;d=(b=f)*k,e=0,g=(c-d)/2,"fitvert"!=l&&d>c&&(b=(d=c)/k,g=0,e=(f-b)/2)}d=Math.floor(d),b=Math.floor(b),e=Math.floor(e),g=Math.floor(g),n="position:absolute;"}return a.padding_top&&(e+=a.padding_top),a.padding_left&&(g+=a.padding_left),h.imageWidth=d,h.imageHeight=b,h.imageTop=e,h.imageLeft=g,h.imageRight=g+d,0==e||"100%"==b?h.imageBottom=null:h.imageBottom=e+b,h.style=n,h},this.getElementCenterPosition=function(f,a){var i=f.parent(),g=b.getElementSize(f),h=b.getElementSize(i),d=h.width,e=h.height;a&& void 0!==a.padding_top&&(e-=a.padding_top),a&& void 0!==a.padding_bottom&&(e-=a.padding_bottom),a&& void 0!==a.padding_left&&(d-=a.padding_left),a&& void 0!==a.padding_right&&(d-=a.padding_right);var c={};return c.left=Math.round((d-g.width)/2),c.top=Math.round((e-g.height)/2),a&& void 0!==a.padding_top&&(c.top+=a.padding_top),a&& void 0!==a.padding_left&&(c.left+=a.padding_left),c},this.getElementCenterPoint=function(e,d){if(!d)var d=!1;var c=b.getElementSize(e),a={};return a.x=c.width/2,a.y=c.height/2,!0==d&&(a.x+=c.left,a.y+=c.top),a.x=Math.round(a.x),a.y=Math.round(a.y),a},this.getMousePosition=function(a,c){var b={pageX:a.pageX,pageY:a.pageY,clientX:a.clientX,clientY:a.clientY};if(a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length>0&&(b.pageX=a.originalEvent.touches[0].pageX,b.pageY=a.originalEvent.touches[0].pageY,b.clientX=a.originalEvent.touches[0].clientX,b.clientY=a.originalEvent.touches[0].clientY),c){var d=c.offset();b.mouseX=b.pageX-d.left,b.mouseY=b.pageY-d.top}return b},this.getMouseElementPoint=function(a,c){var d={x:a.pageX,y:a.pageY};return b.getElementLocalPoint(d,c)},this.getElementLocalPoint=function(b,d){var a={},c=d.offset();return a.x=Math.round(b.x-c.left),a.y=Math.round(b.y-c.top),a},this.getImageOriginalSize=function(b,e,f){if(void 0!==e&& void 0!==f)return{width:e,height:f};var c=b[0];if(void 0===c)throw new Error("getImageOriginalSize error - Image not found");var a={};if(void 0!==c.naturalWidth)return a.width=c.naturalWidth,a.height=c.naturalHeight,a;if("number"==typeof b.data("naturalWidth")){var a={};return a.width=b.data("naturalWidth"),a.height=b.data("naturalHeight"),a}var d=new Image;return(d.src=c.src,d.complete)?(a.width=d.width,a.height=d.height,b.data("naturalWidth",a.width),b.data("naturalHeight",a.height),a):{width:0,height:0}},this.getimageRatio=function(a){var c=b.getImageOriginalSize(a),d=b.getElementSize(a),e=d.width/c.width;return e},this.isImageFitParent=function(a){var e=a.parent(),c=b.getElementSize(a),d=b.getElementSize(e);return c.width<=d.width&&c.height<=d.height},this.getElementSize=function(b){if(void 0===b)throw new Error("Can't get size, empty element");var a=b.position();return a.height=b.outerHeight(),a.width=b.outerWidth(),a.left=Math.round(a.left),a.top=Math.round(a.top),a.right=a.left+a.width,a.bottom=a.top+a.height,a},this.isElementBiggerThenParent=function(a){var e=a.parent(),c=b.getElementSize(a),d=b.getElementSize(e);return c.width>d.width||c.height>d.height},this.isPointInsideElement=function(a,b){return!1!=(a.x>=0&&a.x<b.width)&& !1!=(a.y>=0&&a.y<b.height)},this.getElementRelativePos=function(d,a,c,g){if(!g)var g=d.parent();if("number"==typeof d)var e={width:d,height:d};else var e=b.getElementSize(d);var f=b.getElementSize(g);switch(a){case"top":case"left":a=0,c&&(a+=c);break;case"center":a=Math.round((f.width-e.width)/2),c&&(a+=c);break;case"right":a=f.width-e.width,c&&(a-=c);break;case"middle":a=Math.round((f.height-e.height)/2),c&&(a+=c);break;case"bottom":a=f.height-e.height,c&&(a-=c)}return a},this.z_________SET_ELEMENT_PROPS_______=function(){},this.zoomImageInsideParent=function(a,r,k,s,j,t,u){if(!k)var k=1.2;if(!j)var j="fit";var l,h,m,n,c=k,y=a.parent(),f=b.getElementSize(a),g=b.getImageOriginalSize(a),i=!1,o=0,p=0,d=0,e=0;if(s){var q=b.getMouseElementPoint(s,a);i=b.isPointInsideElement(q,f),d=q.x,e=q.y}else i=!1;if(!1==i){var v=b.getElementCenterPoint(a);d=v.x,e=v.y}if(!0==r)l=f.height*c,h=f.width*c,0!=d&&(o=-(d*c-d)),0!=e&&(p=-(e*c-e));else{l=f.height/c,h=f.width/c;var z=b.getImageInsideParentData(y,g.width,g.height,j,u);if(h<z.imageWidth)return b.scaleImageFitParent(a,g.width,g.height,j,u),!0;!0==i&&(0!=d&&(o=-(d/c-d)),0!=e&&(p=-(e/c-e)))}if(t){var w=1;if(0!=g.width&&(w=h/g.width),w>t)return!1}if(b.setElementSize(a,h,l),!1==r&& !1==i){var x=b.getElementCenterPosition(a);m=x.left,n=x.top}else m=f.left+o,n=f.top+p;return b.placeElement(a,m,n),!0},this.placeElement=function(h,a,c,d,e,i){if(!1==jQuery.isNumeric(a)|| !1==jQuery.isNumeric(c)){if(!i)var i=h.parent();var f=b.getElementSize(h),g=b.getElementSize(i)}if(!1==jQuery.isNumeric(a))switch(a){case"left":a=0,d&&(a+=d);break;case"center":a=Math.round((g.width-f.width)/2),d&&(a+=d);break;case"right":a=g.width-f.width,d&&(a-=d)}if(!1==jQuery.isNumeric(c))switch(c){case"top":c=0,e&&(c+=e);break;case"middle":case"center":c=Math.round((g.height-f.height)/2),e&&(c+=e);break;case"bottom":c=g.height-f.height,e&&(c-=e)}var j={position:"absolute",margin:"0px"};null!==a&&(j.left=a),null!==c&&(j.top=c),h.css(j)},this.placeElementInParentCenter=function(a){b.placeElement(a,"center","middle")},this.setElementSizeAndPosition=function(a,b,c,d,e){a.css({width:d+"px",height:e+"px",left:b+"px",top:c+"px",position:"absolute",margin:"0px"})},this.setElementSize=function(c,d,a){var b={width:d+"px"};null!=a&&(b.height=a+"px"),c.css(b)},this.cloneElementSizeAndPos=function(c,f,g,d,e){var a=c.position();if(void 0==a)throw new Error("Can't get size, empty element");!0===g?(a.height=c.outerHeight(),a.width=c.outerWidth()):(a.height=c.height(),a.width=c.width()),a.left=Math.round(a.left),a.top=Math.round(a.top),d&&(a.left+=d),e&&(a.top+=e),b.setElementSizeAndPosition(f,a.left,a.top,a.width,a.height)},this.placeImageInsideParent=function(d,e,f,g,h,i){var a=b.getImageInsideParentData(e,f,g,h,i),c="<img";return null!==a.imageWidth&&(c+=" width = '"+a.imageWidth+"'",a.style+="width:"+a.imageWidth+";"),null!=a.imageHeight&&("100%"==a.imageHeight?(c+=" height = '"+a.imageHeight+"'",a.style+="height:"+a.imageHeight+";"):(c+=" height = '"+a.imageHeight+"'",a.style+="height:"+a.imageHeight+"px;")),null!==a.imageTop&&(a.style+="top:"+a.imageTop+"px;"),null!==a.imageLeft&&(a.style+="left:"+a.imageLeft+"px;"),d=b.escapeDoubleSlash(d),c+=" style='"+a.style+"'",c+=' src="'+d+'"',c+=">",e.html(c),e.children("img")},this.scaleImageCoverParent=function(i,d,l){if("number"==typeof d)var e=d,f=l;else var e=d.outerWidth(),f=d.outerHeight();var j=b.getImageOriginalSize(i),m=j.width,n=j.height,k=m/n,a=f,c=a*k,g=0,h=0;c<e?(a=(c=e)/k,h=0,g=Math.round(-((a-f)/2*1))):(g=0,h=Math.round(-((c-e)/2*1))),c=Math.round(c),a=Math.round(a),i.css({width:c+"px",height:a+"px",left:h+"px",top:g+"px"})},this.scaleImageFitParent=function(e,f,g,h,i){var j=e.parent(),a=b.getImageInsideParentData(j,f,g,h,i),d=!1,c={};return null!==a.imageWidth&&(d=!0,e.removeAttr("width"),c.width=a.imageWidth+"px"),null!=a.imageHeight&&(d=!0,e.removeAttr("height"),c.height=a.imageHeight+"px"),null!==a.imageTop&&(d=!0,c.top=a.imageTop+"px"),null!==a.imageLeft&&(d=!0,c.left=a.imageLeft+"px"),!0==d&&(c.position="absolute",c.margin="0px 0px",e.css(c)),a},this.scaleImageByHeight=function(c,a,e,f){var d=b.getImageOriginalSize(c,e,f),g=Math.round(a*(d.width/d.height));a=Math.round(a),b.setElementSize(c,g,a)},this.scaleImageByWidth=function(c,a,e,f){var d=b.getImageOriginalSize(c,e,f),g=Math.round(a/(d.width/d.height));a=Math.round(a),b.setElementSize(c,a,g)},this.scaleImageExactSizeInParent=function(h,p,q,c,d,r){var s=h.parent(),e=b.getElementSize(s);e.width<c&&(c=e.width),e.height<d&&(d=e.height);var f=b.getImageInsideParentData(null,p,q,r,null,c,d),l=c,m=d,n=f.imageLeft,i=f.imageLeft,o=f.imageTop,j=f.imageTop,t=Math.round((e.width-c)/2),u=Math.round((e.height-d)/2),v=f.imageWidth+n+i,g=c-v;0!=g&&(i+=g);var w=f.imageHeight+o+j,g=d-w;0!=g&&(j+=g),h.removeAttr("width"),h.removeAttr("height");var a={position:"absolute",margin:"0px 0px"};a.width=l+"px",a.height=m+"px",a.left=t+"px",a.top=u+"px",a["padding-left"]=n+"px",a["padding-top"]=o+"px",a["padding-right"]=i+"px",a["padding-bottom"]=j+"px",h.css(a);var k={};return k.imageWidth=l,k.imageHeight=m,k},this.showElement=function(c,a,b){c.show().fadeTo(0,1),a&&a.show().fadeTo(0,1),b&&b.show().fadeTo(0,1)},this.z_________GALLERY_RELATED_FUNCTIONS_______=function(){},this.disableButton=function(c,a){if(!a)var a="ug-button-disabled";!1==b.isButtonDisabled(c,a)&&c.addClass(a)},this.convertCustomPrefixOptions=function(a,b,d){if(!b)return a;var c={};return jQuery.each(a,function(a,e){0===a.indexOf(b+"_"+d+"_")?c[a.replace(b+"_"+d+"_",d+"_")]=e:c[a]=e}),c},this.enableButton=function(c,a){if(!a)var a="ug-button-disabled";!0==b.isButtonDisabled(c,a)&&c.removeClass(a)},this.isButtonDisabled=function(b,a){if(!a)var a="ug-button-disabled";return!!b.hasClass(a)},this.z_________MATH_FUNCTIONS_______=function(){},this.normalizeSetting=function(b,c,e,f,a,d){if(!d)var d=!1;return a=b+(c-b)*((a-e)/(f-e)),!0==d&&(a<b&&(a=b),a>c&&(a=c)),a},this.getNormalizedValue=function(a,c,d,e,b){var f=(b-a)/(c-a);return b=a+(e-d)*f},this.getDistance=function(a,b,c,d){return Math.round(Math.sqrt(Math.abs((c-a)*(c-a)+(d-b)*(d-b))))},this.getMiddlePoint=function(b,c,d,e){var a={};return a.x=b+Math.round((d-b)/2),a.y=c+Math.round((e-c)/2),a},this.getNumItemsInSpace=function(b,c,a){return Math.floor((b+a)/(c+a))},this.getNumItemsInSpaceRound=function(b,c,a){return Math.round((b+a)/(c+a))},this.getSpaceByNumItems=function(a,b,c){return a*b+(a-1)*c},this.getItemSizeInSpace=function(b,a,c){return Math.floor((b-(a-1)*c)/a)},this.getColX=function(a,b,c){return a*(b+c)},this.getColByIndex=function(a,b){return b%a},this.getColRowByIndex=function(a,b){return{col:Math.floor(a%b),row:Math.floor(a/b)}},this.getIndexByRowCol=function(a,b,c){return a<0||b<0?-1:a*c+b},this.getPrevRowSameColIndex=function(d,a){var c=b.getColRowByIndex(d,a);return b.getIndexByRowCol(c.row-1,c.col,a)},this.getNextRowSameColIndex=function(d,a){var c=b.getColRowByIndex(d,a);return b.getIndexByRowCol(c.row+1,c.col,a)},this.z_________DATA_FUNCTIONS_______=function(){},this.setGlobalData=function(a,b){jQuery.data(document.body,a,b)},this.getGlobalData=function(a){return jQuery.data(document.body,a)},this.z_________EVENT_DATA_FUNCTIONS_______=function(){},this.handleScrollTop=function(d){if(!1==b.isTouchDevice())return null;var a=b.getStoredEventData(d),f=15,g=15;if(null===a.scrollDir&&(Math.abs(a.diffMouseX)>f?a.scrollDir="hor":Math.abs(a.diffMouseY)>g&&Math.abs(a.diffMouseY)>Math.abs(a.diffMouseX)&&(a.scrollDir="vert",a.scrollStartY=a.lastMouseClientY,a.scrollOrigin=jQuery(document).scrollTop(),c.dataCache[d].scrollStartY=a.lastMouseClientY,c.dataCache[d].scrollOrigin=a.scrollOrigin),c.dataCache[d].scrollDir=a.scrollDir),"vert"!==a.scrollDir)return a.scrollDir;jQuery(document).scrollTop();var e=a.scrollOrigin-(a.lastMouseClientY-a.scrollStartY);return e>=0&&jQuery(document).scrollTop(e),a.scrollDir},this.wasVerticalScroll=function(a){return"vert"===b.getStoredEventData(a).scrollDir},this.storeEventData=function(g,h,e){var a=b.getMousePosition(g),f=jQuery.now(),d={startTime:f,lastTime:f,startMouseX:a.pageX,startMouseY:a.pageY,lastMouseX:a.pageX,lastMouseY:a.pageY,startMouseClientY:a.clientY,lastMouseClientY:a.clientY,scrollTop:jQuery(document).scrollTop(),scrollDir:null};e&&(d=jQuery.extend(d,e)),c.dataCache[h]=d},this.updateStoredEventData=function(g,e,f){if(!c.dataCache[e])throw new Error("updateEventData error: must have stored cache object");var a=c.dataCache[e],d=b.getMousePosition(g);a.lastTime=jQuery.now(),void 0!==d.pageX&&(a.lastMouseX=d.pageX,a.lastMouseY=d.pageY,a.lastMouseClientY=d.clientY),f&&(a=jQuery.extend(a,f)),c.dataCache[e]=a},this.getStoredEventData=function(b,d){if(!c.dataCache[b])throw new Error("updateEventData error: must have stored cache object");var a=c.dataCache[b];return a.diffMouseX=a.lastMouseX-a.startMouseX,a.diffMouseY=a.lastMouseY-a.startMouseY,a.diffMouseClientY=a.lastMouseClientY-a.startMouseClientY,a.diffTime=a.lastTime-a.startTime,!0===d?(a.startMousePos=a.lastMouseY,a.lastMousePos=a.lastMouseY,a.diffMousePos=a.diffMouseY):(a.startMousePos=a.lastMouseX,a.lastMousePos=a.lastMouseX,a.diffMousePos=a.diffMouseX),a},this.isApproveStoredEventClick=function(a,e){if(!c.dataCache[a])return!0;var d=b.getStoredEventData(a,e),f=Math.abs(d.diffMousePos);return!(d.diffTime>400)&&!(f>30)},this.clearStoredEventData=function(a){c.dataCache[a]=null},this.z_________CHECK_SUPPORT_FUNCTIONS_______=function(){},this.isCanvasExists=function(){return"function"==typeof jQuery('<canvas width="500" height="500" > </canvas>')[0].getContext},this.isScrollbarExists=function(){return window.innerWidth>document.documentElement.clientWidth},this.isTouchDevice=function(){if(-1!==c.isTouchDevice)return c.isTouchDevice;try{document.createEvent("TouchEvent"),c.isTouchDevice=!0}catch(a){c.isTouchDevice=!1}return c.isTouchDevice},this.isRgbaSupported=function(){if(-1!==c.isRgbaSupported)return c.isRgbaSupported;var a=document.getElementsByTagName("script")[0],b=a.style.color;try{a.style.color="rgba(1,5,13,0.44)"}catch(e){}var d=a.style.color!=b;return a.style.color=b,c.isRgbaSupported=d,d},this.z_________GENERAL_FUNCTIONS_______=function(){},this.checkMinJqueryVersion=function(f){for(var b=jQuery.fn.jquery.split("."),c=f.split("."),a=0,g=b.length;a<g;a++){var d=parseInt(b[a]),e=parseInt(c[a]);if(void 0===c[a])break;if(e>d)return!1;if(d>e)break}return!0},this.getCssSizeParam=function(a){return jQuery.isNumeric(a)?a+"px":a},this.convertHexToRGB=function(b,c){var a=b.replace("#","");return a===b?b:(r=parseInt(a.substring(0,2),16),g=parseInt(a.substring(2,4),16),b=parseInt(a.substring(4,6),16),result="rgba("+r+","+g+","+b+","+c+")")},this.timestampToString=function(b){var c,a=new Date(b);return a.getDate()+"/"+a.getMonth()+(" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+":"+a.getMilliseconds())},this.getArrTouches=function(a){var b=[];return a.originalEvent&&a.originalEvent.touches&&a.originalEvent.touches.length>0&&(b=a.originalEvent.touches),b},this.getArrTouchPositions=function(b){for(var c=[],a=0;a<b.length;a++){var d={pageX:b[a].pageX,pageY:b[a].pageY};c.push(d)}return c},this.startTimeDebug=function(){c.starTime=jQuery.now()},this.showTimeDebug=function(){debugLine({"Time Passed":jQuery.now()-c.starTime},!0)},this.initProgressIndicator=function(d,c,e){switch("bar"!=d&& !1==b.isCanvasExists()&&(d="bar"),d){case"bar":var a=new UGProgressBar;a.putHidden(e,c);break;default:case"pie":var a=new UGProgressPie;a.putHidden(e,c);break;case"pie2":c.type_fill=!0;var a=new UGProgressPie;a.putHidden(e,c)}return a},this.setButtonMobileReady=function(a){a.on("touchstart",function(a){jQuery(this).addClass("ug-nohover")}),a.on("mousedown touchend",function(a){return a.stopPropagation(),a.stopImmediatePropagation(),!1})},this.registerTheme=function(a){c.arrThemes.push(a)},this.getArrThemes=function(){return c.arrThemes},this.isThemeRegistered=function(a){return -1!==jQuery.inArray(a,c.arrThemes)},this.getFirstRegisteredTheme=function(){return 0==c.arrThemes.length?"":c.arrThemes[0]},this.isTimePassed=function(a,b){if(!b)var b=100;var d=jQuery.now(),e=d-(lastTime=!1==c.timeCache.hasOwnProperty(a)?0:c.timeCache[a]);return c.timeCache[a]=d,!(e<=b)},this.whenContiniousEventOver=function(a,d,b){if(!b)var b=300;!0==c.timeCache.hasOwnProperty(a)&&null!=c.timeCache[a]&&(clearTimeout(c.timeCache[a]),c.timeCache[a]=null),c.timeCache[a]=setTimeout(d,b)},this.validateClickTouchstartEvent=function(a){var b=!0,d=jQuery.now()-c.lastEventTime;return"click"==a&&"touchstart"==c.lastEventType&&d<1e3&&(b=!1),c.lastEventTime=jQuery.now(),c.lastEventType=a,b},this.addClassOnHover=function(b,a){if(!a)var a="ug-button-hover";b.hover(function(){jQuery(this).addClass(a)},function(){jQuery(this).removeClass(a)})},this.destroyButton=function(a){a.off("mouseenter"),a.off("mouseleave"),a.off("click"),a.off("touchstart"),a.off("touchend"),a.off("mousedown"),a.off("tap")},this.setButtonOnClick=function(a,c){b.setButtonMobileReady(a),a.on("click touchstart",function(a){if(objThis=jQuery(this),a.stopPropagation(),a.stopImmediatePropagation(),!1==b.validateClickTouchstartEvent(a.type))return!0;c(objThis,a)})},this.setButtonOnTap=function(a,d){a.on("tap",d),!1==b.isTouchDevice()?a.on("click",function(a){var c=jQuery(this);if(!1==b.validateClickTouchstartEvent(a.type))return!0;c.trigger("tap")}):(a.on("touchstart",function(a){jQuery(this).addClass("ug-nohover"),c.lastTouchStartElement=jQuery(this),c.lastEventTime=jQuery.now()}),a.on("touchend",function(b){var a=jQuery(this);if(!1==a.is(c.lastTouchStartElement)||!c.lastEventTime||jQuery.now()-c.lastEventTime>c.touchThreshold)return!0;a.trigger("tap")}))},this.loadJs=function(a,d){!0===d&&(a=location.protocol+"//"+a);var b=document.createElement("script");b.src=a;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)},this.loadCss=function(b,c){!0===c&&(b=location.protocol+"//"+b);var a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",b),document.getElementsByTagName("head")[0].appendChild(a)},this.addEvent=function(a,b,c){void 0!==a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)},this.checkImagesLoaded=function(b,a,d){var e=0,c=b.length;if(0==c&&a)return a(),!1;function f(b,f){e++,"function"==typeof d&&setTimeout(function(){d(b,f)}),e==c&&"function"==typeof a&&setTimeout(function(){a()})}setTimeout(function(){for(var a=0;a<c;a++){var e=b[a];if(void 0!==e.naturalWidth&&0!==e.naturalWidth)f(b[a],!1);else{var d=jQuery("<img/>");d.data("index",a),d.on("load",function(){var a=jQuery(this).data("index");f(b[a],!1)}),d.on("error",function(){var a=jQuery(this).data("index");f(b[a],!0)}),d.attr("src",e.src)}}})},this.waitForWidth=function(a,b){var d=a.width();if(0!=d)return b(),!1;c.handle=setInterval(function(){0!=(d=a.width())&&(clearInterval(c.handle),b())},300)},this.arrayShuffle=function(a){if("object"!=typeof a)return a;for(var c,d,b=a.length;b;c=parseInt(Math.random()*b),d=a[--b],a[b]=a[c],a[c]=d);return a},this.getObjectLength=function(b){var a=0;for(var c in b)a++;return a},this.normalizePercent=function(a){return a<0&&(a=0),a>1&&(a=1),a},this.stripTags=function(a){return a.replace(/(<([^>]+)>)/ig,"")},this.escapeDoubleSlash=function(a){return a.replace('"','"')},this.htmlentitles=function(a){return jQuery("<div/>").text(a).html()},this.z_________END_GENERAL_FUNCTIONS_______=function(){}}var g_ugFunctions=new UGFunctions;function UGThumbsGeneral(){var b,c,d,e,f,a=this,g=jQuery(a),h=new UniteGalleryMain,i=new UGFunctions;this.type={GET_THUMBS_ALL:"all",GET_THUMBS_RATIO:"ratio",GET_THUMBS_NO_RATIO:"no_ratio",GET_THUMBS_NEW:"new"},this.events={SETOVERSTYLE:"thumbmouseover",SETNORMALSTYLE:"thumbmouseout",SETSELECTEDSTYLE:"thumbsetselected",PLACEIMAGE:"thumbplaceimage",AFTERPLACEIMAGE:"thumb_after_place_image",IMAGELOADERROR:"thumbimageloaderror",THUMB_IMAGE_LOADED:"thumb_image_loaded"};var j={thumb_width:88,thumb_height:50,thumb_fixed_size:!0,thumb_resize_by:"height",thumb_border_effect:!0,thumb_border_width:0,thumb_border_color:"#000000",thumb_over_border_width:0,thumb_over_border_color:"#d9d9d9",thumb_selected_border_width:1,thumb_selected_border_color:"#d9d9d9",thumb_round_corners_radius:0,thumb_color_overlay_effect:!0,thumb_overlay_color:"#000000",thumb_overlay_opacity:.4,thumb_overlay_reverse:!1,thumb_image_overlay_effect:!1,thumb_image_overlay_type:"bw",thumb_transition_duration:200,thumb_transition_easing:"easeOutQuad",thumb_show_loader:!0,thumb_loader_type:"dark",thumb_wrapper_as_link:!1,thumb_link_newpage:!1},k={touchEnabled:!1,num_thumbs_checking:0,customThumbs:!1,funcSetCustomThumbHtml:null,isEffectBorder:!1,isEffectOverlay:!1,isEffectImage:!1,colorOverlayOpacity:1,thumbInnerReduce:0,allowOnResize:!0,classNewThumb:"ug-new-thumb"},l={timeout_thumb_check:100,thumb_max_check_times:600,eventSizeChange:"thumb_size_change"};function m(h,o){var d=b[h],f="";!1==k.customThumbs&&(f=" ug-thumb-generated");var i="<div class='ug-thumb-wrapper"+f+"' "+("style='z-index:"+(d.index+1)+";'")+"></div>";if(!0==j.thumb_wrapper_as_link){var l=d.link;""==d.link&&(l="javascript:void(0)");var m="";!0==j.thumb_link_newpage&&d.link&&(m=" target='_blank' rel='noopener noreferrer' ");var i="<a href='"+l+"'"+m+" class='ug-thumb-wrapper"+f+"'></a>"}var a=jQuery(i),e=d.objThumbImage;if(!1==k.customThumbs){if(!0==j.thumb_show_loader&&e){var n="ug-thumb-loader-dark";"bright"==j.thumb_loader_type&&(n="ug-thumb-loader-bright"),a.append("<div class='ug-thumb-loader "+n+"'></div>"),a.append("<div class='ug-thumb-error' style='display:none'></div>")}if(e){if(e.addClass("ug-thumb-image"),!0==j.thumb_image_overlay_effect){var g=e.clone().appendTo(a);g.addClass("ug-thumb-image-overlay "+o).removeClass("ug-thumb-image"),g.fadeTo(0,0),d.objImageOverlay=g}a.append(e)}}return k.isEffectBorder&&a.append("<div class='ug-thumb-border-overlay'></div>"),k.isEffectOverlay&&a.append("<div class='ug-thumb-overlay'></div>"),c.append(a),k.customThumbs&&k.funcSetCustomThumbHtml(a,d),b[h].objThumbWrapper=a,a}function n(b,d,a,h){var e={width:b+"px",height:d+"px"},f={width:b-k.thumbInnerReduce+"px",height:d-k.thumbInnerReduce+"px"},g=".ug-thumb-loader, .ug-thumb-error, .ug-thumb-border-overlay, .ug-thumb-overlay";a?(!0!==h&&a.css(e),a.find(g).css(f)):(c.children(".ug-thumb-wrapper").css(e),c.find(g).css(f))}function o(e,c,f,b){if(!b)var b=!1;h.isFakeFullscreen()&&(b=!0);var a=e.children(".ug-thumb-border-overlay"),d={};d["border-width"]=c+"px",0!=c&&(d["border-color"]=f),b&& !0===b?(a.css(d),0==c?a.hide():a.show()):(0==c?a.stop().fadeOut(j.thumb_transition_duration):a.show().stop().fadeIn(j.thumb_transition_duration),s(a,d))}function p(d,e,b){var c=d.children(".ug-thumb-overlay"),a=j.thumb_transition_duration;b&& !0===b&&(a=0),e?c.stop(!0).fadeTo(a,k.colorOverlayOpacity):c.stop(!0).fadeTo(a,0)}function q(b,e,c){var f=b.children("img.ug-thumb-image"),d=b.children("img.ug-thumb-image-overlay"),a=j.thumb_transition_duration;c&& !0===c&&(a=0),e?d.stop(!0).fadeTo(a,1):(f.fadeTo(0,1),d.stop(!0).fadeTo(a,0))}function r(b,c){k.isEffectBorder&&o(b,j.thumb_selected_border_width,j.thumb_selected_border_color,c),k.isEffectOverlay&&p(b,!0==j.thumb_overlay_reverse,c),k.isEffectImage&&q(b,!1,c),g.trigger(a.events.SETSELECTEDSTYLE,b)}function s(a,b){a.stop(!0).animate(b,{duration:j.thumb_transition_duration,easing:j.thumb_transition_easing,queue:!1})}function t(b){!0==v(b)?r(b,!0,"redraw"):a.setThumbNormalStyle(b,!0,"redraw")}function u(){var a="",b=j.thumb_image_overlay_type.split(",");for(var c in b){var d=b[c];switch(d){case"bw":a+=" ug-bw-effect";break;case"blur":a+=" ug-blur-effect";break;case"sepia":a+=" ug-sepia-effect"}}return a}function v(a){return!!a.hasClass("ug-thumb-selected")}function w(d,b){b=jQuery(b),a.getItemByThumb(b);var c=i.getElementSize(b);n(c.width,c.height,b,!0),t(b)}function x(e,c,d){(objItem=a.getItemByThumb(c)).isLoaded=!0,objItem.isThumbImageLoaded=!0;var b=i.getImageOriginalSize(d);objItem.thumbWidth=b.width,objItem.thumbHeight=b.height,objItem.thumbRatioByWidth=b.width/b.height,objItem.thumbRatioByHeight=b.height/b.width,c.addClass("ug-thumb-ratio-set")}this.init=function(a,c){e=a.getObjects(),h=a,d=jQuery(a),f=e.g_objWrapper,b=e.g_arrItems,j=jQuery.extend(j,c),k.isEffectBorder=j.thumb_border_effect,k.isEffectOverlay=j.thumb_color_overlay_effect,k.isEffectImage=j.thumb_image_overlay_effect},this._____________EXTERNAL_SETTERS__________=function(){},this.setHtmlThumbs=function(d,e){if(c=d,!0==k.isEffectImage)var f=u();if(!0!==e)for(var g=h.getNumItems(),b=0;b<g;b++)m(b,f);else{a.getThumbs().removeClass(k.classNewThumb);var i=h.getNewAddedItemsIndexes();jQuery.each(i,function(b,a){m(a,f).addClass(k.classNewThumb)})}},this.setThumbNormalStyle=function(b,c,d){!0==k.customThumbs&&b.removeClass("ug-thumb-over"),k.isEffectBorder&&o(b,j.thumb_border_width,j.thumb_border_color,c),k.isEffectOverlay&&p(b,!0!=j.thumb_overlay_reverse,c),k.isEffectImage&&q(b,!0,c),g.trigger(a.events.SETNORMALSTYLE,b)},this.setThumbOverStyle=function(b){!0==k.customThumbs&&b.addClass("ug-thumb-over"),k.isEffectBorder&&o(b,j.thumb_over_border_width,j.thumb_over_border_color),k.isEffectOverlay&&p(b,!0==j.thumb_overlay_reverse),!0==k.isEffectImage&&q(b,!1),g.trigger(a.events.SETOVERSTYLE,b)},this.setHtmlProperties=function(b){if(!b)var b=a.getThumbs();if(!1==k.customThumbs&&(!0==j.thumb_fixed_size&&n(j.thumb_width,j.thumb_height,b),function(a){if(j.thumb_round_corners_radius<=0)return!1;var b={"border-radius":j.thumb_round_corners_radius+"px"};a?(a.css(b),a.find(".ug-thumb-border-overlay").css(b)):c.find(".ug-thumb-wrapper, .ug-thumb-wrapper .ug-thumb-border-overlay").css(b)}(b)),b.each(function(){var a=jQuery(this);t(a)}),k.isEffectOverlay&&j.thumb_overlay_color){var d={};if(i.isRgbaSupported()){var e=i.convertHexToRGB(j.thumb_overlay_color,j.thumb_overlay_opacity);d["background-color"]=e}else d["background-color"]=j.thumb_overlay_color,k.colorOverlayOpacity=j.thumb_overlay_opacity;b.find(".ug-thumb-overlay").css(d)}},this.setThumbSelected=function(a){if(!0==k.customThumbs&&a.removeClass("ug-thumb-over"),!0==v(a))return!0;a.addClass("ug-thumb-selected"),r(a)},this.setThumbUnselected=function(b){b.removeClass("ug-thumb-selected"),a.setThumbNormalStyle(b,!1,"set unselected")},this.setOptions=function(a){j=jQuery.extend(j,a)},this.setThumbInnerReduce=function(a){k.thumbInnerReduce=a},this.setCustomThumbs=function(a,b,c){if(k.customThumbs=!0,"function"!=typeof a)throw new Error("The argument should be function");k.funcSetCustomThumbHtml=a,-1==jQuery.inArray("overlay",b)&&(k.isEffectOverlay=!1),-1==jQuery.inArray("border",b)&&(k.isEffectBorder=!1),k.isEffectImage=!1,c&& !1===c.allow_onresize&&(k.allowOnResize=!1)},this._____________EXTERNAL_GETTERS__________=function(){},this.getOptions=function(){return j},this.getNumThumbs=function(){return b.length},this.getThumbImage=function(a){return a.find(".ug-thumb-image")},this.getThumbByIndex=function(b){var c=a.getThumbs();if(b>=c.length||b<0)throw new Error("Wrong thumb index");return jQuery(c[b])},this.getThumbs=function(f){var d=".ug-thumb-wrapper",e=".ug-thumb-ratio-set";switch(f){default:case a.type.GET_THUMBS_ALL:var b=c.children(d);break;case a.type.GET_THUMBS_NO_RATIO:var b=c.children(d).not(e);break;case a.type.GET_THUMBS_RATIO:var b=c.children(d+e);break;case a.type.GET_THUMBS_NEW:var b=c.children("."+k.classNewThumb)}return b},this.getItemByThumb=function(c){var a=c.data("index");return void 0===a&&(a=c.index()),b[a]},this.isThumbLoaded=function(b){return a.getItemByThumb(b).isLoaded},this.getGlobalThumbSize=function(){return{width:j.thumb_width,height:j.thumb_height}},this._____________EXTERNAL_OTHERS__________=function(){},this.initEvents=function(){var b=".ug-thumb-wrapper";!0==k.allowOnResize&&f.on(l.eventSizeChange,w),g.on(a.events.THUMB_IMAGE_LOADED,x),c.on("touchstart",b,function(){k.touchEnabled=!0,c.off("mouseenter").off("mouseleave")}),c.on("mouseenter",b,function(b){!function(b){if(!0==k.touchEnabled)return objThumbs.off("mouseenter").off("mouseleave"),!0;!1==v(b)&&a.setThumbOverStyle(b)}(jQuery(this))}),c.on("mouseleave",b,function(b){!function(b){if(!0==k.touchEnabled)return!0;!1==v(b)&&a.setThumbNormalStyle(b,!1)}(jQuery(this))})},this.destroy=function(){var b=".ug-thumb-wrapper";c.off("touchstart",b),f.off(l.eventSizeChange),c.off("mouseenter",b),c.off("mouseleave",b),g.off(a.events.THUMB_IMAGE_LOADED)},this.loadThumbsImages=function(){var b=c.find(".ug-thumb-image");i.checkImagesLoaded(b,null,function(b,c){!1==c?function(e,d){if(!d)var d=!1;var c=jQuery(e),b=c.parents(".ug-thumb-wrapper");if(0==b.parent().length|| !0==(objItem=a.getItemByThumb(b)).isLoaded&& !1===d)return!1;a.triggerImageLoadedEvent(b,c),!0==k.customThumbs?g.trigger(a.events.PLACEIMAGE,[b,c]):function(c,b,e){if(!0==j.thumb_fixed_size)i.scaleImageCoverParent(b,c);else{"height"==j.thumb_resize_by?i.scaleImageByHeight(b,j.thumb_height):i.scaleImageByWidth(b,j.thumb_width);var d=i.getElementSize(b);i.placeElement(b,0,0),n(d.width,d.height,c)}c.children(".ug-thumb-loader").hide(),b.show(),!1==j.thumb_image_overlay_effect?b.fadeTo(0,1):(!0==j.thumb_image_overlay_effect&&function(c){var b=c.siblings(".ug-thumb-image-overlay");if(0==b.length)return!1;var a=i.getElementSize(c),d={width:a.width+"px",height:a.height+"px",left:a.left+"px",top:a.top+"px"};b.css(d),!1==k.customThumbs&&b.fadeTo(0,1)}(b),b.fadeTo(0,0),t(c)),g.trigger(a.events.AFTERPLACEIMAGE,c)}(b,c,objItem)}(b,!0):function(b){var c=a.getItemByThumb(b);if(c.isLoaded=!0,c.isThumbImageLoaded=!1,!0==k.customThumbs)return g.trigger(a.events.IMAGELOADERROR,b),!0;b.children(".ug-thumb-loader").hide(),b.children(".ug-thumb-error").show()}(jQuery(b).parent())})},this.triggerImageLoadedEvent=function(b,c){g.trigger(a.events.THUMB_IMAGE_LOADED,[b,c])},this.hideThumbs=function(){c.find(".ug-thumb-wrapper").hide()}}function UGThumbsStrip(){var b,c,d,e,f,g,h,i,j=this,k=new UniteGalleryMain,a=new UGFunctions,l=!1,m=new UGThumbsGeneral,a=new UGFunctions,n={strip_vertical_type:!1,strip_thumbs_align:"left",strip_space_between_thumbs:6,strip_thumb_touch_sensetivity:15,strip_scroll_to_thumb_duration:500,strip_scroll_to_thumb_easing:"easeOutCubic",strip_control_avia:!0,strip_control_touch:!0,strip_padding_top:0,strip_padding_bottom:0,strip_padding_left:0,strip_padding_right:0},o={isRunOnce:!1,is_placed:!1,isNotFixedThumbs:!1,handle:null},p={stripSize:0,stripActiveSize:0,stripInnerSize:0,thumbSize:0,thumbSecondSize:0};this.events={STRIP_MOVE:"stripmove",INNER_SIZE_CHANGE:"size_change"};var q={strip_thumbs_align:"top",thumb_resize_by:"width"};function r(){var a=m.getOptions();o.isNotFixedThumbs=!1===a.thumb_fixed_size,l=n.strip_vertical_type}function s(a){p.stripSize=a,!1==l?p.stripActiveSize=p.stripSize-n.strip_padding_left-n.strip_padding_right:p.stripActiveSize=p.stripSize-n.strip_padding_top-n.strip_padding_bottom,p.stripActiveSize<0&&(p.stripActiveSize=0)}function t(){var c,f=g.children(".ug-thumb-wrapper"),e=0,d=0;for(!1==l&&(d=n.strip_padding_top),i=0;i<f.length;i++){var b=jQuery(f[i]);if(!0==o.isNotFixedThumbs){if(!1==(objItem=m.getItemByThumb(b)).isLoaded)continue;b.show()}a.placeElement(b,e,d),!1==l?e+=b.outerWidth()+n.strip_space_between_thumbs:d+=b.outerHeight()+n.strip_space_between_thumbs}if(!1==l)var h=e-n.strip_space_between_thumbs;else var h=d-n.strip_space_between_thumbs;c=h,!1==l?g.width(c):g.height(c),p.stripInnerSize=c,y(),jQuery(j).trigger(j.events.INNER_SIZE_CHANGE)}function u(b){var a=j.getInnerStripPos()+b;a=j.fixInnerStripLimits(a),j.positionInnerStrip(a,!0)}function v(b){var a=-1*D(b).min;a=j.fixInnerStripLimits(a),j.positionInnerStrip(a,!0)}function w(b){var a=-1*D(b).max+p.stripSize;a=j.fixInnerStripLimits(a),j.positionInnerStrip(a,!0)}function x(a){if(!1==B())return!1;var b=C(),c=D(a);if(c.min<b.minPosThumbs){var d=a.prev();d.length?v(d):v(a)}else if(c.max>b.maxPosThumbs){var e=a.next();e.length?w(e):w(a)}}function y(){!0==B()?(h&&h.enable(),i&&i.enable()):(h&&h.disable(),i&&i.disable())}function z(){clearTimeout(o.handle),o.handle=setTimeout(function(){t()},50)}function A(){var a=k.getSelectedItem();m.setThumbSelected(a.objThumbWrapper),x(a.objThumbWrapper)}function B(){return p.stripInnerSize>p.stripActiveSize}function C(){var a={},b=j.getInnerStripPos();return a.minPosThumbs=-1*b+1,a.maxPosThumbs=-1*b+p.stripSize-1,a}function D(c){var a={},b=c.position();return!1==l?(a.min=b.left,a.max=b.left+p.thumbSize):(a.min=b.top,a.max=b.top+p.thumbSize),a}this.setHtml=function(a){if(!a){var a=d;null!=n.parent_container&&(a=n.parent_container)}a.append("<div class='ug-thumbs-strip'><div class='ug-thumbs-strip-inner'></div></div>"),g=(f=a.children(".ug-thumbs-strip")).children(".ug-thumbs-strip-inner"),m.setHtmlThumbs(g),!0==o.isNotFixedThumbs&&m.hideThumbs()},this.destroy=function(){var a=f.find(".ug-thumb-wrapper");a.off("click"),a.off("touchend"),b.off(k.events.ITEM_CHANGE),jQuery(m).off(m.events.AFTERPLACEIMAGE),i&&i.destroy(),h&&h.destroy(),m.destroy()},this.________EXTERNAL_GENERAL___________=function(){},this.init=function(g,h){var a,f;a=g,f=h,c=a.getObjects(),k=a,k.attachThumbsPanel("strip",j),b=jQuery(a),d=c.g_objWrapper,e=c.g_arrItems,n=jQuery.extend(n,f),l=n.strip_vertical_type,!0==l&&(n=jQuery.extend(n,q),n=jQuery.extend(n,f),f.thumb_resize_by="width"),m.init(a,f),r()},this.run=function(){var e,c,d,a;m.setHtmlProperties(),c=(e=jQuery(g.children(".ug-thumb-wrapper")[0])).outerWidth(),d=e.outerHeight(),a=m.getOptions(),!1==l?(p.thumbSize=c,!0==a.thumb_fixed_size?p.thumbSecondSize=d:p.thumbSecondSize=a.thumb_height,s(f.width()),p.stripInnerSize=g.width()):(p.thumbSize=d,!0==a.thumb_fixed_size?p.thumbSecondSize=c:p.thumbSecondSize=a.thumb_width,s(f.height()),p.stripInnerSize=g.height()),function(){if(!1==l){var c=p.thumbSecondSize,a={};a.height=c+"px";var b={};b.height=c+"px"}else{var d=p.thumbSecondSize,a={};a.width=d+"px";var b={};b.width=d+"px"}f.css(a),g.css(b)}(),t(),!1==o.isRunOnce&&(!0==n.strip_control_touch&&(i=new UGTouchThumbsControl).init(j),!0==n.strip_control_avia&&(h=new UGAviaControl).init(j),y(),m.loadThumbsImages(),m.initEvents(),f.find(".ug-thumb-wrapper").on("click touchend",function(a){!function(a){if(j.isTouchMotionActive()&& !0==i.isSignificantPassed())return!0;var b=m.getItemByThumb(a);k.selectItem(b)}(jQuery(this))}),b.on(k.events.ITEM_CHANGE,A),o.isNotFixedThumbs&&jQuery(m).on(m.events.AFTERPLACEIMAGE,z)),o.isRunOnce=!0},this.positionInnerStrip=function(c,a){if(void 0===a)var a=!1;if(!1==l)var b={left:c+"px"};else var b={top:c+"px"};!1==a?(g.css(b),j.triggerStripMoveEvent()):(j.triggerStripMoveEvent(),g.stop(!0).animate(b,{duration:n.strip_scroll_to_thumb_duration,easing:n.strip_scroll_to_thumb_easing,queue:!1,progress:function(){j.triggerStripMoveEvent()},always:function(){j.triggerStripMoveEvent()}}))},this.triggerStripMoveEvent=function(){jQuery(j).trigger(j.events.STRIP_MOVE)},this.isTouchMotionActive=function(){return!!i&&i.isTouchActive()},this.isItemThumbVisible=function(h){var b=h.objThumbWrapper,a=b.position(),c=-1*j.getInnerStripPos();if(!1==l)var d=c+p.stripSize,e=a.left,f=a.left+b.width();else var d=c+p.stripSize,e=a.top,f=a.top+b.height();var g=!1;return f>=c&&e<=d&&(g=!0),g},this.getInnerStripPos=function(){return!1==l?g.position().left:g.position().top},this.getInnerStripLimits=function(){var a={};return!1==l?a.maxPos=n.strip_padding_left:a.maxPos=n.strip_padding_top,a.minPos=-(p.stripInnerSize-p.stripActiveSize),a},this.fixInnerStripLimits=function(a){var b=j.getInnerStripLimits();return a>b.maxPos&&(a=b.maxPos),a<b.minPos&&(a=b.minPos),a},this.scrollForeward=function(){u(-p.stripSize)},this.scrollBack=function(){u(p.stripSize)},this.________EXTERNAL_SETTERS___________=function(){},this.setOptions=function(a){n=jQuery.extend(n,a),m.setOptions(a),r()},this.setSizeVertical=function(c){if(!1==l)throw new Error("setSizeVertical error, the strip size is not vertical");var d=p.thumbSecondSize,b={};b.width=d+"px",b.height=c+"px",f.css(b),s(c);var a={};a.width=d+"px",a.left="0px",a.top="0px",g.css(a),o.is_placed=!0,y()},this.setSizeHorizontal=function(c){if(!0==l)throw new Error("setSizeHorizontal error, the strip size is not horizontal");var d=p.thumbSecondSize+n.strip_padding_top+n.strip_padding_bottom,b={};b.width=c+"px",b.height=d+"px",f.css(b),s(c);var e=n.strip_padding_left,a={};a.height=d+"px",a.left=e+"px",a.top="0px",g.css(a),o.is_placed=!0,y()},this.setPosition=function(b,c,d,e){a.placeElement(f,b,c,d,e)},this.resize=function(b){!1==l?(f.width(b),p.stripActiveSize=b-n.strip_padding_left-n.strip_padding_right):(f.height(b),p.stripActiveSize=b-n.strip_padding_top-n.strip_padding_bottom),s(b),y(),function(){if(!1==B())return!1;var a=j.getInnerStripPos(),b=j.fixInnerStripLimits(a);a!=b&&j.positionInnerStrip(b,!0)}(),function(){if(B())return!1;!1==l?a.placeElement(g,n.strip_thumbs_align,0):a.placeElement(g,0,n.strip_thumbs_align)}(),function(){var a=k.getSelectedItem();if(null==a)return!0;var b=a.objThumbWrapper;b&&x(b)}()},this.setThumbUnselected=function(a){m.setThumbUnselected(a)},this.setCustomThumbs=function(a){m.setCustomThumbs(a)},this.________EXTERNAL_GETTERS___________=function(){},this.getObjects=function(){var a=m.getOptions(),c=jQuery.extend(n,a);return{g_gallery:k,g_objGallery:b,g_objWrapper:d,g_arrItems:e,g_objStrip:f,g_objStripInner:g,g_aviaControl:h,g_touchThumbsControl:i,isVertical:l,g_options:c,g_thumbs:m}},this.getObjThumbs=function(){return m},this.getSelectedThumb=function(){var a=k.getSelectedItemIndex();return -1==a?null:m.getThumbByIndex(a)},this.getSizeAndPosition=function(){return a.getElementSize(f)},this.getHeight=function(){return f.outerHeight()},this.getWidth=function(){return f.outerWidth()},this.getSizes=function(){return p},this.isVertical=function(){return l},this.isPlaced=function(){return o.is_placed},this.isMoveEnabled=function(){return B()}}function UGTouchThumbsControl(){var a,b,c,d,e,f,g,h,i=new UGFunctions,j={touch_portion_time:200,thumb_touch_slowFactor:0,minDeltaTime:70,minPath:10,limitsBreakAddition:30,returnAnimateSpeed:500,animationEasing:"easeOutCubic",returnAnimationEasing:"easeOutCubic"},k={touch_active:!1,loop_active:!1,mousePos:0,innerPos:0,startPos:0,startTime:0,lastTime:0,buttonReleaseTime:0,lastPos:0,lastPortionPos:0,lastDeltaTime:0,lastDeltaPos:0,speed:0,handle:"",touchEnabled:!1,isControlEnabled:!0};function l(){var b=jQuery.now(),a={};return a.passedTime=k.lastTime-k.startTime,a.lastActiveTime=b-k.buttonReleaseTime,a.passedDistance=k.lastPos-k.startPos,a.passedDistanceAbs=Math.abs(a.passedDistance),a}function m(a){return!1==h?i.getMousePosition(a).pageX:i.getMousePosition(a).pageY}function n(){var a=jQuery.now();a-k.lastTime>=j.touch_portion_time&&(k.lastDeltaTime=a-k.lastTime,k.lastDeltaTime>j.touch_portion_time&&(k.lastDeltaTime=j.touch_portion_time),k.lastDeltaPos=k.lastPos-k.lastPortionPos,k.lastPortionPos=k.lastPos,k.lastTime=a)}function o(){k.lastPos=a.getInnerStripPos(),a.triggerStripMoveEvent()}function p(b){if(!1==k.loop_active)return!0;b&&function(){var s=j.thumb_touch_slowFactor,l=j.minDeltaTime,x=j.minPath,y=a.getInnerStripPos(),d=jQuery.now()-k.lastTime,g=y-k.lastPortionPos;d<l&&k.lastDeltaTime>0&&(d=k.lastDeltaTime,g=k.lastDeltaPos+g),d<l&&(d=l);var z=g>0?1:-1,i=0;d>0&&(i=g/d);var e=i*i/(2*s)*z;Math.abs(e)<=x&&(e=0);var m=a.getInnerStripPos(),c=m+e,b=a.fixInnerStripLimits(c),n=a.getInnerStripLimits(),p=j.limitsBreakAddition,q=!1,t=b;if(c>n.maxPos&&(q=!0,b=p,c<p&&(b=c)),c<n.minPos){q=!0;var u=n.minPos-p;b=u,c>u&&(b=c)}var A=b-m,r=Math.abs(Math.round(i/s));if(0!=e&&(r=r*A/e),m!=b){var v={left:b+"px"};!0==h&&(v={top:b+"px"}),f.animate(v,{duration:r,easing:j.animationEasing,queue:!0,progress:o})}if(!0==q){var B=j.returnAnimateSpeed,w={left:t+"px"};!0==h&&(w={top:t+"px"}),f.animate(w,{duration:B,easing:j.returnAnimationEasing,queue:!0,progress:o})}}(m(b)),k.loop_active=!1,k.handle=clearInterval(k.handle)}function q(a){return!1==k.isControlEnabled||((k.buttonReleaseTime=jQuery.now(),!1==k.touch_active)?(p(a),!0):void(a.preventDefault(),k.touch_active=!1,p(a),e.removeClass("ug-dragging")))}function r(c){if(!1==k.isControlEnabled)return!0;c.preventDefault(),k.touch_active=!0;var d,b,g=m(c);f.stop(!0),d=g,b=a.getInnerStripPos(),k.mousePos=d,k.innerPos=b,k.lastPortionPos=b,k.lastDeltaTime=0,k.lastDeltaPos=0,k.startTime=jQuery.now(),k.startPos=k.innerPos,k.lastTime=k.startTime,k.lastPos=k.startPos,k.speed=0,function(){if(!0==k.loop_active)return!0;k.loop_active=!0,k.handle=setInterval(n,10)}(),e.addClass("ug-dragging")}function s(b){if(!1==k.isControlEnabled|| !1==k.touch_active)return!0;if(b.preventDefault(),0==b.buttons)return k.touch_active=!1,p(b),!0;var c=m(b);k.lastPos=a.getInnerStripPos(),function(e){var f=k.mousePos-e,b=k.innerPos-f,c=a.getInnerStripLimits();if(b>c.maxPos){var d=b-c.maxPos;b=c.maxPos+d/3}if(b<c.minPos){var d=c.minPos-b;b=c.minPos-d/3}a.positionInnerStrip(b)}(c),n()}this.enable=function(){k.isControlEnabled=!0},this.disable=function(){k.isControlEnabled=!1},this.init=function(k){a=k,d=k.getObjects(),b=d.g_gallery,c=d.g_objGallery,e=d.g_objStrip,f=d.g_objStripInner,g=d.g_options,h=d.isVertical,j.thumb_touch_slowFactor=i.normalizeSetting(5e-5,.01,1,100,g.strip_thumb_touch_sensetivity,!0),e.bind("mousedown touchstart",r),jQuery(window).add("body").bind("mouseup touchend",q),jQuery("body").bind("mousemove touchmove",s)},this.isSignificantPassed=function(){var a=l();return a.passedTime>300||a.passedDistanceAbs>30},this.isTouchActive=function(){return!0==k.touch_active|| !0==f.is(":animated")||l().lastActiveTime<50},this.destroy=function(){e.unbind("mousedown"),e.unbind("touchstart"),jQuery(window).add("body").unbind("mouseup").unbind("touchend"),jQuery("body").unbind("mousemove").unbind("touchmove")}}function UGPanelsBase(){var a,b,c,d,e,f,g,h=new UniteGalleryMain,i=this,j=new UGFunctions;function k(b,e){switch(a.orientation){case"right":case"left":var d={left:b+"px"};break;case"top":case"bottom":var d={top:b+"px"}}c.stop(!0).animate(d,{duration:300,easing:"easeInOutQuad",queue:!1,complete:function(){e&&e()}})}function l(b){switch(a.orientation){case"right":case"left":j.placeElement(c,b,null);break;case"top":case"bottom":j.placeElement(c,null,b)}}function m(){e.trigger(b.events.FINISH_MOVE)}this.init=function(c,f,i,j,k){a=f,b=i,h=c,d=j,e=k,g=jQuery(h)},this.setHtml=function(g){if(c=g,"strip"==a.panelType)var e=d.strippanel_enable_handle;else var e=d.gridpanel_enable_handle;if(!0==e&&((f=new UGPanelHandle).init(b,c,d,a.panelType,h),f.setHtml()),!0===a.isDisabledAtStart){var i="<div class='ug-overlay-disabled'></div>";c.append(i),setTimeout(function(){c.children(".ug-overlay-disabled").hide()},a.disabledAtStartTimeout)}},this.placeElements=function(){f&&f.placeHandle()},this.initEvents=function(){f&&(f.initEvents(),g.on(h.events.SLIDER_ACTION_START,function(){f.hideHandle()}),g.on(h.events.SLIDER_ACTION_END,function(){f.showHandle()}))},this.destroy=function(){f&&(f.destroy(),g.off(h.events.SLIDER_ACTION_START),g.off(h.events.SLIDER_ACTION_END))},this.openPanel=function(d){if(!d)var d=!1;if(c.is(":animated")|| !1==a.isClosed)return!1;a.isClosed=!1,e.trigger(b.events.OPEN_PANEL),!1===d?k(a.originalPos,m):(l(a.originalPos),m())},this.closePanel=function(d){if(!d)var d=!1;if(c.is(":animated")|| !0==a.isClosed)return!1;var f=i.getClosedPanelDest();a.isClosed=!0,e.trigger(b.events.CLOSE_PANEL),!1===d?k(f,m):(l(f),m())},this.setClosedState=function(c){a.originalPos=c,e.trigger(b.events.CLOSE_PANEL),a.isClosed=!0},this.setOpenedState=function(c){e.trigger(b.events.OPEN_PANEL),a.isClosed=!1},this.getClosedPanelDest=function(){var b,d=j.getElementSize(c);switch(a.orientation){case"left":a.originalPos=d.left,b=-a.panelWidth;break;case"right":a.originalPos=d.left;var e=h.getSize();b=e.width;break;case"top":a.originalPos=d.top,b=-a.panelHeight;break;case"bottom":a.originalPos=d.top;var e=h.getSize();b=e.height}return b},this.isPanelClosed=function(){return a.isClosed},this.setDisabledAtStart=function(b){if(b<=0)return!1;a.isDisabledAtStart=!0,a.disabledAtStartTimeout=b}}function UGPanelHandle(){var a,b,c,d=new UGFunctions,e={panel_handle_align:"top",panel_handle_offset:0,panel_handle_skin:0};function f(){c.removeClass("ug-button-hover")}function g(a){if(a.stopPropagation(),a.stopImmediatePropagation(),!1==d.validateClickTouchstartEvent(a.type))return!0;b.isPanelClosed()?b.openPanel():b.closePanel()}this.init=function(f,g,c,d,h){switch(b=f,a=g,d){case"grid":e.panel_handle_align=c.gridpanel_handle_align,e.panel_handle_offset=c.gridpanel_handle_offset,e.panel_handle_skin=c.gridpanel_handle_skin;break;case"strip":e.panel_handle_align=c.strippanel_handle_align,e.panel_handle_offset=c.strippanel_handle_offset,e.panel_handle_skin=c.strippanel_handle_skin;break;default:throw new Error("Panel handle error: wrong panel type: "+d)}var i=h.getOptions().gallery_skin;""==e.panel_handle_skin&&(e.panel_handle_skin=i)},this.setHtml=function(){var f=b.getOrientation(),d="ug-panel-handle-tip";switch(f){case"right":d+=" ug-handle-tip-left";break;case"left":d+=" ug-handle-tip-right";break;case"bottom":d+=" ug-handle-tip-top";break;case"top":d+=" ug-handle-tip-bottom"}a.append("<div class='"+d+" ug-skin-"+e.panel_handle_skin+"'></div>"),c=a.children(".ug-panel-handle-tip")},this.initEvents=function(){d.addClassOnHover(c),c.bind("click touchstart",g),jQuery(b).on(b.events.OPEN_PANEL,function(){f(),c.removeClass("ug-button-closed")}),jQuery(b).on(b.events.CLOSE_PANEL,function(){f(),c.addClass("ug-button-closed")})},this.destroy=function(){d.destroyButton(c),jQuery(b).off(b.events.OPEN_PANEL),jQuery(b).off(b.events.CLOSE_PANEL)},this.placeHandle=function(){var a=d.getElementSize(c);!function(){var a=b.getOrientation();switch(a){case"right":case"left":"top"!=e.panel_handle_align&&"bottom"!=e.panel_handle_align&&(e.panel_handle_align="top");break;case"bottom":"left"!=e.panel_handle_align&&"right"!=e.panel_handle_align&&(e.panel_handle_align="left");break;case"top":"left"!=e.panel_handle_align&&"right"!=e.panel_handle_align&&(e.panel_handle_align="right")}}();var f=b.getOrientation();switch(f){case"left":d.placeElement(c,"right",e.panel_handle_align,-a.width);break;case"right":d.placeElement(c,-a.width,e.panel_handle_align,0,e.panel_handle_offset);break;case"top":d.placeElement(c,e.panel_handle_align,"bottom",e.panel_handle_offset,-a.height);break;case"bottom":d.placeElement(c,e.panel_handle_align,"top",e.panel_handle_offset,-a.height);break;default:throw new Error("Wrong panel orientation: "+f)}},this.hideHandle=function(){!0==c.is(":visible")&&c.hide()},this.showHandle=function(){!1==c.is(":visible")&&c.show()}}function UGStripPanel(){var a,b,c,d,e,f=this,g=jQuery(this),h=new UniteGalleryMain,i=new UGFunctions,j=new UGThumbsStrip,k=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var l={strippanel_vertical_type:!1,strippanel_padding_top:8,strippanel_padding_bottom:8,strippanel_padding_left:0,strippanel_padding_right:0,strippanel_enable_buttons:!0,strippanel_buttons_skin:"",strippanel_padding_buttons:2,strippanel_buttons_role:"scroll_strip",strippanel_enable_handle:!0,strippanel_handle_align:"top",strippanel_handle_offset:0,strippanel_handle_skin:"",strippanel_background_color:""},m={strip_vertical_type:!0,strippanel_padding_left:8,strippanel_padding_right:8,strippanel_padding_top:0,strippanel_padding_bottom:0},n={strippanel_padding_left:8,strippanel_padding_right:8,strippanel_padding_top:8,strippanel_padding_bottom:8},o={panelType:"strip",panelWidth:0,panelHeight:0,isEventsInited:!1,isClosed:!1,orientation:null,originalPos:null,isFirstRun:!0};function p(){!1==l.strippanel_vertical_type?function(){var c=j.getHeight(),f=o.panelWidth;if(a){b.height(c),a.height(c);var h=b.children(".ug-strip-arrow-tip");i.placeElement(h,"center","middle");var k=a.children(".ug-strip-arrow-tip");i.placeElement(k,"center","middle")}var g=c+l.strippanel_padding_top+l.strippanel_padding_bottom;e.width(f),e.height(g),o.panelHeight=g;var d=f-l.strippanel_padding_left-l.strippanel_padding_right;a&&(d=d-2*a.outerWidth()-2*l.strippanel_padding_buttons),j.resize(d)}():function(){var c=j.getWidth(),f=o.panelHeight;if(a){b.width(c),a.width(c);var h=b.children(".ug-strip-arrow-tip");i.placeElement(h,"center","middle");var k=a.children(".ug-strip-arrow-tip");i.placeElement(k,"center","middle")}var g=c+l.strippanel_padding_left+l.strippanel_padding_right;e.width(g),e.height(f),o.panelWidth=g;var d=f-l.strippanel_padding_top-l.strippanel_padding_bottom;a&&(d=d-2*a.outerHeight()-2*l.strippanel_padding_buttons),j.resize(d)}()}function q(){var c,d;!1==l.strippanel_vertical_type?(a&&(i.placeElement(b,"left","top",l.strippanel_padding_left,l.strippanel_padding_top),i.placeElement(a,"right","top",l.strippanel_padding_right,l.strippanel_padding_top)),c=l.strippanel_padding_left,a&&(c+=a.outerWidth()+l.strippanel_padding_buttons),j.setPosition(c,l.strippanel_padding_top)):(a&&(i.placeElement(b,"left","top",l.strippanel_padding_left,l.strippanel_padding_top),i.placeElement(a,"left","bottom",l.strippanel_padding_left,l.strippanel_padding_bottom)),d=l.strippanel_padding_top,a&&(d+=a.outerHeight()+l.strippanel_padding_buttons),j.setPosition(l.strippanel_padding_left,d)),k.placeElements()}function r(a){if(i.isButtonDisabled(a))return!0;"advance_item"==l.strippanel_buttons_role?h.nextItem():j.scrollForeward()}function s(a){if(i.isButtonDisabled(a))return!0;"advance_item"==l.strippanel_buttons_role?h.prevItem():j.scrollBack()}function t(){if(!a)return!0;if(!1==j.isMoveEnabled())return i.disableButton(b),i.disableButton(a),!0;var c=j.getInnerStripLimits(),d=j.getInnerStripPos();d>=c.maxPos?i.disableButton(b):i.enableButton(b),d<=c.minPos?i.disableButton(a):i.enableButton(a)}function u(){t()}function v(){h.isLastItem()?i.disableButton(a):i.enableButton(a),h.isFirstItem()?i.disableButton(b):i.enableButton(b)}this.destroy=function(){a&&(i.destroyButton(a),i.destroyButton(b),jQuery(j).off(j.events.STRIP_MOVE),jQuery(h).off(h.events.ITEM_CHANGE),jQuery(h).off(h.events.SIZE_CHANGE)),k.destroy(),j.destroy()},this.getOrientation=function(){return o.orientation},this.setOrientation=function(a){o.orientation=a},this.init=function(q,r){var e,b,a,i,p;e=q,b=r,c=jQuery(h=e),l=jQuery.extend(l,b),a=!1,!0==l.strippanel_vertical_type&&(l=jQuery.extend(l,m),a=!0),!1==l.strippanel_enable_buttons&&(l=jQuery.extend(l,n),a=!0),!0==a&&(l=jQuery.extend(l,b)),i=h.getOptions(),p=i.gallery_skin,""==l.strippanel_buttons_skin&&(l.strippanel_buttons_skin=p),d=h.getElement(),k.init(h,o,f,l,g),j=new UGThumbsStrip,j.init(h,l)},this.run=function(){!function(){if(!0==o.isFirstRun&& !1==function(){if(!1==l.strippanel_vertical_type){if(0==o.panelWidth)throw new Error("Strip panel error: The width not set, please set width")}else if(0==o.panelHeight)throw new Error("Strip panel error: The height not set, please set height");if(null==o.orientation)throw new Error("Wrong orientation, please set panel orientation before run");return!0}())return!1;j.run(),p(),q(),function(){if(!0==o.isEventsInited)return!1;o.isEventsInited=!0,a&&((i.addClassOnHover(a,"ug-button-hover"),i.addClassOnHover(b,"ug-button-hover"),i.setButtonOnClick(b,s),i.setButtonOnClick(a,r),"advance_item"!=l.strippanel_buttons_role)?(jQuery(j).on(j.events.STRIP_MOVE,u),jQuery(j).on(j.events.INNER_SIZE_CHANGE,t),c.on(h.events.SIZE_CHANGE,t)):!1==h.getOptions().gallery_carousel&&jQuery(h).on(h.events.ITEM_CHANGE,v)),k.initEvents()}(),o.isFirstRun=!1,t()}()},this.setHtml=function(c){!function(c){if(!c)var c=d;if(c.append("<div class='ug-strip-panel'></div>"),e=c.children(".ug-strip-panel"),!0==l.strippanel_enable_buttons){var f="ug-strip-arrow-left",g="ug-strip-arrow-right";!0==l.strippanel_vertical_type&&(f="ug-strip-arrow-up",g="ug-strip-arrow-down"),e.append("<div class='ug-strip-arrow "+f+" ug-skin-"+l.strippanel_buttons_skin+"'><div class='ug-strip-arrow-tip'></div></div>"),e.append("<div class='ug-strip-arrow "+g+" ug-skin-"+l.strippanel_buttons_skin+"'><div class='ug-strip-arrow-tip'></div></div>")}k.setHtml(e),j.setHtml(e),!0==l.strippanel_enable_buttons&&(b=e.children("."+f),a=e.children("."+g)),""!=l.strippanel_background_color&&e.css("background-color",l.strippanel_background_color)}(c)},this.getElement=function(){return e},this.getSize=function(){return i.getElementSize(e)},this.setWidth=function(a){o.panelWidth=a},this.setHeight=function(a){o.panelHeight=a},this.resize=function(a){f.setWidth(a),p(),q()},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return k.isPanelClosed()},this.getClosedPanelDest=function(){return k.getClosedPanelDest()},this.openPanel=function(a){k.openPanel(a)},this.closePanel=function(a){k.closePanel(a)},this.setOpenedState=function(a){k.setOpenedState(a)},this.setClosedState=function(a){k.setClosedState(a)},this.setCustomThumbs=function(a){j.setCustomThumbs(a)},this.setDisabledAtStart=function(a){k.setDisabledAtStart(a)}}function UGGridPanel(){var a,b,c,d,e=this,f=jQuery(this),g=new UniteGalleryMain,h=new UGFunctions,i=new UGThumbsGrid,j=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var k={gridpanel_vertical_scroll:!0,gridpanel_grid_align:"middle",gridpanel_padding_border_top:10,gridpanel_padding_border_bottom:4,gridpanel_padding_border_left:10,gridpanel_padding_border_right:10,gridpanel_arrows_skin:"",gridpanel_arrows_align_vert:"middle",gridpanel_arrows_padding_vert:4,gridpanel_arrows_align_hor:"center",gridpanel_arrows_padding_hor:10,gridpanel_space_between_arrows:20,gridpanel_arrows_always_on:!1,gridpanel_enable_handle:!0,gridpanel_handle_align:"top",gridpanel_handle_offset:0,gridpanel_handle_skin:"",gridpanel_background_color:""},l={gridpanel_grid_align:"middle",gridpanel_padding_border_top:2,gridpanel_padding_border_bottom:2},m={gridpanel_grid_align:"center"},n={panelType:"grid",isHorType:!1,arrowsVisible:!1,panelHeight:0,panelWidth:0,originalPosX:null,isEventsInited:!1,isClosed:!1,orientation:null};function o(){if(null==n.orientation)throw new Error("Wrong orientation, please set panel orientation before run")}function p(){return k.gridpanel_padding_border_left}function q(){var b=k.gridpanel_grid_align,a=0;switch(b){case"top":a=k.gridpanel_padding_border_top;break;case"bottom":a=k.gridpanel_padding_border_bottom}var c=p(),d=i.getElement();h.placeElement(d,c,b,0,a)}this.destroy=function(){b&&h.destroyButton(b),a&&h.destroyButton(a),j.destroy(),i.destroy()},this.getOrientation=function(){return n.orientation},this.setOrientation=function(a){switch(n.orientation=a,a){case"right":case"left":n.isHorType=!1;break;case"top":case"bottom":n.isHorType=!0;break;default:throw new Error("Wrong grid panel orientation: "+a)}},this.setHeight=function(b){if(!0==n.isHorType)throw new Error("setHeight is not appliable to this orientatio ("+n.orientation+"). Please use setWidth");n.panelHeight=b;var c=function(){var b=k.gridpanel_padding_border_top+k.gridpanel_padding_border_bottom,c=n.panelHeight-b;if(!1==k.gridpanel_arrows_always_on&&1==i.getNumPanesEstimationByHeight(c))return c;var b=h.getElementSize(a).height+k.gridpanel_arrows_padding_vert;return!0==k.gridpanel_vertical_scroll&&(b*=2),b+=k.gridpanel_padding_border_top+k.gridpanel_padding_border_bottom,c=n.panelHeight-b}();i.setMaxHeight(c)},this.setWidth=function(b){if(!1==n.isHorType)throw new Error("setWidth is not appliable to this orientatio ("+n.orientation+"). Please use setHeight");n.panelWidth=b;var c=function(){var b=k.gridpanel_padding_border_left+k.gridpanel_padding_border_right,c=n.panelWidth-b;if(!1==k.gridpanel_arrows_always_on&&1==i.getNumPanesEstimationByWidth(c))return c;var d=h.getElementSize(a).width;return b+=(d+k.gridpanel_arrows_padding_hor)*2,c=n.panelWidth-b}();i.setMaxWidth(c)},this.init=function(h,p){var b,a,d;b=h,a=p,g=b,o(),a&&a.vertical_scroll&&(k.gridpanel_vertical_scroll=a.vertical_scroll),k=jQuery.extend(k,a),!0==n.isHorType?(k=jQuery.extend(k,m),k=jQuery.extend(k,a)):!0==k.gridpanel_vertical_scroll&&(k=jQuery.extend(k,l),k=jQuery.extend(k,a),k.grid_panes_direction="bottom"),d=g.getOptions().gallery_skin,""==k.gridpanel_arrows_skin&&(k.gridpanel_arrows_skin=d),c=b.getObjects().g_objWrapper,j.init(g,n,e,k,f),(i=new UGThumbsGrid).init(g,k)},this.setHtml=function(){c.append("<div class='ug-grid-panel'></div>"),d=c.children(".ug-grid-panel"),n.isHorType?(d.append("<div class='grid-arrow grid-arrow-left-hortype ug-skin-"+k.gridpanel_arrows_skin+"'></div>"),d.append("<div class='grid-arrow grid-arrow-right-hortype ug-skin-"+k.gridpanel_arrows_skin+"'></div>"),b=d.children(".grid-arrow-left-hortype"),a=d.children(".grid-arrow-right-hortype")):!1==k.gridpanel_vertical_scroll?(d.append("<div class='grid-arrow grid-arrow-left ug-skin-"+k.gridpanel_arrows_skin+"'></div>"),d.append("<div class='grid-arrow grid-arrow-right ug-skin-"+k.gridpanel_arrows_skin+"'></div>"),b=d.children(".grid-arrow-left"),a=d.children(".grid-arrow-right")):(d.append("<div class='grid-arrow grid-arrow-up ug-skin-"+k.gridpanel_arrows_skin+"'></div>"),d.append("<div class='grid-arrow grid-arrow-down ug-skin-"+k.gridpanel_arrows_skin+"'></div>"),b=d.children(".grid-arrow-up"),a=d.children(".grid-arrow-down")),j.setHtml(d),b.fadeTo(0,0),a.fadeTo(0,0),i.setHtml(d),""!=k.gridpanel_background_color&&d.css("background-color",k.gridpanel_background_color)},this.run=function(){var c,e;o(),"center"==k.gridpanel_grid_align&&(k.gridpanel_grid_align="middle"),i.run(),c=!1,!0==k.gridpanel_arrows_always_on?c=!0:i.getNumPanes()>1&&(c=!0),!0==c?(a.show().fadeTo(0,1),b.show().fadeTo(0,1),n.arrowsVisible=!0):(a.hide(),b.hide(),n.arrowsVisible=!1),e=i.getSize(),!0==n.isHorType?n.panelHeight=e.height+k.gridpanel_padding_border_top+k.gridpanel_padding_border_bottom:n.panelWidth=e.width+k.gridpanel_padding_border_left+k.gridpanel_padding_border_right,h.setElementSize(d,n.panelWidth,n.panelHeight),!1==n.isHorType?!0==k.gridpanel_vertical_scroll?!0==n.arrowsVisible?function(){var e,f,g,j,d=h.getElementSize(b),c=i.getSize();switch(k.gridpanel_grid_align){default:case"top":e=k.gridpanel_padding_border_top+d.height+k.gridpanel_arrows_padding_vert;break;case"middle":e="middle";break;case"bottom":e=n.panelHeight-c.height-d.height-k.gridpanel_padding_border_bottom-k.gridpanel_arrows_padding_vert}var l=p(),m=i.getElement();h.placeElement(m,l,e);var c=i.getSize();switch(k.gridpanel_arrows_align_vert){default:case"center":case"middle":f=(c.top-d.height)/2,g=c.bottom+(n.panelHeight-c.bottom-d.height)/2,j=0;break;case"grid":f=c.top-d.height-k.gridpanel_arrows_padding_vert_vert,g=c.bottom+k.gridpanel_arrows_padding_vert,j=0;break;case"border":case"borders":f=k.gridpanel_padding_border_top,g="bottom",j=k.gridpanel_padding_border_bottom}h.placeElement(b,"center",f),h.placeElement(a,"center",g,0,j)}():q():!0==n.arrowsVisible?function(){var d,j,e,m,f=h.getElementSize(b),c=i.getSize(),g=k.gridpanel_padding_border_top;switch(k.gridpanel_grid_align){case"middle":switch(k.gridpanel_arrows_align_vert){default:var l=c.height+k.gridpanel_arrows_padding_vert+f.height;g=(n.panelHeight-l)/2;break;case"border":case"borders":g=(n.panelHeight-f.height-k.gridpanel_padding_border_bottom-c.height)/2}break;case"bottom":var l=c.height+f.height+k.gridpanel_arrows_padding_vert;g=n.panelHeight-l-k.gridpanel_padding_border_bottom}var o=i.getElement(),q=p();h.placeElement(o,q,g);var c=i.getSize();switch(k.gridpanel_arrows_align_vert){default:case"center":case"middle":d=c.bottom+(n.panelHeight-c.bottom-f.height)/2,e=0;break;case"grid":d=c.bottom+k.gridpanel_arrows_padding_vert,e=0;break;case"border":case"borders":d="bottom",e=k.gridpanel_padding_border_bottom}j=-f.width/2-k.gridpanel_space_between_arrows/2,h.placeElement(b,"center",d,j,e);var m=Math.abs(j);h.placeElement(a,"center",d,m,e)}():q():!0==n.arrowsVisible?function(){var f,g,j,e,d=h.getElementSize(b),c=i.getSize();switch(k.gridpanel_grid_align){default:case"left":f=k.gridpanel_padding_border_left+k.gridpanel_arrows_padding_hor+d.width;break;case"middle":case"center":f="center";break;case"right":f=n.panelWidth-c.width-d.width-k.gridpanel_padding_border_right-k.gridpanel_arrows_padding_hor}var l=i.getElement();switch(h.placeElement(l,f,k.gridpanel_padding_border_top),c=i.getSize(),k.gridpanel_arrows_align_vert){default:case"center":case"middle":e=(c.height-d.height)/2+c.top;break;case"top":e=k.gridpanel_padding_border_top+k.gridpanel_arrows_padding_vert;break;case"bottom":e=n.panelHeight-k.gridpanel_padding_border_bottom-k.gridpanel_arrows_padding_vert-d.height}switch(k.gridpanel_arrows_align_hor){default:case"borders":g=k.gridpanel_padding_border_left,j=n.panelWidth-k.gridpanel_padding_border_right-d.width;break;case"grid":g=c.left-k.gridpanel_arrows_padding_hor-d.width,j=c.right+k.gridpanel_arrows_padding_hor;break;case"center":g=(c.left-d.width)/2,j=c.right+(n.panelWidth-c.right-d.width)/2}h.placeElement(b,g,e),h.placeElement(a,j,e)}():function(){var a,b=i.getSize();switch(k.gridpanel_grid_align){default:case"left":a=k.gridpanel_padding_border_left;break;case"middle":case"center":a="center";break;case"right":a=n.panelWidth-b.width-k.gridpanel_padding_border_right}var c=i.getElement();h.placeElement(c,a,k.gridpanel_padding_border_top)}(),j.placeElements(),function(){if(!0==n.isEventsInited)return!1;n.isEventsInited=!0,b&&(h.addClassOnHover(b),i.attachPrevPaneButton(b)),a&&(h.addClassOnHover(a),i.attachNextPaneButton(a)),j.initEvents()}()},this.getElement=function(){return d},this.getSize=function(){return h.getElementSize(d)},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return j.isPanelClosed()},this.getClosedPanelDest=function(){return j.getClosedPanelDest()},this.openPanel=function(a){j.openPanel(a)},this.closePanel=function(a){j.closePanel(a)},this.setOpenedState=function(a){j.setOpenedState(a)},this.setClosedState=function(a){j.setClosedState(a)},this.setDisabledAtStart=function(a){j.setDisabledAtStart(a)}}function UGThumbsGrid(){var a,b,c,d,e,f,g=this,h=jQuery(this),i=new UniteGalleryMain,j=new UGFunctions,k=new UGThumbsGeneral,l=new UGTileDesign,m={grid_panes_direction:"left",grid_num_cols:2,grid_min_cols:2,grid_num_rows:2,grid_space_between_cols:10,grid_space_between_rows:10,grid_space_between_mobile:10,grid_transition_duration:300,grid_transition_easing:"easeInOutQuad",grid_carousel:!1,grid_padding:0,grid_vertical_scroll_ondrag:!1};this.events={PANE_CHANGE:"pane_change"};var n={eventSizeChange:"thumb_size_change",isHorizontal:!1,isMaxHeight:!1,isMaxWidth:!1,gridHeight:0,gridWidth:0,innerWidth:0,innerHeight:0,numPanes:0,arrPanes:0,numThumbs:0,currentPane:0,numThumbsInPane:0,isNavigationVertical:!1,touchActive:!1,startScrollPos:0,isFirstTimeRun:!0,isTilesMode:!1,storedEventID:"thumbsgrid",tileMaxWidth:null,tileMaxHeight:null,spaceBetweenCols:null,spaceBetweenRows:null};function o(){if(!0==n.isTilesMode)var a=l.getGlobalTileSize();else var a=k.getGlobalThumbSize();return a}function p(){if(!1==n.isTilesMode)throw new Error("Dynamic size can be set only in tiles mode");var a=!1,c=i.isMobileMode(),d=n.spaceBetweenCols;!0==c?(n.spaceBetweenCols=m.grid_space_between_mobile,n.spaceBetweenRows=m.grid_space_between_mobile):(n.spaceBetweenCols=m.grid_space_between_cols,n.spaceBetweenRows=m.grid_space_between_rows),n.spaceBetweenCols!=d&&(a=!0);var e=o().width,b=n.tileMaxWidth;return j.getNumItemsInSpace(n.gridWidth,n.tileMaxWidth,n.spaceBetweenCols)<m.grid_min_cols&&(b=j.getItemSizeInSpace(n.gridWidth,m.grid_min_cols,n.spaceBetweenCols)),l.setTileSizeOptions(b),b!=e&&(a=!0),a}function q(){var g,a,c,h,d,b;!1==n.isHorizontal?(g=o().width,a=m.grid_num_cols*g+(m.grid_num_cols-1)*n.spaceBetweenCols+2*m.grid_padding,c=n.gridHeight,n.gridWidth=a,j.setElementSize(e,a,c),j.setElementSize(f,a,c),n.innerWidth=a,n.innerHeight=c):(h=o().height,d=n.gridWidth,b=m.grid_num_rows*h+(m.grid_num_rows-1)*n.spaceBetweenRows+2*m.grid_padding,n.gridHeight=b,j.setElementSize(e,d,b),j.setElementSize(f,d,b),n.innerWidth=d,n.innerHeight=b)}function r(b){var a=w(b);if(-1==a)return!1;g.gotoPane(a,"scroll")}function s(b){var a=u(b);if(!1==a)return!1;f.stop(!0).animate(a,{duration:m.grid_transition_duration,easing:m.grid_transition_easing,queue:!1})}function t(){s(-n.arrPanes[n.currentPane])}function u(b){var a={};return!0==n.isNavigationVertical?a.top=b+"px":a.left=b+"px",a}function v(){var a=j.getElementSize(f);return!0==n.isNavigationVertical?a.top:a.left}function w(a){return!1==function(a){if(a<0||a>=n.numThumbs)throw new Error("Thumb not exists: "+a);return!0}(a)?-1:Math.floor(a/n.numThumbsInPane)}function x(){return 1==n.numPanes||j.isApproveStoredEventClick(n.storedEventID,n.isNavigationVertical)}function y(c){if(!0==function(){if(1==n.numPanes)return!1;var a=j.getStoredEventData(n.storedEventID),c=a.diffTime,b=Math.abs(v()-a.startInnerPos);return b>30||b>5&&c>300}())return!0;var a=jQuery(this),b=k.getItemByThumb(a);i.selectItem(b)}function z(a){if(1==n.numPanes|| !0==n.touchActive)return!0;!1==n.isTilesMode&&a.preventDefault(),n.touchActive=!0;var b={startInnerPos:v()};j.storeEventData(a,n.storedEventID,b)}function A(d){if(!1==n.touchActive)return!0;d.preventDefault(),j.updateStoredEventData(d,n.storedEventID);var b=j.getStoredEventData(n.storedEventID,n.isNavigationVertical);if(!1!=m.grid_vertical_scroll_ondrag&& !0!=n.isNavigationVertical&&"vert"===j.handleScrollTop(n.storedEventID))return!0;var c=b.diffMousePos,a=b.startInnerPos+c,e=c>0?"prev":"next",g=n.arrPanes[n.numPanes-1];!1==m.grid_carousel&&a>0&&"prev"==e&&(a/=3),!1==m.grid_carousel&&a< -g&&"next"==e&&(a=b.startInnerPos+c/3),function(b){var a=u(b);if(!1==a)return!1;f.css(a)}(a)}function B(c){if(!1==n.touchActive)return!0;j.updateStoredEventData(c,n.storedEventID);var a,b,e,d=j.getStoredEventData(n.storedEventID,n.isNavigationVertical);if(n.touchActive=!1,!1==(a=j.getStoredEventData(n.storedEventID),b=v(),!!((diffPos=Math.abs(a.startInnerPos-b))>=Math.round(3*(!0==n.isNavigationVertical?n.gridHeight:n.gridWidth)/8)||a.diffTime<300&&diffPos>25)))return t(),!0;"next"==(v()-d.startInnerPos>0?"prev":"next")?!1==m.grid_carousel&&g.isLastPane()?t():g.nextPane():!1==m.grid_carousel&&g.isFirstPane()?t():g.prevPane()}function C(){var a=i.getSelectedItem();k.setThumbSelected(a.objThumbWrapper),r(a.index)}this.destroy=function(){if(!1==n.isTilesMode){var b=e.find(".ug-thumb-wrapper");b.off("click"),b.off("touchend"),a.on(i.events.ITEM_CHANGE),k.destroy()}else l.destroy();e.unbind("mousedown"),e.unbind("touchstart"),jQuery("body").unbind("mousemove"),jQuery("body").unbind("touchmove"),jQuery(window).add("body").unbind("touchend"),jQuery(window).add("body").unbind("mouseup"),h.off(g.events.PANE_CHANGE)},this.__________EXTERNAL_GENERAL_________=function(){},this.setThumbUnselected=function(a){k.setThumbUnselected(a)},this.isItemThumbVisible=function(a){return w(a.index)==n.currentPane},this.__________EXTERNAL_API_________=function(){},this.getNumPanesEstimationByHeight=function(c){if(!0==n.isTilesMode)var a=m.tile_height;else var a=k.getOptions().thumb_height;var b=Math.ceil(k.getNumThumbs()/m.grid_num_cols);return Math.ceil((b*a+(b-1)*n.spaceBetweenRows)/c)},this.getNumPanesEstimationByWidth=function(c){if(n.isTilesMode)var a=m.tile_width;else var a=k.getOptions().thumb_width;var b=Math.ceil(k.getNumThumbs()/m.grid_num_rows);return Math.ceil((b*a+(b-1)*n.spaceBetweenCols)/c)},this.getHeightEstimationByWidth=function(b){if(!1==n.isTilesMode)throw new Error("This function works only with tiles mode");var e,c=k.getNumThumbs(),d=j.getNumItemsInSpace(b,m.tile_width,n.spaceBetweenCols),a=Math.ceil(c/d);return a>m.grid_num_rows&&(a=m.grid_num_rows),j.getSpaceByNumItems(a,m.tile_height,n.spaceBetweenRows)+2*m.grid_padding},this.getElement=function(){return e},this.getSize=function(){return j.getElementSize(e)},this.getNumPanes=function(){return n.numPanes},this.isFirstPane=function(){return 0==n.currentPane},this.isLastPane=function(){return n.currentPane==n.numPanes-1},this.getPaneInfo=function(){return{pane:n.currentPane,total:n.numPanes}},this.getPane=function(){return n.currentPane},this.setWidth=function(a){n.gridWidth=a,n.isHorizontal=!0},this.setMaxWidth=function(a){n.gridWidth=a,n.isMaxWidth=!0,n.isHorizontal=!0},this.setHeight=function(a){n.gridHeight=a,n.isHorizontal=!1},this.setMaxHeight=function(a){n.gridHeight=a,n.isMaxHeight=!0,n.isHorizontal=!1},this.gotoPane=function(a,c){if(!1==function(a){if(a>=n.numPanes||a<0)throw new Error("Pane "+index+" doesn't exists.");return!0}(a)||a==n.currentPane)return!1;var b=-n.arrPanes[a];n.currentPane=a,s(b),h.trigger(g.events.PANE_CHANGE,a)},this.nextPane=function(){var a=n.currentPane+1;if(a>=n.numPanes){if(!1==m.grid_carousel)return!0;a=0}g.gotoPane(a,"next")},this.prevPane=function(){var a=n.currentPane-1;if(a<0&&(a=n.numPanes-1,!1==m.grid_carousel))return!1;g.gotoPane(a,"prev")},this.attachNextPaneButton=function(a){if(j.setButtonOnClick(a,g.nextPane),!0==m.grid_carousel)return!0;g.isLastPane()&&a.addClass("ug-button-disabled"),h.on(g.events.PANE_CHANGE,function(){g.isLastPane()?a.addClass("ug-button-disabled"):a.removeClass("ug-button-disabled")})},this.attachPrevPaneButton=function(a){if(j.setButtonOnClick(a,g.prevPane),!0==m.grid_carousel)return!0;g.isFirstPane()&&a.addClass("ug-button-disabled"),h.on(g.events.PANE_CHANGE,function(){g.isFirstPane()?a.addClass("ug-button-disabled"):a.removeClass("ug-button-disabled")})},this.attachBullets=function(a){a.setActive(n.currentPane),jQuery(a).on(a.events.BULLET_CLICK,function(c,b){g.gotoPane(b,"theme"),a.setActive(b)}),jQuery(g).on(g.events.PANE_CHANGE,function(c,b){a.setActive(b)})},this.getObjTileDesign=function(){return l},this.init=function(e,f,h){!function(e,f,o){var h;if(b=e.getObjects(),i=e,i.attachThumbsPanel("grid",g),a=jQuery(e),c=b.g_objWrapper,d=b.g_arrItems,!0===o&&(n.isTilesMode=!0),n.numThumbs=d.length,h=f,m=jQuery.extend(m,h),k.setOptions(h),n.isNavigationVertical="top"==m.grid_panes_direction||"bottom"==m.grid_panes_direction,n.spaceBetweenCols=m.grid_space_between_cols,n.spaceBetweenRows=m.grid_space_between_rows,!0==n.isTilesMode){l.setFixedMode(),l.setApproveClickFunction(x),l.init(e,m);var j=l.getOptions();n.tileMaxHeight=j.tile_height,n.tileMaxWidth=j.tile_width,k=l.getObjThumbs()}else f.thumb_fixed_size=!0,k.init(e,f)}(e,f,h)},this.run=function(){!function(){var b=i.getSelectedItem();if((function(){if(!1==n.isHorizontal){if(0==n.gridHeight)throw new Error("You must set height before run.")}else if(0==n.gridWidth)throw new Error("You must set width before run.")}(),!0==n.isFirstTimeRun)?(!1==n.isTilesMode?(k.initEvents(),e.find(".ug-thumb-wrapper").on("click touchend",y),a.on(i.events.ITEM_CHANGE,C)):l.initEvents(),e.bind("mousedown touchstart",z),jQuery("body").bind("mousemove touchmove",A),jQuery(window).add("body").bind("mouseup touchend",B),!0==n.isTilesMode?(p(),q(),l.run()):(k.setHtmlProperties(),q(),k.loadThumbsImages())):!0==n.isTilesMode&& !0==p()&&(q(),l.run()),!1==n.isHorizontal?n.isNavigationVertical?function(){var o=f.children(".ug-thumb-wrapper"),c=0,b=0,a=0,g=0,h=0,p=0;n.innerWidth=0,n.numPanes=1,n.arrPanes=[],n.numThumbsInPane=0,n.arrPanes.push(h);var q=o.length;for(i=0;i<q;i++){var i=jQuery(o[i]);j.placeElement(i,c,b);var r=i.outerWidth(),k=i.outerHeight();c+=r+n.spaceBetweenCols;var d=b+k;d>a&&(a=d),++g>=m.grid_num_cols&&(b+=k+n.spaceBetweenRows,c=h,g=0),1==n.numPanes&&n.numThumbsInPane++,d=b+k;var l=p+n.gridHeight;d>l&&(!0==n.isMaxHeight&&1==n.numPanes&&(n.gridHeight=a,e.height(n.gridHeight),l=n.gridHeight),p=b=l+n.spaceBetweenRows,c=h=0,g=0,i<q-1&&(n.numPanes++,n.arrPanes.push(b)))}f.height(a),n.innerHeight=a,!0==n.isMaxHeight&&1==n.numPanes&&(n.gridHeight=a,e.height(a))}():function(){var l=f.children(".ug-thumb-wrapper"),a=0,b=0,g=0,d=0,h=0,c=0;n.innerWidth=0,n.numPanes=1,n.arrPanes=[],n.numThumbsInPane=0,n.arrPanes.push(d);var o=l.length;for(i=0;i<o;i++){var i=jQuery(l[i]);j.placeElement(i,a,b);var p=i.outerWidth(),k=i.outerHeight();a>h&&(h=a);var q=b+k;q>c&&(c=q);var r=h+p;r>n.innerWidth&&(n.innerWidth=r),a+=p+n.spaceBetweenCols,++g>=m.grid_num_cols&&(b+=k+n.spaceBetweenRows,a=d,g=0),1==n.numPanes&&n.numThumbsInPane++,b+k>n.gridHeight&&(b=0,a=d=n.innerWidth+n.spaceBetweenCols,g=0,!0==n.isMaxHeight&&1==n.numPanes&&(n.gridHeight=c,e.height(n.gridHeight)),i<o-1&&(n.numPanes++,n.arrPanes.push(d)))}f.width(n.innerWidth),!0==n.isMaxHeight&&1==n.numPanes&&(n.gridHeight=c,e.height(c))}():function(){var p=f.children(".ug-thumb-wrapper"),a=m.grid_padding,q=m.grid_padding,g=q,b=a,c=0,r=0,k=0,h=0,s=0;n.innerWidth=0,n.numPanes=1,n.arrPanes=[],n.numThumbsInPane=0,n.arrPanes.push(a-m.grid_padding);var t=p.length;for(i=0;i<t;i++){var o=jQuery(p[i]),l=o.outerWidth(),u=o.outerHeight();b-a+l>n.gridWidth&&(g=0,++s>=m.grid_num_rows?(s=0,a=b,g=q,k=0,1==n.numPanes&&(n.gridWidth=c+m.grid_padding,e.width(n.gridWidth),n.gridHeight=h+m.grid_padding,e.height(n.gridHeight)),n.numPanes++,n.arrPanes.push(a-m.grid_padding)):(b=a,g=k+n.spaceBetweenRows)),j.placeElement(o,b,g);var i=b+l;i>c&&(c=i);var d=g+u;d>k&&(k=d),d>h&&(h=d),d>r&&(r=d);var i=c+l;i>n.innerWidth&&(n.innerWidth=i),b+=l+n.spaceBetweenCols,1==n.numPanes&&n.numThumbsInPane++}n.innerWidth=c+m.grid_padding,n.innerHeight=h+m.grid_padding,f.width(n.innerWidth),f.height(n.innerHeight),1==n.numPanes&&(n.gridWidth=c+m.grid_padding,n.gridHeight=h+m.grid_padding,e.width(n.gridWidth),e.height(n.gridHeight))}(),!0==n.isFirstTimeRun&&n.isTilesMode){var d=k.getThumbs();d.each(function(b,a){c.trigger(n.eventSizeChange,jQuery(a))}),d.fadeTo(0,1)}null!=b&&r(b.index),h.trigger(g.events.PANE_CHANGE,n.currentPane),n.isFirstTimeRun=!1}()},this.setHtml=function(d){var b,a;b=d,a=c,b&&(a=b),a.append("<div class='ug-thumbs-grid'><div class='ug-thumbs-grid-inner'></div></div>"),f=(e=a.children(".ug-thumbs-grid")).children(".ug-thumbs-grid-inner"),!0==n.isTilesMode?l.setHtml(f):k.setHtmlThumbs(f)}}function UGTiles(){var a,b,c,d,e,f,g=this,h=jQuery(this),i=new UniteGalleryMain,j=new UGFunctions,k=new UGTileDesign,l=new UGThumbsGeneral,m={},n={tiles_type:"columns",tiles_col_width:250,tiles_align:"center",tiles_exact_width:!1,tiles_space_between_cols:3,tiles_space_between_cols_mobile:3,tiles_include_padding:!0,tiles_min_columns:2,tiles_max_columns:0,tiles_keep_order:!1,tiles_set_initial_height:!0,tiles_justified_row_height:150,tiles_justified_space_between:3,tiles_nested_optimal_tile_width:250,tiles_nested_col_width:null,tiles_nested_debug:!1,tiles_enable_transition:!0};this.events={THUMB_SIZE_CHANGE:"thumb_size_change",TILES_FIRST_PLACED:"tiles_first_placed",ALL_TILES_LOADED:"all_tiles_loaded"};var o={isFirstTimeRun:!0,handle:null,isTransActive:!1,isTransInited:!1,isFirstPlaced:!0,isAllLoaded:!1},p={colWidth:null,nestedOptimalCols:5,gridY:0,maxColumns:0,columnsValueToEnableHeightResize:3,resizeLeftRightToColumn:!0,currentItem:0,currentGap:null,optimalTileWidth:null,maxGridY:0};function q(){if(e.addClass("ug-tiles-rest-mode"),o.isTransInited=!0,!0==n.tiles_enable_transition){e.addClass("ug-tiles-transit");var a=k.getOptions();!0==a.tile_enable_image_effect&& !1==a.tile_image_effect_reverse&&e.addClass("ug-tiles-transit-overlays"),o.isTransActive=!0}}function r(){return j.getElementSize(e).width}function s(){return!1!=o.isTransInited&&(e.addClass("ug-tiles-transition-active"),e.removeClass("ug-tiles-rest-mode"),!1!=o.isTransActive&&void k.disableEvents())}function t(){if(!1==o.isTransInited)return!1;e.removeClass("ug-tiles-transition-active"),e.addClass("ug-tiles-rest-mode")}function u(){!0==o.isTransActive?(setTimeout(function(){k.enableEvents(),k.triggerSizeChangeEventAllTiles(),t()},800),o.handle&&clearTimeout(o.handle),o.handle=setTimeout(function(){t(),k.triggerSizeChangeEventAllTiles(),o.handle=null},2e3)):(k.triggerSizeChangeEventAllTiles(),t())}function v(){m.colWidth=(m.availWidth-m.colGap*(m.numCols-1))/m.numCols,m.colWidth=Math.floor(m.colWidth),m.totalWidth=j.getSpaceByNumItems(m.numCols,m.colWidth,m.colGap)}function w(){if(m.colWidth=n.tiles_col_width,m.minCols=n.tiles_min_columns,m.maxCols=n.tiles_max_columns,!1==i.isMobileMode()?m.colGap=n.tiles_space_between_cols:m.colGap=n.tiles_space_between_cols_mobile,m.galleryWidth=r(),m.availWidth=m.galleryWidth,!0==n.tiles_include_padding&&(m.availWidth=m.galleryWidth-2*m.colGap),!0==n.tiles_exact_width)m.numCols=j.getNumItemsInSpace(m.availWidth,m.colWidth,m.colGap),m.maxCols>0&&m.numCols>m.maxCols&&(m.numCols=m.maxCols),m.numCols<m.minCols?(m.numCols=m.minCols,v()):m.totalWidth=m.numCols*(m.colWidth+m.colGap)-m.colGap;else{var a=j.getNumItemsInSpaceRound(m.availWidth,m.colWidth,m.colGap);a<m.minCols?a=m.minCols:0!=m.maxCols&&a>m.maxCols&&(a=m.maxCols),m.numCols=a,v()}switch(n.tiles_align){case"center":default:m.addX=Math.round((m.galleryWidth-m.totalWidth)/2);break;case"left":m.addX=0;break;case"right":m.addX=m.galleryWidth-m.totalWidth}for(col=0,m.arrPosx=[];col<m.numCols;col++){var b=j.getColX(col,m.colWidth,m.colGap);m.arrPosx[col]=b+m.addX}}function x(){m.maxColHeight=0,m.colHeights=[0]}function y(b,g,h,a){if(null==a)var a=function(){var a=0,b=999999999;for(col=0;col<m.numCols;col++){if(void 0==m.colHeights[col]||0==m.colHeights[col])return col;m.colHeights[col]<b&&(a=col,b=m.colHeights[col])}return a}();var c=0;void 0!==m.colHeights[a]&&(c=m.colHeights[a]);var d=k.getTileHeightByWidth(m.colWidth,b);if(null===d){if(!0==n.tiles_enable_transition)throw new Error("Can't know tile height, please turn off transition");d=j.getElementSize(b).height}var i=m.arrPosx[a];j.placeElement(b,i,c);var f=c+d;m.colHeights[a]=f+m.colGap,m.maxColHeight<f&&(m.maxColHeight=f),!0==g&&b.show().fadeTo(0,1),!0==h&&e.height(m.maxColHeight)}function z(b){b||(b=!1),w(),x();var c=l.getThumbs(l.type.GET_THUMBS_RATIO);s(),k.resizeAllTiles(m.colWidth,k.resizemode.VISIBLE_ELEMENTS,c);for(var a=0;a<c.length;a++){var f=jQuery(c[a]),d=void 0;!0==n.tiles_keep_order&&(d=j.getColByIndex(m.numCols,a)),y(f,b,!1,d)}u();var g=e.height();!0==o.isTransActive&&g>m.maxColHeight?setTimeout(function(){e.height(m.maxColHeight)},700):e.height(m.maxColHeight)}function A(a,e){if(!0!==e&& !1==function(c){var a=c.index();if(!0===i.getItem(a).ordered_placed)return!1;var b=j.getPrevRowSameColIndex(a,m.numCols);return b<0|| !0===i.getItem(b).ordered_placed}(a))return!1;var b=a.index(),f=j.getColByIndex(m.numCols,b),g=i.getItem(b);k.resizeTile(a,m.colWidth),y(a,!0,!0,f),g.ordered_placed=!0;var h=i.getNumItems(),c=j.getNextRowSameColIndex(b,m.numCols);if(c>=h)return!1;var d=l.getThumbByIndex(c),n=i.getItem(c);l.isThumbLoaded(d),l.isThumbLoaded(d)&&!n.ordered_placed&&A(d,!0)}function B(){var a=l.getThumbs(l.type.GET_THUMBS_NO_RATIO);if(!a||0==a.length)return!1;if(o.isAllLoaded=!1,!0==o.isFirstPlaced){w(),x();var b=Math.abs(m.galleryWidth-m.totalWidth);if(!0==n.tiles_set_initial_height&& !1==j.isScrollbarExists()&&b<25){a.length;var c=Math.ceil(a.length/m.numCols)*n.tiles_col_width*.75;e.height(c),w()}}a.fadeTo(0,0);var d=a.find("img.ug-thumb-image"),f=m.numCols,p=m.galleryWidth;j.checkImagesLoaded(d,function(){w(),(f!=m.numCols||p!=m.galleryWidth)&&z(!1),q(),h.trigger(g.events.ALL_TILES_LOADED)},function(a,b){!0==o.isFirstPlaced&&i.triggerEvent(g.events.TILES_FIRST_PLACED),function(a,c){if(!0==c)return!1;a=jQuery(a);var b=jQuery(a).parent();l.triggerImageLoadedEvent(b,a),!0==n.tiles_keep_order?A(b):(k.resizeTile(b,m.colWidth),y(b,!0,!0))}(a,b)})}function C(){var f=r(),b=l.getThumbs(!0),p=n.tiles_justified_row_height,q=[],d=0,g=n.tiles_justified_space_between,e=b.length;jQuery.each(b,function(e,a){a=jQuery(a);var b=l.getItemByThumb(a),c=b.thumbWidth;b.thumbHeight!==p&&(c=Math.floor(b.thumbRatioByWidth*p)),q[e]=c,d+=c});var c=Math.ceil(d/f);c>e&&(c=e);var s=d/c,a=[],h=0,i=[],j=[],t=0,u=0;jQuery.each(b,function(c,d){var b=q[c];t+b/2>(u+1)*s&&(i[a.length]=h,a.push(j),j=[],h=0,u++),t+=b,h+=b,j.push(d)}),i[a.length]=h,a.push(j);var k=[],m=[],o=0;return jQuery.each(a,function(a,b){b.length;var h=i[a],d=(b.length-1)*g,c=Math.round(p*((f-d)/h));o+=c,a>0&&(o+=g),m.push(c);var l=c/p,e=[],j=d;jQuery.each(b,function(b,c){var a=Math.round(q[jQuery(c).index()]*l);e[b]=a,j+=a});var n=j-f;jQuery.each(e,function(a,b){if(0==n)return!1;n<0?(e[a]=b+1,n++):(e[a]=b-1,n--),a==e.length-1&&0!=n&&(e[a]-=n)}),k[a]=e}),{arrRows:a,arrRowWidths:k,arrRowHeights:m,gap:g,totalHeight:o}}function D(b){if(!b)var b=!1;var c=r(),a=C();e.height(a.totalHeight),r()!=c&&(a=C()),s();var d=0,f=0;jQuery.each(a.arrRows,function(c,e){var h=a.arrRowWidths[c],g=a.arrRowHeights[c],i=0;jQuery.each(e,function(m,c){var e=jQuery(c),l=h[m];k.resizeTile(e,l,g,k.resizemode.VISIBLE_ELEMENTS),j.placeElement(e,i,d),(i+=l)>f&&(f=i),i+=a.gap,!0==b&&jQuery(c).show()}),d+=g+a.gap}),u()}function E(){var c=r();switch(p.galleryWidth=c,a={},p.colWidth=n.tiles_nested_col_width,p.optimalTileWidth=n.tiles_nested_optimal_tile_width,p.currentGap=n.tiles_space_between_cols,!0==i.isMobileMode()&&(p.currentGap=n.tiles_space_between_cols_mobile),null==p.colWidth?p.colWidth=Math.floor(p.optimalTileWidth/p.nestedOptimalCols):p.optimalTileWidth>p.colWidth?p.nestedOptimalCols=Math.ceil(p.optimalTileWidth/p.colWidth):p.nestedOptimalCols=1,p.maxColumns=j.getNumItemsInSpace(c,p.colWidth,p.currentGap),p.colWidth=j.getItemSizeInSpace(c,p.maxColumns,p.currentGap),p.gridY=0,b=[],l.getThumbs(!0).each(function(){var a=jQuery(this),c=G(a);b.push(c)}),p.optimalTileWidth>p.colWidth?p.nestedOptimalCols=Math.ceil(p.optimalTileWidth/p.colWidth):p.nestedOptimalCols=1,p.totalWidth=p.maxColumns*(p.colWidth+p.currentGap)-p.currentGap,n.tiles_align){case"center":default:p.addX=Math.round((p.galleryWidth-p.totalWidth)/2);break;case"left":p.addX=0;break;case"right":p.addX=p.galleryWidth-p.totalWidth}p.maxGridY=0}function F(a){var b=r();E(),I();var c=p.maxGridY*(p.colWidth+p.currentGap)-p.currentGap;e.height(c),r()!=b&&(E(),I()),!1==n.tiles_nested_debug&&aa(a)}function G(f){var b,c,a={},g=p.colWidth,h=p.currentGap,i=k.getTileImageSize(f),j=Math.ceil(H(f.index())*(1*p.nestedOptimalCols/3)+2*p.nestedOptimalCols/3),d=i.width,e=i.height,l=d/e;return d>e?0==(c=Math.round((b=j)/l))&&(c=1):0==(b=Math.round((c=j)*l))&&(b=1),a.dimWidth=b,a.dimHeight=c,a.width=b*g+h*(b-1),a.height=c*g+h*(c-1),a.imgWidth=d,a.imgHeight=e,a.left=0,a.top=0,a}function H(a){return Math.abs(Math.sin(Math.abs(1e3*Math.sin(a))))}function I(a){if(!0==n.tiles_nested_debug)return void 0===a&&(a=!0),!function(d,c){if(!1==c){for(var a=p.currentItem;a<b.length;a++)J(a,!0);p.currentItem=b.length-1}else J(p.currentItem,!0);for(var a=0;a<=p.currentItem;a++)ab(a,!0);p.currentItem++}(!0,a),!1;for(var c=0;c<b.length;c++)J(c,!0)}function J(e,c){if(!c)var c=!1;p.maxColHeight=0;for(var f=j.getObjectLength(a),d=p.gridY;d<=f+1;d++){for(var b=0;b<p.maxColumns;b++)if(!1==W(p.gridY)|| !1==Z(p.gridY,b)){var g=V(b);K(e,g,b);return}p.gridY++}}function K(c,d,e){var a=jQuery.extend(!0,{},b[c]),h=a.dimWidth,k=d-a.dimWidth,f=p.nestedOptimalCols;if(d<=a.dimWidth||k<=.33*f||d<=f)R(c,d);else if(k<=f)f>=4?!0==U(Math.floor(d/2),e)?R(c,Math.floor(d/2)+1):R(c,Math.floor(d/2)):R(objImage,d);else if(!0==U(h,e))switch(h>=f){case!0:R(c,h-1);break;case!1:R(c,h+1)}a=jQuery.extend(!0,{},b[c]);var l=P(c,a.dimWidth,e);if(p.columnsValueToEnableHeightResize<=l[0]&&p.maxColumns>=2*p.nestedOptimalCols){var g=Q(e,a),m=S(c,g.newHeight,!0);b[c].dimHeight=m.dimHeight;var i=O(l,m.dimWidth,e),o=L(i),n=!1;o>=2&&(n=!0),g.newHeight>=a.dimHeight&&(a=S(c,g.newHeight,!0));var j=M(g.idToResize,g.newHeight,a.dimHeight);a.top=p.gridY,a.left=e,j.push({tileID:c,sizes:a});var q=T(j),r=T(i);if(q<r|| !0==n){N(j);return}N(i);return}a.left=e,a.top=p.gridY,b[c]=a,X(c,a,e,p.gridY),p.maxGridY=a.top+a.dimHeight}function L(f){for(var g=0,h=0,c=0;c<f.length-1;c++){var b=f[c].sizes,d=-1,e=-1;W(b.top+b.dimHeight)&&p.maxColumns>b.left+b.dimWidth&&(d=a[b.top+b.dimHeight-1][b.left+b.dimWidth],e=a[b.top+b.dimHeight][b.left+b.dimWidth]),d!=e&&g++}for(var c=0;c<f.length-1;c++){var b=f[c].sizes,d=-1,e=-1;W(b.top+b.dimHeight)&&b.left-1>=0&&(d=a[b.top+b.dimHeight-1][b.left-1],e=a[b.top+b.dimHeight][b.left-1]),d!=e&&h++}return Math.max(h,g)}function M(c,e,f){var a=b[c],g=a.dimHeight;a.dimWidth;var h=a.left,i=a.top;parseInt(i/(p.colWidth+p.currentGap)),parseInt(h/(p.colWidth+p.currentGap));var j=S(c,g-e+f,!0),d=[];return d.push({tileID:c,sizes:j}),d}function N(d){for(var a=0;a<d.length;a++){var c=d[a].sizes,e=d[a].tileID;b[e]=jQuery.extend(!0,{},c),X(e,c,c.left,c.top)}}function O(g,o){for(var j=0,h=0,e=[],k=0,i=0,a=0;a<g[1].length;a++){var d=g[1][a],f=b[g[1][a]];if(h+=f.dimHeight,0==a){var c=R(d,o,!0);j+=c.dimHeight,e.push([g[1][a],c.dimHeight]);continue}j+=f.dimHeight,e.push([d,f.dimHeight])}k=f.left,i=f.top;for(var n=h,l=[],a=e.length-1;a>=0;a--){var m,d=e[a][0];0!=a?(n-=m=Math.max(Math.round(1*h/3),Math.floor(e[a][1]*(h/j))),c=S(d,m,!0),c.left=k,c.top=i,l.push({tileID:d,sizes:c}),i+=c.dimHeight):((c=S(d,m=n,!0)).left=k,c.top=i,l.push({tileID:d,sizes:c}))}return l}function P(j,d,c){var b=p.gridY-1,e=0,f=0,i=1,g=[],h=[];if(g.push(j),b>=0){for(f=0;b>=0&&(e=a[b][c],(void 0===a[b][c-1]||a[b][c-1]!=a[b][c])&&(void 0===a[b][c+d]||a[b][c+d-1]!=a[b][c+d])&&a[b][c]==a[b][c+d-1]);)f!=e&&(i++,g.push(e)),b--,f=e;return h.push(i),h.push(g),h}return[0,[]]}function Q(c,k){var d=0,e=0,h=k.dimWidth,i=k.dimHeight,l=0,m=0,f=jQuery.map(a,function(a,b){return[a]});if(void 0===f[p.gridY]|| void 0===f[p.gridY][c-1])e=0;else for(var b=0;;)if(void 0!==a[p.gridY+b]&& -1!=a[p.gridY+b][c-1])l=a[p.gridY+b][c-2],b++,e++;else break;if(void 0===f[p.gridY]|| void 0===f[p.gridY][c+h])d=0;else for(b=0;;)if(void 0!==a[p.gridY+b]&& -1!=a[p.gridY+b][c+h])m=a[p.gridY+b][c+h+1],b++,d++;else break;var g=0,j=0;return Math.abs(i-e)<Math.abs(i-d)&&0!=e?(g=e,j=l):0!=d?(g=d,j=m):g=i,{newHeight:g,idToResize:j}}function R(g,h,f){f||(f=!1);var d=p.colWidth,e=p.currentGap,a=b[g],i=a.imgWidth,j=a.imgHeight;if(dimHeight=Math.round((dimWidth=h)/(i/j)),!0==f){var c=jQuery.extend(!0,{},a);return c.dimWidth=dimWidth,c.dimHeight=dimHeight,c.width=dimWidth*d+e*(dimWidth-1),c.height=dimHeight*d+e*(dimHeight-1),c}a.dimWidth=dimWidth,a.dimHeight=dimHeight,a.width=dimWidth*d+e*(dimWidth-1),a.height=dimHeight*d+e*(dimHeight-1)}function S(i,a,h){h||(h=!1);var c=b[i],d=c.dimWidth,e=p.colWidth,f=p.currentGap;if(!0==h){var g=jQuery.extend(!0,{},c);return g.dimHeight=a,g.width=d*e+f*(d-1),g.height=a*e+f*(a-1),g}c.dimHeight=a,c.width=d*e+f*(d-1),c.height=a*e+f*(a-1)}function T(d){for(var e=0,f=0,c=0;c<d.length;c++){var a=b[d[c].tileID];if(0==a.dimHeight||0==a.height)return;(resizeVal=a.dimWidth/a.dimHeight/(a.imgWidth/a.imgHeight))<1&&(resizeVal=1/resizeVal),e+=resizeVal,f++}return e/f}function U(c,d){var b=p.gridY-1;return!(b<=0)&& !1!=W(b)&&a[b][d+c-1]!=a[b][d+c]}function V(c){var b=c,a=0;if(!0==W(p.gridY))for(;!1==Z(p.gridY,b);)a++,b++;else a=p.maxColumns;return a}function W(b){return void 0!==a[b]}function X(e,d,f,b){for(var a=0;a<d.dimHeight;a++)for(var c=0;c<d.dimWidth;c++)0==W(b+a)&&Y(b+a),_(b+a,f+c,e)}function Y(c){a[c]=new Object;for(var b=0;b<p.maxColumns;b++)a[c][b]=-1}function Z(b,c){return -1!=a[b][c]}function _(b,c,d){a[b][c]=d}function aa(a){if(!a)var a=!1;s();for(var c=0;c<b.length;c++)ab(c,a);e.height(p.maxColHeight),u()}function ab(e,f){var c=l.getThumbByIndex(e),a=b[e],d=a.top*(p.colWidth+p.currentGap),g=p.addX+a.left*(p.colWidth+p.currentGap);k.resizeTile(c,a.width,a.height,k.resizemode.VISIBLE_ELEMENTS),j.placeElement(c,g,d),d+a.height>p.maxColHeight&&(p.maxColHeight=d+a.height),!0==f&&c.fadeTo(0,1)}function ac(){if(!0==o.isFirstTimeRun)return!0;if(!1==o.isAllLoaded)return!1;switch(n.tiles_type){case"columns":z(!1);break;case"justified":D(!1);break;case"nested":!0==i.isMobileMode()?z(!1):F(!1)}}this.destroy=function(){c.off(i.events.SIZE_CHANGE),k.destroy(),c.off(g.events.TILES_FIRST_PLACED)},this.init=function(e,g){var a,b;a=e,b=g,g_objects=a.getObjects(),i=a,c=jQuery(a),d=g_objects.g_objWrapper,f=g_objects.g_arrItems,n=jQuery.extend(n,b),n.tiles_min_columns<1&&(n.tiles_min_columns=1),0!=n.tiles_max_columns&&n.tiles_max_columns<n.tiles_min_columns&&(n.tiles_max_columns=n.tiles_min_columns),k.init(a,n),l=k.getObjThumbs()},this.setHtml=function(a){!function(a){if(!a){if(e)a=e;else var a=d}e=a;var b=n.tiles_type;a.addClass("ug-tiletype-"+b),k.setHtml(a),a.children(".ug-thumb-wrapper").hide()}(a)},this.getObjTileDesign=function(){return k},this.run=function(){!function(){var a,b,e,f;switch(d.children(".ug-tile").show(),!0==o.isFirstTimeRun&&(h.on(g.events.ALL_TILES_LOADED,function(){o.isAllLoaded=!0}),c.on(i.events.SIZE_CHANGE,ac),c.on(g.events.TILES_FIRST_PLACED,function(){o.isFirstPlaced=!1}),k.initEvents()),k.run(),n.tiles_type){default:case"columns":B();break;case"justified":a=jQuery(d).find("img.ug-thumb-image"),b=l.getThumbs(),o.isAllLoaded=!1,b.fadeTo(0,0),j.checkImagesLoaded(a,function(){setTimeout(function(){D(!0),b.fadeTo(0,1),i.triggerEvent(g.events.TILES_FIRST_PLACED),q(),h.trigger(g.events.ALL_TILES_LOADED)})},function(a,c){a=jQuery(a);var b=jQuery(a).parent();l.triggerImageLoadedEvent(b,a)});break;case"nested":e=jQuery(d).find("img.ug-thumb-image"),f=l.getThumbs(),o.isAllLoaded=!1,f.fadeTo(0,0),j.checkImagesLoaded(e,function(){!0==i.isMobileMode()?z(!0):F(!0),i.triggerEvent(g.events.TILES_FIRST_PLACED),q(),h.trigger(g.events.ALL_TILES_LOADED)},function(a,c){a=jQuery(a);var b=jQuery(a).parent();l.triggerImageLoadedEvent(b,a)})}o.isFirstTimeRun=!1}()},this.runNewItems=function(){if(!e)throw new Error("Can't run new items - parent not set");if(k.setHtml(e,!0),k.run(!0),"columns"===n.tiles_type)B();else throw new Error("Tiles type: "+n.tiles_type+" not support load more yet")}}function UGTileDesign(){var b,c,d,e,a=this,f=jQuery(this),g=new UniteGalleryMain,h=new UGFunctions,i=new UGThumbsGeneral;this.resizemode={FULL:"full",WRAPPER_ONLY:"wrapper_only",VISIBLE_ELEMENTS:"visible_elements"},this.sizeby={GLOBAL_RATIO:"global_ratio",TILE_RATIO:"tile_ratio",IMAGE_RATIO:"image_ratio",CUSTOM:"custom"},this.events={TILE_CLICK:"tile_click"};var j={tile_width:250,tile_height:200,tile_size_by:a.sizeby.IMAGE_RATIO,tile_visible_before_image:!1,tile_enable_background:!0,tile_background_color:"#F0F0F0",tile_enable_border:!1,tile_border_width:3,tile_border_color:"#F0F0F0",tile_border_radius:0,tile_enable_outline:!1,tile_outline_color:"#8B8B8B",tile_enable_shadow:!1,tile_shadow_h:1,tile_shadow_v:1,tile_shadow_blur:3,tile_shadow_spread:2,tile_shadow_color:"#8B8B8B",tile_enable_action:!0,tile_as_link:!1,tile_link_newpage:!0,tile_enable_overlay:!0,tile_overlay_opacity:.4,tile_overlay_color:"#000000",tile_enable_icons:!0,tile_show_link_icon:!1,tile_videoplay_icon_always_on:"never",tile_space_between_icons:26,tile_enable_image_effect:!1,tile_image_effect_type:"bw",tile_image_effect_reverse:!1,tile_enable_textpanel:!1,tile_textpanel_source:"title",tile_textpanel_always_on:!1,tile_textpanel_appear_type:"slide",tile_textpanel_position:"inside_bottom",tile_textpanel_offset:0},k={thumb_color_overlay_effect:!0,thumb_overlay_reverse:!0,thumb_image_overlay_effect:!1,tile_textpanel_enable_description:!1,tile_textpanel_bg_opacity:.6,tile_textpanel_padding_top:8,tile_textpanel_padding_bottom:8},l={ratioByHeight:0,ratioByWidth:0,eventSizeChange:"thumb_size_change",funcCustomTileHtml:null,funcCustomPositionElements:null,funcParentApproveClick:null,isSaparateIcons:!1,tileInnerReduce:0,isTextpanelOutside:!1,hasImageContainer:!1,isVideoplayIconAlwaysOn:!1,isTextPanelHidden:!1};function m(){var a=g.isMobileMode();switch(l.isTextPanelHidden=!1,!0==a&& !1==j.tile_textpanel_always_on&&(l.isTextPanelHidden=!0),l.isVideoplayIconAlwaysOn=j.tile_videoplay_icon_always_on,j.tile_videoplay_icon_always_on){case"always":l.isVideoplayIconAlwaysOn=!0;break;case"never":l.isVideoplayIconAlwaysOn=!1;break;case"mobile_only":l.isVideoplayIconAlwaysOn=!0==a;break;case"desktop_only":l.isVideoplayIconAlwaysOn=!1==a}}function n(b,c){if(b.addClass("ug-tile"),l.funcCustomTileHtml)return l.funcCustomTileHtml(b,c),!1;var k="";!0==l.hasImageContainer&&(k+="<div class='ug-image-container ug-trans-enabled'>");var y="ug-thumb-image";(!1==j.tile_enable_image_effect|| !0==j.tile_image_effect_reverse)&&(y+=" ug-trans-enabled");var r=h.stripTags(c.title);r=h.htmlentitles(r),k+='<img src="'+h.escapeDoubleSlash(c.urlThumb)+"\" alt='"+r+"' class='"+y+"'>",!0==l.hasImageContainer&&(k+="</div>"),b.append(k),j.tile_size_by==a.sizeby.GLOBAL_RATIO&&b.fadeTo(0,0);var d={};if(!0==j.tile_enable_background&&(d["background-color"]=j.tile_background_color),!0==j.tile_enable_border&&(d["border-width"]=j.tile_border_width+"px",d["border-style"]="solid",d["border-color"]=j.tile_border_color,j.tile_border_radius&&(d["border-radius"]=j.tile_border_radius+"px")),!0==j.tile_enable_outline&&(d.outline="1px solid "+j.tile_outline_color),!0==j.tile_enable_shadow){var e=j.tile_shadow_h+"px ";e+=j.tile_shadow_v+"px ",e+=j.tile_shadow_blur+"px ",e+=j.tile_shadow_spread+"px ",e+=j.tile_shadow_color,d["box-shadow"]=e}b.css(d);var m="";if(j.tile_enable_icons){if(!1==j.tile_as_link&& !0==j.tile_enable_action){var s="ug-button-play ug-icon-zoom";"image"!=c.type&&(s="ug-button-play ug-icon-play"),m+="<div class='ug-tile-icon "+s+"' style='display:none'></div>"}if(c.link&& !0==j.tile_show_link_icon|| !0==j.tile_as_link){if(!1==j.tile_as_link){var z="";!0==j.tile_link_newpage&&(z=" target='_blank' rel='noopener noreferrer' "),m+="<a href='"+c.link+"'"+z+" class='ug-tile-icon ug-icon-link'></a>"}else m+="<div class='ug-tile-icon ug-icon-link' style='display:none'></div>"}var t=l.isSaparateIcons;if(!1==t&&"image"!=c.type&& !0==l.isVideoplayIconAlwaysOn&&(t=!0),t)var n=b;else var n=b.children(".ug-thumb-overlay");n.append(m);var u=n.children("."+s);0==u.length?u=null:u.hide();var o=n.children(".ug-icon-link");0==o.length?o=null:o.hide(),o|| !0!=j.tile_enable_action||b.addClass("ug-tile-clickable")}else!0==j.tile_enable_action&&b.addClass("ug-tile-clickable");if(!0==j.tile_enable_image_effect){var v="";!1==j.tile_image_effect_reverse&&(v=" ug-trans-enabled");var w="<div class='ug-tile-image-overlay"+v+"' >",B=" ug-"+j.tile_image_effect_type+"-effect";w+='<img src="'+h.escapeDoubleSlash(c.urlThumb)+"\" alt='"+c.title+"' class='"+B+v+"'>",w+="</div>",b.append(w),!0==j.tile_image_effect_reverse&&b.children(".ug-tile-image-overlay").fadeTo(0,0)}if(!0==j.tile_enable_textpanel){var f=new UGTextPanel;f.init(g,j,"tile");var A="";(!0==j.tile_textpanel_always_on|| !0==l.isTextpanelOutside)&&(A="ug-trans-enabled"),f.appendHTML(b,A);var i=c.title,x="";switch(j.tile_textpanel_source){case"desc":case"description":i=c.description;break;case"desc_title":""!=c.description&&(i=c.description);break;case"title_and_desc":i=c.title,x=c.description}if(f.setTextPlain(i,x),!1==j.tile_textpanel_always_on&&f.getElement().fadeTo(0,0),b.data("objTextPanel",f),!0==j.tile_textpanel_always_on&&q(b).css("z-index",2),!0==l.isTextpanelOutside){var C="<div class='ug-tile-cloneswrapper'></div>";b.append(C);var D=b.children(".ug-tile-cloneswrapper"),p=new UGTextPanel;p.init(g,j,"tile"),p.appendHTML(D),p.setTextPlain(i,x),b.data("objTextPanelClone",p)}}null!==c.addHtml&&b.append(c.addHtml)}function o(a){return a.children(".ug-tile-image-overlay")}function p(a){return a.data("objTextPanel")}function q(a){return a.children(".ug-textpanel")}function r(b){if(!0==l.isTextpanelOutside)var a=function(b){var a=b.find(".ug-tile-cloneswrapper .ug-textpanel");if(0==a.length)throw new Error("text panel cloned element not found");return a}(b);else var a=q(b);return a?h.getElementSize(a).height:0}function s(b){var a=b.find(".ug-icon-link");return 0==a.length?null:a}function t(b){var a=b.find(".ug-button-play");return 0==a.length?null:a}function u(a){return!!a.hasClass("ug-thumb-over")}function v(a){return a.hasClass("ug-tile-clickable")}function w(a){return!0==j.tile_enable_icons&& !0==l.isVideoplayIconAlwaysOn&&"image"!=a.type}function x(f,d,c,q){var s,i=o(f),e=a.getTileImage(f),k=f.find(".ug-tile-image-overlay img");d-=l.tileInnerReduce,c-=l.tileInnerReduce;var b=null;if(!0==l.isTextpanelOutside){var m=r(f);if(c-=m,"top"==j.tile_textpanel_position&&(b=m),!0==l.hasImageContainer){var n,p=(n=f,!1==l.hasImageContainer?null:n.children(".ug-image-container"));h.setElementSize(p,d,c),null!==b&&h.placeElement(p,0,b)}}if(!1==j.tile_enable_image_effect)h.scaleImageCoverParent(e,d,c),!1==l.hasImageContainer&&null!==b&&h.placeElement(e,0,b);else{var g="nothing";!0===q&& !1==l.isTextpanelOutside&&(g=!0==j.tile_image_effect_reverse?"effect":"image"),"effect"!=g&&(h.setElementSize(i,d,c),null!==b&&h.placeElement(i,0,b),h.scaleImageCoverParent(k,d,c)),"image"!=g&&(!0==l.hasImageContainer?h.scaleImageCoverParent(e,d,c):"effect"==g?(h.scaleImageCoverParent(e,d,c),null!==b&&h.placeElement(e,0,b)):h.cloneElementSizeAndPos(k,e,!1,null,b))}}function y(b,h,g,c){var e=null;if(g&&(e=g-l.tileInnerReduce),c&&(c-=l.tileInnerReduce),"clone"==h)return b.data("objTextPanelClone").refresh(!0,!0,e),a.getItemByTile(b).textPanelCloneSizeSet=!0,!1;var d=p(b);if(!d)return!1;var k,f=null;if(!0==l.isTextpanelOutside&&(f=r(b)),d.refresh(!1,!0,e,f),!0==j.tile_textpanel_always_on||"fade"==j.tile_textpanel_appear_type){if(!0==l.isTextpanelOutside&&c&&"bottom"==j.tile_textpanel_position){var i=c-f;d.positionPanel(i)}else d.positionPanel()}}function z(b){a.getItemByTile(b);var d=t(b),e=s(b),c=h.getElementSize(b);x(b,c.width,c.height),!0==j.tile_enable_textpanel&&y(b,"regular",c.width,c.height);var w=c.width-l.tileInnerReduce,o=c.height-l.tileInnerReduce,p=0;if(!0==l.isTextpanelOutside){var u=r(b);o-=u,"top"==j.tile_textpanel_position&&(p=u)}var B,z=b.children(".ug-thumb-overlay");if(h.setElementSizeAndPosition(z,0,p,w,o),d||e){var f=0;if(!0==j.tile_enable_textpanel&& !1==l.isTextPanelHidden&& !1==l.isTextpanelOutside){var A=q(b),v=h.getElementSize(A);v.height>0&&(f=Math.floor(-(v.height/2*1)))}}if(d&&e){var i=h.getElementSize(d),m=h.getElementSize(e),g=j.tile_space_between_icons,n=i.width+g+m.width,k=Math.floor((c.width-n)/2);k<g&&(g=Math.floor((c.width-i.width-m.width)/3),n=i.width+g+m.width,k=Math.floor((c.width-n)/2)),h.placeElement(d,k,"middle",0,f),h.placeElement(e,k+i.width+g,"middle",0,f)}else d&&h.placeElement(d,"center","middle",0,f),e&&h.placeElement(e,"center","middle",0,f);d&&d.show(),e&&e.show()}function A(d,e){a.getItemByTile(d);var b=o(d),c=j.thumb_transition_duration;if(!1==j.tile_image_effect_reverse){var f=a.getTileImage(d);e?(f.fadeTo(0,1),b.stop(!0).fadeTo(c,0)):b.stop(!0).fadeTo(c,1)}else e?b.stop(!0).fadeTo(c,1):b.stop(!0).fadeTo(c,0)}function B(i,f){var b=j.thumb_transition_duration,a=q(i);if(!a)return!0;if("slide"==j.tile_textpanel_appear_type){var g=h.getElementSize(a);if(0==g.width)return!1;var k=-g.height,l=0,c={},d={},e="bottom";"inside_top"==j.tile_textpanel_position&&(e="top"),c[e]=k+"px",d[e]=l+"px",!0==f?(a.fadeTo(0,1),!1==a.is(":animated")&&a.css(c),d.opacity=1,a.stop(!0).animate(d,b)):a.stop(!0).animate(c,b)}else!0==f?a.stop(!0).fadeTo(b,1):a.stop(!0).fadeTo(b,0)}function C(b,g,c){var a=j.thumb_transition_duration;c&& !0===c&&(a=0);var d=t(b),e=s(b),f=g?1:0;d&&d.stop(!0).fadeTo(a,f),e&&e.stop(!0).fadeTo(a,f)}function D(e,b){if(b=jQuery(b),j.tile_enable_image_effect&&A(b,!0),!0==j.tile_enable_textpanel&& !1==j.tile_textpanel_always_on&& !1==l.isTextPanelHidden&&B(b,!0),l.isSaparateIcons&& !0==j.tile_enable_icons){var c=!0==j.thumb_overlay_reverse,d=a.getItemByTile(b);!1==w(d)&&C(b,c,!1)}}function E(e,b){if(b=jQuery(b),j.tile_enable_image_effect&&A(b,!1),!0==j.tile_enable_textpanel&& !1==j.tile_textpanel_always_on&&B(b,!1),!0==l.isSaparateIcons&& !0==j.tile_enable_icons){var c=!0!=j.thumb_overlay_reverse,d=a.getItemByTile(b);!1==w(d)?C(b,c,!1):C(b,!0,!0)}}function F(c,a,b){if(a=jQuery(a),!0==j.tile_visible_before_image&& !0!==a.data("image_placed")&& !0!==b)return!0;z(a),i.setThumbNormalStyle(a)}function G(c,a,b){z(a),b.fadeTo(0,1),a.data("image_placed",!0)}function H(b){if(!0==v(b))return f.trigger(a.events.TILE_CLICK,b),!0;!1==u(b)&&(!function(a){i.getThumbs().not(a).each(function(b,a){i.setThumbNormalStyle(jQuery(a))})}(b),i.setThumbOverStyle(b))}function I(d){var b=jQuery(this),e=b.prop("tagName").toLowerCase(),c=!0;if(l.funcParentApproveClick&& !1==l.funcParentApproveClick()&&(c=!1),"a"==e)!1==c&&d.preventDefault();else if(!1==u(b))!0==c&&H(b);else{if(!1==v(b))return!0;!0==c&&f.trigger(a.events.TILE_CLICK,b)}}function J(d){d.stopPropagation();var b=jQuery(this).parents(".ug-tile"),c=!0;return(l.funcParentApproveClick&& !1==l.funcParentApproveClick()&&(c=!1),!1==u(b))?(H(b),!0):!0==c?(f.trigger(a.events.TILE_CLICK,b),!1):void 0}function K(a){var b=jQuery(this).parents(".ug-tile");l.funcParentApproveClick&& !1==l.funcParentApproveClick()&&a.preventDefault(),!1==u(b)&& !1==j.tile_as_link&&(a.preventDefault(),H(b))}this.loadTileImage=function(b){var c=a.getTileImage(b);h.checkImagesLoaded(c,null,function(a,c){G(null,b,jQuery(a))})},this.setHtml=function(a,b){c=a,!0!==b&&m(),i.setHtmlThumbs(a,b)},this.initEvents=function(){i.initEvents(),jQuery(i).on(i.events.SETOVERSTYLE,D),jQuery(i).on(i.events.SETNORMALSTYLE,E),jQuery(i).on(i.events.PLACEIMAGE,G),d.on(l.eventSizeChange,F),c.on("click",".ug-tile",I),c.on("click",".ug-tile .ug-button-play",J),c.on("click",".ug-tile .ug-icon-link",K)},this.destroy=function(){if(c.off("click",".ug-tile"),c.off("click",".ug-tile .ug-button-play"),c.off("click",".ug-tile .ug-icon-link"),jQuery(i).off(i.events.SETOVERSTYLE),jQuery(i).off(i.events.SETNORMALSTYLE),jQuery(i).off(i.events.PLACEIMAGE),d.off(l.eventSizeChange),!0==j.tile_enable_textpanel){var a=i.getThumbs();jQuery.each(a,function(c,b){var a=p(jQuery(b));a&&a.destroy()})}i.destroy()},this.init=function(q,r,s){var c,m,o,f,p;c=q,m=r,g=c,b=jQuery(c),o=g.getObjects(),d=o.g_objWrapper,e=g.getArrItems(),j=jQuery.extend(j,k),j=jQuery.extend(j,m),function(){if(!0==j.tile_enable_overlay?(j.thumb_overlay_opacity=j.tile_overlay_opacity,j.thumb_overlay_color=j.tile_overlay_color):!1==j.tile_enable_icons?j.thumb_color_overlay_effect=!1:j.thumb_overlay_opacity=0,j.tile_as_link&&(j.thumb_wrapper_as_link=!0,j.thumb_link_newpage=j.tile_link_newpage),!0==j.tile_enable_outline&& !1==j.tile_enable_border&&(j.tile_enable_outline=!1),l.tileInnerReduce=0,j.tile_enable_border&&(l.tileInnerReduce=2*j.tile_border_width,i.setThumbInnerReduce(l.tileInnerReduce)),l.isSaparateIcons=!h.isRgbaSupported(),!0==j.tile_enable_textpanel){switch(j.tile_textpanel_position){case"top":j.tile_textpanel_align="top";case"bottom":l.isTextpanelOutside=!0,j.tile_textpanel_always_on=!0,j.tile_textpanel_offset=0;break;case"inside_top":j.tile_textpanel_align="top";break;case"middle":j.tile_textpanel_align="middle",j.tile_textpanel_appear_type="fade"}!1==j.tile_textpanel_always_on&&(l.isSaparateIcons=!0)}0!=j.tile_textpanel_offset&&(j.tile_textpanel_appear_type="fade",j.tile_textpanel_margin=j.tile_textpanel_offset),"title_and_desc"==j.tile_textpanel_source&&(j.tile_textpanel_enable_description=!0,j.tile_textpanel_desc_style_as_title=!0)}(),i.init(c,j),f=["overlay"],l.funcCustomTileHtml&&(f=[]),i.setCustomThumbs(n,f,{allow_onresize:!1}),p=i.getOptions(),j=jQuery.extend(j,p),l.ratioByWidth=j.tile_width/j.tile_height,l.ratioByHeight=j.tile_height/j.tile_width,j.tile_size_by==a.sizeby.GLOBAL_RATIO&&l.isTextpanelOutside&&(l.hasImageContainer=!0)},this.setFixedMode=function(){j.tile_size_by=a.sizeby.GLOBAL_RATIO,j.tile_visible_before_image=!0},this.setApproveClickFunction=function(a){l.funcParentApproveClick=a},this.resizeTile=function(c,b,d,e){if(!0==l.isTextpanelOutside&&y(c,"clone",b),b){if(!d)var d=a.getTileHeightByWidth(b,c)}else var b=j.tile_width,d=j.tile_height;switch(h.setElementSize(c,b,d),e){default:case a.resizemode.FULL:a.triggerSizeChangeEvent(c,!0);break;case a.resizemode.WRAPPER_ONLY:return!0;case a.resizemode.VISIBLE_ELEMENTS:if(l.funcCustomTileHtml)return a.triggerSizeChangeEvent(c,!0),!0;x(c,b,d,!0),!0==j.tile_enable_textpanel&& !0==j.tile_textpanel_always_on&&b&&y(c,"regular",b,d)}},this.resizeAllTiles=function(c,e,b){m();var d=null;if(j.tile_size_by==a.sizeby.GLOBAL_RATIO&&(d=a.getTileHeightByWidth(c)),!b)var b=i.getThumbs();b.each(function(f,b){a.resizeTile(jQuery(b),c,d,e)})},this.triggerSizeChangeEvent=function(b,a){if(!b)return!1;if(!a)var a=!1;d.trigger(l.eventSizeChange,[b,a])},this.triggerSizeChangeEventAllTiles=function(b){i.getThumbs().each(function(){var c=jQuery(this);a.triggerSizeChangeEvent(c,b)})},this.disableEvents=function(){i.getThumbs().css("pointer-events","none")},this.enableEvents=function(){i.getThumbs().css("pointer-events","auto")},this.setOptions=function(a){j=jQuery.extend(j,a),i.setOptions(a)},this.setTileSizeOptions=function(b){if(j.tile_size_by!==a.sizeby.GLOBAL_RATIO)throw new Error("setNewTileOptions works with global ration only");j.tile_width=b,j.tile_height=Math.floor(b*l.ratioByHeight)},this.setCustomFunctions=function(a,b){l.funcCustomTileHtml=a,l.funcCustomPositionElements=b},this.run=function(d){var c=i.type.GET_THUMBS_ALL;!0===d&&(c=i.type.GET_THUMBS_NEW);var b=i.getThumbs(c);j.tile_size_by==a.sizeby.GLOBAL_RATIO&&a.resizeAllTiles(j.tile_width,a.resizemode.WRAPPER_ONLY,b),!0==j.tile_enable_image_effect&& !1==j.tile_image_effect_reverse&&b.children(".ug-thumb-image").fadeTo(0,0),i.setHtmlProperties(b),!0==j.tile_visible_before_image&&(b.children(".ug-thumb-image").fadeTo(0,0),i.loadThumbsImages())},this._____________EXTERNAL_GETTERS____________=function(){},this.getObjThumbs=function(){return i},this.getOptions=function(){return j},this.getTileImage=function(a){return a.find("img.ug-thumb-image")},this.getItemByTile=function(a){return i.getItemByThumb(a)},this.getTileHeightByWidth=function(e,b){var c=function e(d){var c=l.ratioByHeight;switch(j.tile_size_by){default:c=l.ratioByHeight;break;case a.sizeby.IMAGE_RATIO:if(!d)throw new Error("tile should be given for tile ratio");var b=a.getItemByTile(d);if(void 0!==b.thumbRatioByHeight){if(0==b.thumbRatioByHeight)throw trace(b),new Error("the item ratio not inited yet");c=b.thumbRatioByHeight}break;case a.sizeby.CUSTOM:return null}return c}(b);if(null===c)return null;var d=Math.floor((e-l.tileInnerReduce)*c)+l.tileInnerReduce;return b&& !0==l.isTextpanelOutside&&j.tile_size_by==a.sizeby.IMAGE_RATIO&&(d+=r(b)),d},this.getTileImageSize=function(c){var b=a.getItemByTile(c);if(!b.thumbWidth||!b.thumbHeight)throw new Error("Can't get image size - image not inited.");return{width:b.thumbWidth,height:b.thumbHeight}},this.getGlobalTileSize=function(){if(j.tile_size_by!=a.sizeby.GLOBAL_RATIO)throw new Error("The size has to be global ratio");return{width:j.tile_width,height:j.tile_height}}}function UGAviaControl(){var a,b,c,d,e,f,g,h={touchEnabled:!1,isMouseInsideStrip:!1,strip_finalPos:0,handle_timeout:"",isStripMoving:!1,isControlEnabled:!0};function i(){if(!1==h.is_strip_moving)return!1;var b,c=a.getInnerStripPos();Math.floor(c)==Math.floor(h.strip_finalPos)&&j();var d=Math.abs(h.strip_finalPos-c);d<1?b=d:(b=d/4)>0&&b<1&&(b=1),h.strip_finalPos<c&&(b*=-1),a.positionInnerStrip(c+b)}function j(){if(!1==h.isStripMoving)return!1;h.isStripMoving=!1,h.handle_timeout=clearInterval(h.handle_timeout)}function k(c){var a,b=(a=c,!1==g?function(j){var c=f.strip_padding_left,k=f.strip_padding_right,g=d.width()-c-k,i=e.width();if(g>i)return null;var a=j-d.offset().left-c,b=f.thumb_width,h=g-f.thumb_width,l=h-b;a<b&&(a=b),a>h&&(a=h);var m=(a-b)/l,n=(i-g)*m;return -1*Math.round(n)+c}(a):function(j){var h=f.strip_padding_top;f.strip_padding_bottom;var c=d.height(),i=e.height();if(c>i)return null;var a=j-d.offset().top-h;if(a<0)return null;var b=f.thumb_height,g=c-f.thumb_height,k=g-b;a<b&&(a=b),a>g&&(a=g);var l=(a-b)/k,m=(i-c)*l;return -1*Math.round(m)+h}(a));if(null===b)return!1;h.is_strip_moving=!0,h.strip_finalPos=b,function(){if(!0==h.isStripMoving)return!1;h.isStripMoving=!0,h.handle_timeout=setInterval(i,10)}()}this.enable=function(){h.isControlEnabled=!0},this.disable=function(){h.isControlEnabled=!1},this.init=function(i){var l;a=i,c=i.getObjects(),b=c.g_gallery,d=c.g_objStrip,e=c.g_objStripInner,f=c.g_options,g=c.isVertical,jQuery("body").on("touchstart",function(a){if(!1==h.isControlEnabled)return!0;h.touchEnabled=!0}),jQuery("body").mousemove(function(c){if(!1==h.isControlEnabled)return!0;if(!0==h.touchEnabled)return jQuery("body").off("mousemove"),!0;h.isMouseInsideStrip=d.ismouseover();var b,e=a.isTouchMotionActive();!0==h.isMouseInsideStrip&& !1==e?k((b=c,!1==g?b.pageX:b.pageY)):j()})},this.destroy=function(){jQuery("body").off("touchstart"),jQuery("body").off("mousemove")}}function UGSlider(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,a=this,p=jQuery(a),q=new UniteGalleryMain,r=null,s=null,t=null,u=new UGVideoPlayer,v=new UGFunctions,w=null,x=null;this.events={ITEM_CHANGED:"item_changed",BEFORE_SWITCH_SLIDES:"before_switch",BEFORE_RETURN:"before_return",AFTER_RETURN:"after_return",ZOOM_START:"slider_zoom_start",ZOOM_END:"slider_zoom_end",ZOOMING:"slider_zooming",ZOOM_CHANGE:"slider_zoom_change",START_DRAG:"start_drag",AFTER_DRAG_CHANGE:"after_drag_change",ACTION_START:"action_start",ACTION_END:"action_end",CLICK:"slider_click",TRANSITION_START:"slider_transition_start",TRANSITION_END:"slider_transition_end",AFTER_PUT_IMAGE:"after_put_image",IMAGE_MOUSEENTER:"slider_image_mouseenter",IMAGE_MOUSELEAVE:"slider_image_mouseleave",CURRENTSLIDE_LOAD_START:"slider_current_loadstart",CURRENTSLIDE_LOAD_END:"slider_current_loadend"};var y={slider_scale_mode:"fill",slider_scale_mode_media:"fill",slider_scale_mode_fullscreen:"down",slider_item_padding_top:0,slider_item_padding_bottom:0,slider_item_padding_left:0,slider_item_padding_right:0,slider_background_color:"",slider_background_opacity:1,slider_image_padding_top:0,slider_image_padding_bottom:0,slider_image_padding_left:0,slider_image_padding_right:0,slider_image_border:!1,slider_image_border_width:10,slider_image_border_color:"#ffffff",slider_image_border_radius:0,slider_image_border_maxratio:.35,slider_image_shadow:!1,slider_video_constantsize:!1,slider_video_constantsize_scalemode:"fit",slider_video_constantsize_width:854,slider_video_constantsize_height:480,slider_video_padding_top:0,slider_video_padding_bottom:0,slider_video_padding_left:0,slider_video_padding_right:0,slider_video_enable_closebutton:!0,slider_transition:"slide",slider_transition_speed:300,slider_transition_easing:"easeInOutQuad",slider_control_swipe:!0,slider_control_zoom:!0,slider_zoom_mousewheel:!0,slider_vertical_scroll_ondrag:!1,slider_loader_type:1,slider_loader_color:"white",slider_enable_links:!0,slider_links_newpage:!1,slider_enable_bullets:!1,slider_bullets_skin:"",slider_bullets_space_between:-1,slider_bullets_align_hor:"center",slider_bullets_align_vert:"bottom",slider_bullets_offset_hor:0,slider_bullets_offset_vert:10,slider_enable_arrows:!0,slider_arrows_skin:"",slider_arrow_left_align_hor:"left",slider_arrow_left_align_vert:"middle",slider_arrow_left_offset_hor:20,slider_arrow_left_offset_vert:0,slider_arrow_right_align_hor:"right",slider_arrow_right_align_vert:"middle",slider_arrow_right_offset_hor:20,slider_arrow_right_offset_vert:0,slider_enable_progress_indicator:!0,slider_progress_indicator_type:"pie",slider_progress_indicator_align_hor:"right",slider_progress_indicator_align_vert:"top",slider_progress_indicator_offset_hor:10,slider_progress_indicator_offset_vert:10,slider_enable_play_button:!0,slider_play_button_skin:"",slider_play_button_align_hor:"left",slider_play_button_align_vert:"top",slider_play_button_offset_hor:40,slider_play_button_offset_vert:8,slider_play_button_mobilehide:!1,slider_enable_fullscreen_button:!0,slider_fullscreen_button_skin:"",slider_fullscreen_button_align_hor:"left",slider_fullscreen_button_align_vert:"top",slider_fullscreen_button_offset_hor:11,slider_fullscreen_button_offset_vert:9,slider_fullscreen_button_mobilehide:!1,slider_enable_zoom_panel:!0,slider_zoompanel_skin:"",slider_zoompanel_align_hor:"left",slider_zoompanel_align_vert:"top",slider_zoompanel_offset_hor:12,slider_zoompanel_offset_vert:92,slider_zoompanel_mobilehide:!1,slider_controls_always_on:!1,slider_controls_appear_ontap:!0,slider_controls_appear_duration:300,slider_enable_text_panel:!0,slider_textpanel_always_on:!0,slider_videoplay_button_type:"square"},z={slider_progress_indicator_align_hor:"left",slider_progress_indicator_align_vert:"bottom",slider_progress_indicator_offset_hor:0,slider_progress_indicator_offset_vert:0},A={isRunOnce:!1,isTextPanelSaparateHover:!1,numPrev:1,numCurrent:2,numNext:3,isControlsVisible:!0,currentControlsMode:"image"};function B(c,d){var b="ug-type-square";"round"==y.slider_videoplay_button_type&&(b="ug-type-round");var a="";return a+="<div class='ug-slide-wrapper ug-slide"+d+"'>",a+="<div class='ug-item-wrapper'></div>",a+="<div class='ug-slider-preloader "+c+"'></div>",a+="<div class='ug-button-videoplay "+b+"' style='display:none'></div>",a+="</div>"}function C(a){var b=ak(a);v.placeElementInParentCenter(b);var c=al(a);v.placeElementInParentCenter(c)}function D(){var e,c,g,h,b=a.getSlidesReference(),d=0;g=a.isSlideHasItem(b.objNextSlide),h=a.isSlideHasItem(b.objPrevSlide),h?(d=b.objPrevSlide.outerWidth(),b.objPrevSlide.css("z-index",1)):b.objPrevSlide.hide(),c=d+b.objCurrentSlide.outerWidth(),e=c,g?(e=c+b.objNextSlide.outerWidth(),b.objPrevSlide.css("z-index",2)):b.objNextSlide.hide(),b.objCurrentSlide.css("z-index",3),v.placeElement(b.objCurrentSlide,d,0),f.css({left:-d+"px",width:e+"px"}),h&&(v.placeElement(b.objPrevSlide,0,0),v.showElement(b.objPrevSlide)),g&&(v.showElement(b.objNextSlide),v.placeElement(b.objNextSlide,c,0))}function E(b){var a=b.data("index");if(void 0===a||null==a)return!1;var c=q.getItem(a);if(!c)return!1;J(b,c)}function F(a){a.stop(!0).hide(100)}function G(b,c,d){var a={};if(!0==y.slider_image_border){a["border-style"]="solid";var e=function(g,b){var a=y.slider_image_border_width;if(a<=10)return a;var e=v.getElementSize(g),c=e.width,d=e.height;if(b&&(b.hasOwnProperty("imageWidth")&&(c=b.imageWidth),b.hasOwnProperty("imageHeight")&&(d=b.imageHeight)),c<=0)return a;var f=c<d?c:d;if(2*a/f<y.slider_image_border_maxratio)return a;var a=f*y.slider_image_border_maxratio/2;return Math.round(a)}(b,d);a["border-width"]=e+"px",a["border-color"]=y.slider_image_border_color,a["border-radius"]=y.slider_image_border_radius}"image"!=c&& !0==y.slider_video_constantsize&&(a["background-color"]="#000000"),!0==y.slider_image_shadow&&(a["box-shadow"]="3px 3px 10px 0px #353535"),b.css(a)}function H(b,a){var c=y.slider_video_constantsize_width,d=y.slider_video_constantsize_height,e=y.slider_video_constantsize_scalemode,f=v.scaleImageExactSizeInParent(b,a.imageWidth,a.imageHeight,c,d,e);return f}function I(d,b,k){var g=d.children(".ug-item-wrapper"),j=ak(d);if(void 0===b.urlImage||""==b.urlImage)throw new Error("The slide don't have big image defined ( data-image='imageurl' ). Please check gallery items.","showbig");var h=b.urlImage,l=d.data("urlImage");d.data("urlImage",h);var i=a.getScaleMode(d),f=a.getSlideType(d);if(objPadding=a.getObjImagePadding(),l==h&& !0!==k){var c=g.children("img");(0==b.imageWidth||0==b.imageHeight)&&q.checkFillImageSize(c,b);var e={};e="image"!=f&& !0==y.slider_video_constantsize?H(c,b):v.scaleImageFitParent(c,b.imageWidth,b.imageHeight,i,objPadding),G(c,f,e),p.trigger(a.events.AFTER_PUT_IMAGE,d)}else if(c=v.placeImageInsideParent(h,g,b.imageWidth,b.imageHeight,i,objPadding),!0==b.isBigImageLoaded){if(c.fadeTo(0,1),F(j),"image"!=f&& !0==y.slider_video_constantsize)var e=H(c,b);else var e=v.getImageInsideParentData(g,b.imageWidth,b.imageHeight,i,objPadding);c.css("width",e.imageWidth+"px"),G(c,f,e),p.trigger(a.events.AFTER_PUT_IMAGE,d)}else c.fadeTo(0,0),function(a){a.stop(!0).show(100)}(j),d.data("isLoading",!0),a.isSlideCurrent(d)&&p.trigger(a.events.CURRENTSLIDE_LOAD_START),c.data("itemIndex",b.index),c.on("load",function(){var b=jQuery(this),g=b.data("itemIndex");b.fadeTo(0,1);var c=b.parent().parent(),e=a.getSlideType(c),h=ak(c),i=a.getObjImagePadding(),j=a.getScaleMode(c);F(h),c.data("isLoading",!1),a.isSlideCurrent(c)&&p.trigger(a.events.CURRENTSLIDE_LOAD_END),q.onItemBigImageLoaded(null,b);var d=q.getItem(g),f={};"image"!=e&& !0==y.slider_video_constantsize?H(b,d):f=v.scaleImageFitParent(b,d.imageWidth,d.imageHeight,j,i),b.fadeTo(0,1),G(b,e,f),p.trigger(a.events.AFTER_PUT_IMAGE,c)})}function J(a,b){try{var d=a.children(".ug-item-wrapper");if(null==b)return d.html(""),a.removeData("index"),a.removeData("type"),a.removeData("urlImage"),!1;a.data("index"),a.data("index",b.index),a.data("type",b.type),!0==y.slider_enable_links&&"image"==b.type&&(b.link?a.addClass("ug-slide-clickable"):a.removeClass("ug-slide-clickable")),I(a,b);var e=al(a);"image"===b.type?e.hide():e.show()}catch(c){throw void 0!==c.fileName&&"showbig"==c.fileName&&q.showErrorMessageReplaceGallery(c.message),d.html(""),new Error(c)}}function K(){if(!x|| !0==M())return!1;var a=x.getElement(),b=0;(!0==A.isTextPanelSaparateHover|| !0==y.slider_textpanel_always_on)&&(b=y.slider_controls_appear_duration),a.stop().fadeTo(b,0),a.data("isHidden",!0)}function L(){if(!x|| !1==M())return!1;var a=x.getElement(),b=0;(!0==A.isTextPanelSaparateHover|| !0==y.slider_textpanel_always_on)&&(a.show(),x.positionElements(),b=y.slider_controls_appear_duration),a.stop().show().fadeTo(b,1),a.data("isHidden",!1)}function M(){return!1!==x.getElement().data("isHidden")}function N(){var d=a.getCurrentSlide(),g=a.getSlideImage(d),e=v.getElementSize(d),b=e.left,c=e.top;if(!0==y.slider_video_constantsize){var f=v.getElementSize(g);b+=f.left,c+=f.top}else b+=y.slider_video_padding_left,c+=y.slider_video_padding_top;u.setPosition(b,c)}function O(){var a=y.slider_video_constantsize_width,b=y.slider_video_constantsize_height;u.setSize(a,b);var c=u.getObject();G(c,"video")}function P(d,c){if(!0==a.isAnimating())return A.itemWaiting=c,!0;null!=A.itemWaiting&&(A.itemWaiting=null);var b=a.getSlidesReference();switch(d){case"right":J(b.objPrevSlide,c),D();var e=-v.getElementSize(b.objPrevSlide).left;a.switchSlideNums("right");break;case"left":J(b.objNextSlide,c),D();var e=-v.getElementSize(b.objNextSlide).left;a.switchSlideNums("left");break;default:throw new Error("wrong direction: "+d)}var g=y.slider_transition_speed,h=y.slider_transition_easing,i={duration:g,easing:h,queue:!1,always:function(){if(a.stopSlideAction(),u.hide(),null!=A.itemWaiting){var b=aj(A.itemWaiting);P(b,A.itemWaiting)}else a.placeNabourItems(),p.trigger(a.events.TRANSITION_END)}};f.animate({left:e+"px"},i)}function Q(a,b,c){c?a.fadeTo(y.slider_transition_speed,b,c):a.fadeTo(y.slider_transition_speed,b)}function R(e,c,f){if(!c)var c=!1;var b=a.getSlidesReference();J(b.objNextSlide,e);var d=v.getElementSize(b.objCurrentSlide);v.placeElement(b.objNextSlide,d.left,d.top);var g=A.numCurrent;(A.numCurrent=A.numNext,A.numNext=g,p.trigger(a.events.ITEM_CHANGED),b.objNextSlide.stop(!0),b.objCurrentSlide.stop(!0),!0==c)?(b.objCurrentSlide.fadeTo(0,0),b.objNextSlide.fadeTo(0,1),a.placeNabourItems(),p.trigger(a.events.TRANSITION_END),!0!==f&&u.hide()):(b.objNextSlide.fadeTo(0,0),Q(b.objCurrentSlide,0,function(){a.placeNabourItems(),p.trigger(a.events.TRANSITION_END),!0!==f&&u.hide()}),!0==u.isVisible()&&Q(u.getObject(),0),Q(b.objNextSlide,1))}function S(){return e.children(".ug-slider-control")}function T(a){if(!1==v.isTimePassed("sliderControlsToggle")|| !1==A.isControlsVisible)return!1;if(!a)var a=!1;var b=S();!0===a?b.stop().fadeTo(0,0).hide():b.stop().fadeTo(y.slider_controls_appear_duration,0,function(){b.hide()}),A.isControlsVisible=!1}function U(a){if(!1==v.isTimePassed("sliderControlsToggle"))return!1;if(!0==A.isControlsVisible)return!0;if(!a)var a=!1;var b=S();!0===a?b.stop().show():(b.stop().show().fadeTo(0,0),b.fadeTo(y.slider_controls_appear_duration,1)),A.isControlsVisible=!0}function V(a){if(a==A.currentControlsMode)return!1;switch(a){case"image":n&&n.getElement().show();break;case"video":n&&n.getElement().hide();break;default:throw new Error("wrong controld mode: "+a)}A.currentControlsMode=a}function W(e,f,c){var b=q.getSelectedItem();a.setItem(b,!1,c);var d=b.index;t&&t.setActive(d),x&& !1==A.isTextPanelSaparateHover&&L(),"image"==b.type?V("image"):V("video")}function X(b,a){q.selectItem(a)}function Y(b){if(l&& !1==l.isTapEventOccured(b))return!0;p.trigger(a.events.CLICK,b)}function Z(){var c=a.getCurrentSlide().hasClass("ug-slide-clickable"),b=a.getCurrentItem();if(c)return!1==y.slider_links_newpage?location.href=b.link:window.open(b.link,"_blank"),!0;!1==y.slider_controls_always_on&& !0==y.slider_controls_appear_ontap&& !0==a.isCurrentSlideType("image")&&(!1==A.isControlsVisible?U():T(),x&& !0==y.slider_textpanel_always_on&&a.isCurrentSlideType("image")&&a.isCurrentSlideImageFit()&&L())}function _(b){x&&a.isCurrentSlideType("image")&& !1==a.isCurrentSlideImageFit()&&K()}function aa(){U()}function ab(){T()}function ac(b){var c=b.parent();a.startSlideAction(c)}function ad(){q.isPlayMode()&&q.pausePlaying(),p.trigger(a.events.ACTION_START)}function ae(){q.isPlayMode()&&q.continuePlaying(),p.trigger(a.events.ACTION_END)}function af(b,a,c){g.data("index")==a&&I(g,objItem=q.getItem(a),!0),h.data("index")==a&&I(h,objItem=q.getItem(a),!0),i.data("index")==a&&I(i,objItem=q.getItem(a),!0)}function ag(f,b){b=jQuery(b);var c=a.getSlideImage(b),e=al(b),d=v.getElementSize(c);v.placeElement(e,"center","middle",d.left,d.top,c)}function ah(b){var a=al(b);v.addClassOnHover(a),v.setButtonOnClick(a,ac)}function ai(a){switch(a){case 1:return g;case 2:return h;case 3:return i;default:throw new Error("wrong num: "+a)}}function aj(c){var d=a.getSlidesReference().objCurrentSlide.data("index"),e=c.index,b="left";return d>e&&(b="right"),b}function ak(b){if(!b)var b=a.getCurrentSlide();return b.children(".ug-slider-preloader")}function al(a){return a.children(".ug-button-videoplay")}function am(b){if(!b)var b=a.getCurrentSlide();var c=b.data("index");return void 0==c?null:q.getItem(c)}this.switchSlideNums=function(c){switch(p.trigger(a.events.BEFORE_SWITCH_SLIDES),c){case"left":var b=A.numCurrent;A.numCurrent=A.numNext,A.numNext=A.numPrev,A.numPrev=b;break;case"right":var b=A.numCurrent;A.numCurrent=A.numPrev,A.numPrev=A.numNext,A.numNext=b;break;default:throw new Error("wrong direction: "+c)}p.trigger(a.events.ITEM_CHANGED)},this.destroy=function(){p.off(a.events.AFTER_PUT_IMAGE),b.off(q.events.ITEM_IMAGE_UPDATED),b.off(q.events.ITEM_CHANGE),t&&jQuery(t).on(t.events.BULLET_CLICK),e.off("mouseenter"),e.off("mouseleave"),e.off("touchend"),e.off("click"),p.off(a.events.CLICK),m&&p.off(a.events.ZOOM_CHANGE),p.off(a.events.BEFORE_SWITCH_SLIDES),jQuery(u).off(u.events.SHOW),jQuery(u).off(u.events.HIDE),u.destroy(),e.off("mouseenter",".ug-item-wrapper img"),e.off("mouseleave",".ug-item-wrapper img")},this.________EXTERNAL_GENERAL___________=function(){},this.init=function(e,f,g){!function(h,e,i){q=h,i&&(o=i,e=v.convertCustomPrefixOptions(e,o,"slider")),b=jQuery(h);var g,f,j=q.getObjects();if(c=j.g_objWrapper,d=j.g_objThumbs,e.hasOwnProperty("slider_progress_indicator_type")&&(y.slider_progress_indicator_type=e.slider_progress_indicator_type),"bar"==y.slider_progress_indicator_type&&(y=jQuery.extend(y,z)),e&&a.setOptions(e),g=q.getOptions(),f=g.gallery_skin,""==y.slider_bullets_skin&&(y.slider_bullets_skin=f),""==y.slider_arrows_skin&&(y.slider_arrows_skin=f),""==y.slider_zoompanel_skin&&(y.slider_zoompanel_skin=f),""==y.slider_play_button_skin&&(y.slider_play_button_skin=f),""==y.slider_fullscreen_button_skin&&(y.slider_fullscreen_button_skin=f),y.video_enable_closebutton=y.slider_video_enable_closebutton,"zoom"!=g.gallery_mousewheel_role&&(y.slider_zoom_mousewheel=!1),!0==y.slider_enable_bullets){t=new UGBullets;var k={bullets_skin:y.slider_bullets_skin,bullets_space_between:y.slider_bullets_space_between};t.init(q,k)}y.slider_enable_text_panel&&(x=new UGTextPanel).init(q,y,"slider"),y.slider_enable_zoom_panel&&(n=new UGZoomButtonsPanel).init(a,y);var l=q.getGalleryID();u.init(y,!1,l)}(e,f,g)},this.getSlideImage=function(b){if(!b)var b=a.getCurrentSlide();return b.find(".ug-item-wrapper img")},this.setHtml=function(l){var d,b,a;(d=l)&&(c=d),b=function(){var a;switch(y.slider_loader_type){default:case 1:a="ug-loader1";break;case 2:a="ug-loader2";break;case 3:a="ug-loader3";break;case 4:a="ug-loader4";break;case 5:a="ug-loader5";break;case 6:a="ug-loader6";break;case 7:a="ug-loader7";break;case 8:a="ug-loader8";break;case 9:a="ug-loader9"}return"black"==y.slider_loader_color&&(a+=" ug-loader-black"),a}(),q.getOptions(),a="<div class='ug-slider-wrapper'>",a+="<div class='ug-slider-inner'>",a+=B(b,1),a+=B(b,2),a+=B(b,3),a+="</div>",!0==y.slider_enable_arrows&&(a+="<div class='ug-slider-control ug-arrow-left ug-skin-"+y.slider_arrows_skin+"'></div>",a+="<div class='ug-slider-control ug-arrow-right ug-skin-"+y.slider_arrows_skin+"'></div>"),!0==y.slider_enable_play_button&&(a+="<div class='ug-slider-control ug-button-play ug-skin-"+y.slider_play_button_skin+"'></div>"),!0==y.slider_enable_fullscreen_button&&(a+="<div class='ug-slider-control ug-button-fullscreen ug-skin-"+y.slider_fullscreen_button_skin+"'></div>"),a+="</div>",c.append(a),g=(f=(e=c.children(".ug-slider-wrapper")).children(".ug-slider-inner")).children(".ug-slide1"),h=f.children(".ug-slide2"),i=f.children(".ug-slide3"),g.data("slidenum",1),h.data("slidenum",2),i.data("slidenum",3),t&&t.appendHTML(e),!0==y.slider_enable_arrows&&(j=e.children(".ug-arrow-left"),k=e.children(".ug-arrow-right")),!0==y.slider_enable_play_button&&(r=e.children(".ug-button-play")),!0==y.slider_enable_fullscreen_button&&(s=e.children(".ug-button-fullscreen")),!0==y.slider_enable_progress_indicator&&("bar"==(w=v.initProgressIndicator(y.slider_progress_indicator_type,y,e)).getType()&&"pie"==y.slider_progress_indicator_type&&(y.slider_progress_indicator_type="bar",y=jQuery.extend(y,z)),q.setProgressIndicator(w)),!0==y.slider_enable_text_panel&&(x.appendHTML(e),!1==y.slider_textpanel_always_on)&&(x.getElement().hide().data("isHidden",!0),A.isTextPanelSaparateHover=!0),!0==y.slider_enable_zoom_panel&&n.appendHTML(e),u.setHtml(f)},this.run=function(){!function(){if(!0==A.isRunOnce)return!1;if(A.isRunOnce=!0,y.slider_background_color){var c=y.slider_background_color;1!=y.slider_background_opacity&&(c=v.convertHexToRGB(c,y.slider_background_opacity)),e.css("background-color",c)}else 1!=y.slider_background_opacity&&(c=v.convertHexToRGB("#000000",y.slider_background_opacity),e.css("background-color",c));!0==y.slider_control_swipe&&(l=new UGTouchSliderControl).init(a,y),!0==y.slider_control_zoom&&(m=new UGZoomSliderControl).init(a,y),x&&x.run(),b.on(q.events.ITEM_IMAGE_UPDATED,af),b.on(q.events.ITEM_CHANGE,W),t&&jQuery(t).on(t.events.BULLET_CLICK,X),!0==y.slider_enable_arrows&&(v.addClassOnHover(k,"ug-arrow-hover"),v.addClassOnHover(j,"ug-arrow-hover"),q.setNextButton(k),q.setPrevButton(j)),!1==y.slider_controls_always_on&&e.hover(aa,ab),e.on("touchend click",Y),p.on(a.events.CLICK,Z),x&& !0==A.isTextPanelSaparateHover&&e.hover(L,K),r&&(v.addClassOnHover(r,"ug-button-hover"),q.setPlayButton(r)),s&&(v.addClassOnHover(s,"ug-button-hover"),q.setFullScreenToggleButton(s)),m&&p.on(a.events.ZOOM_CHANGE,_),n&&n.initEvents(),u.initEvents(),jQuery(u).on(u.events.SHOW,ad),jQuery(u).on(u.events.HIDE,ae),ah(g),ah(h),ah(i),p.on(a.events.AFTER_PUT_IMAGE,ag),e.on("mouseenter",".ug-item-wrapper img",function(b){p.trigger(a.events.IMAGE_MOUSEENTER)}),e.on("mouseleave",".ug-item-wrapper img",function(b){!1==a.isMouseInsideSlideImage(b)&&p.trigger(a.events.IMAGE_MOUSELEAVE)})}()},this.isInnerInPlace=function(){var b=a.getSlidesReference(),c=-v.getElementSize(b.objCurrentSlide).left,d=v.getElementSize(f);return c==d.left},this.isAnimating=function(){return f.is(":animated")},this.isSlideCurrent=function(a){var b=a.data("slidenum");return A.numCurrent==b},this.isSlideHasItem=function(a){var b;return null!=a.data("index")},this.getObjImagePadding=function(){return{padding_top:y.slider_image_padding_top,padding_bottom:y.slider_image_padding_bottom,padding_left:y.slider_image_padding_left,padding_right:y.slider_image_padding_right}},this.getSlidesReference=function(){return{objPrevSlide:ai(A.numPrev),objNextSlide:ai(A.numNext),objCurrentSlide:ai(A.numCurrent)}},this.getCurrentSlide=function(){return a.getSlidesReference().objCurrentSlide},this.getCurrentItemIndex=function(){var b=a.getSlidesReference().objCurrentSlide.data("index");return null==b&&(b=-1),b},this.getCurrentItem=function(){var b=a.getCurrentItemIndex();return -1==b?null:q.getItem(b)},this.getSlideType=function(b){return void 0==b&&(b=a.getCurrentSlide()),b.data("type")},this.isMouseInsideSlideImage=function(d){var c=a.getSlideImage(),b=v.getMousePosition(d);void 0===b.pageX&&(b=l.getLastMousePos());var e=v.getMouseElementPoint(b,c),f=v.getElementSize(c);return v.isPointInsideElement(e,f)},this.isCurrentSlideType=function(b){return a.getSlideType()==b},this.isCurrentSlideLoadingImage=function(){return!0===a.getCurrentSlide().data("isLoading")},this.setItem=function(d,h,f){var g=a.getSlidesReference(),b=g.objCurrentSlide.data("index"),e=d.index;if(e==b)return!0;if(void 0==b)J(g.objCurrentSlide,d),a.placeNabourItems();else{var c="left";q.getNumItems(),"next"==f?c="left":"prev"==f||b>e?c="right":b>e&&(c="right"),function(e,b,c){p.trigger(a.events.TRANSITION_START);var d=y.slider_transition;switch(c&&(d=c),a.stopSlideAction(null,!0),d){default:case"fade":R(b);break;case"slide":P(e,b);break;case"lightbox_open":R(b,!1,!0)}}(c,d,h)}},this.placeNabourItems=function(){var b=a.getSlidesReference(),c=b.objCurrentSlide.data("index"),d=q.getPrevItem(c),e=q.getNextItem(c);J(b.objNextSlide,e),J(b.objPrevSlide,d),D()},this.________EXTERNAL_API___________=function(){},this.stopSlideAction=function(b,c){b||(b=a.getCurrentSlide()),!0===c?u.pause():u.hide()},this.startSlideAction=function(c){c||(c=a.getCurrentSlide());var b=am(c);if("image"==b.type)return!0;switch(!0==y.slider_video_constantsize&&O(),N(),u.show(),b.type){case"youtube":u.playYoutube(b.videoid);break;case"vimeo":u.playVimeo(b.videoid);break;case"html5video":u.playHtml5Video(b.videoogv,b.videowebm,b.videomp4,b.urlImage);break;case"soundcloud":u.playSoundCloud(b.trackid);break;case"wistia":u.playWistia(b.videoid)}},this.getScaleMode=function(b){if(!b)var b=a.getCurrentSlide();return"image"!=a.getSlideType(b)?y.slider_scale_mode_media:y.slider_scale_mode==y.slider_scale_mode_fullscreen?y.slider_scale_mode:!0==q.isFullScreen()?y.slider_scale_mode_fullscreen:y.slider_scale_mode},this.getObjects=function(){return{g_objSlider:e,g_objInner:f,g_options:y,g_objZoomSlider:m}},this.getObjZoom=function(){return m},this.getOptions=function(){return y},this.getElement=function(){return e},this.getVideoObject=function(){return u},this.isCurrentSlideImageFit=function(){var b=a.getCurrentSlide();a.getSlideType(b),function(c,b){if(void 0==b)var b=a.getCurrentSlide();var d=a.getSlideType(b);if(d!=c)throw new Error("Wrong slide type: "+d+", should be: "+c)}("image",b);var c=a.getSlideImage(b);return 0!=c.length&&v.isImageFitParent(c)},this.isCurrentImageInPlace=function(){var b=a.getSlideImage();if(0==b.length)return!1;var e=a.getScaleMode(),f=a.getObjImagePadding(),c=am(),g=b.parent(),h=v.getImageInsideParentData(g,c.imageWidth,c.imageHeight,e,f),i=v.getElementSize(b),d=!1;return h.imageWidth==i.width&&(d=!0),d},this.isSlideActionActive=function(){return u.isVisible()},this.isSwiping=function(){return!!l&&l.isTouchActive()},this.isPreloading=function(){return!!ak().is(":visible")},this.setOptions=function(a){o&&(a=v.convertCustomPrefixOptions(a,o,"slider")),y=jQuery.extend(y,a)},this.setSize=function(c,b){if(c<0||b<0)return!0;var o={};o.width=c+"px",o.height=b+"px",e.css(o);var m={};m.height=b+"px",m.top="0px",m.left="0px",f.css(m);var d={};d.height=b+"px",d.width=c+"px",g.css(d),h.css(d),i.css(d);var p=c-y.slider_item_padding_left-y.slider_item_padding_right,z=b-y.slider_item_padding_top-y.slider_item_padding_bottom,l={};l.width=p+"px",l.height=z+"px",l.top=y.slider_item_padding_top+"px",l.left=y.slider_item_padding_left+"px",e.find(".ug-item-wrapper").css(l),x&&x.setSizeByParent(),function(){if(t&&(objBullets=t.getElement(),v.placeElement(objBullets,y.slider_bullets_align_hor,y.slider_bullets_align_vert,y.slider_bullets_offset_hor,y.slider_bullets_offset_vert),v.placeElement(objBullets,y.slider_bullets_align_hor,y.slider_bullets_align_vert,y.slider_bullets_offset_hor,y.slider_bullets_offset_vert)),!0==y.slider_enable_arrows&&(v.placeElement(j,y.slider_arrow_left_align_hor,y.slider_arrow_left_align_vert,y.slider_arrow_left_offset_hor,y.slider_arrow_left_offset_vert),v.placeElement(k,y.slider_arrow_right_align_hor,y.slider_arrow_left_align_vert,y.slider_arrow_right_offset_hor,y.slider_arrow_right_offset_vert)),!1==y.slider_controls_always_on&&T(!0),w){var a=w.getElement();if("bar"==y.slider_progress_indicator_type){var b=e.width();w.setSize(b),v.placeElement(a,"left",y.slider_progress_indicator_align_vert,0,y.slider_progress_indicator_offset_vert)}else v.placeElement(a,y.slider_progress_indicator_align_hor,y.slider_progress_indicator_align_vert,y.slider_progress_indicator_offset_hor,y.slider_progress_indicator_offset_vert)}x&&x.positionPanel(),function(){if(r&&v.placeElement(r,y.slider_play_button_align_hor,y.slider_play_button_align_vert,y.slider_play_button_offset_hor,y.slider_play_button_offset_vert),s&&v.placeElement(s,y.slider_fullscreen_button_align_hor,y.slider_fullscreen_button_align_vert,y.slider_fullscreen_button_offset_hor,y.slider_fullscreen_button_offset_vert),n){var a=n.getElement();v.placeElement(a,y.slider_zoompanel_align_hor,y.slider_zoompanel_align_vert,y.slider_zoompanel_offset_hor,y.slider_zoompanel_offset_vert)}}(),C(g),C(h),C(i),q.isMobileMode()?(!0==y.slider_fullscreen_button_mobilehide&&s&&s.hide(),!0==y.slider_play_button_mobilehide&&r&&r.hide(),!0==y.slider_zoompanel_mobilehide&&n&&n.getElement().hide()):(!0==y.slider_fullscreen_button_mobilehide&&s&&s.show(),!0==y.slider_play_button_mobilehide&&r&&r.show(),!0==y.slider_zoompanel_mobilehide&&n&&n.getElement().show())}(),E(g),E(h),E(i),D();var A=a.getSlideType();if("image"!=A&& !0==y.slider_video_constantsize)O();else{var B=c-y.slider_video_padding_left-y.slider_video_padding_right,F=b-y.slider_video_padding_top-y.slider_video_padding_bottom;u.setSize(B,F)}N()},this.refreshSlideItems=function(){if(!0==a.isAnimating())return!0;E(g),E(h),E(i),D()},this.isMouseOver=function(){return e.ismouseover()},this.setPosition=function(a,b){v.placeElement(e,a,b)},this.zoomIn=function(){if(!m)return!0;m.zoomIn()},this.zoomOut=function(){if(!m)return!0;m.zoomOut()},this.zoomBack=function(){if(!m)return!0;m.zoomBack()}}function UGTextPanel(){var a,b,c,d,e,f,g,h=this,i=new UGFunctions,j="",k={textpanel_align:"bottom",textpanel_margin:0,textpanel_text_valign:"middle",textpanel_padding_top:10,textpanel_padding_bottom:10,textpanel_height:null,textpanel_padding_title_description:5,textpanel_padding_right:11,textpanel_padding_left:11,textpanel_fade_duration:200,textpanel_enable_title:!0,textpanel_enable_description:!0,textpanel_enable_bg:!0,textpanel_bg_color:"#000000",textpanel_bg_opacity:.4,textpanel_title_color:null,textpanel_title_font_family:null,textpanel_title_text_align:null,textpanel_title_font_size:null,textpanel_title_bold:null,textpanel_css_title:{},textpanel_desc_color:null,textpanel_desc_font_family:null,textpanel_desc_text_align:null,textpanel_desc_font_size:null,textpanel_desc_bold:null,textpanel_css_description:{},textpanel_desc_style_as_title:!1,textpanel_bg_css:{}},l={isFirstTime:!0,setInternalHeight:!0,lastTitleBottom:0,lastDescHeight:0};function m(j,b){if(!b)var b=k.textpanel_padding_top;var a=b;if(c){var m=a;if(i.placeElement(c,0,m),!0==c.is(":visible")){var a=i.getElementSize(c).bottom;a>0&&(l.lastTitleBottom=a)}else{var a=20;l.lastTitleBottom>0&&(a=l.lastTitleBottom)}}var g="";if(d&&(g=jQuery.trim(d.text())),""!=g){var e=a;if(c&&(e+=k.textpanel_padding_title_description),i.placeElement(d,0,e),!0==jQuery(d).is(":visible")){var f=i.getElementSize(d);a=f.bottom,f.height>0&&(l.lastDescHeight=f.height)}else{var h=16;l.lastDescHeight>0&&(h=l.lastDescHeight),a=e+h}}k.textpanel_height|| !0!=l.setInternalHeight||o(a+k.textpanel_padding_bottom,j)}function n(){var a=0;if(c&&(a+=c.outerHeight()),d){var b="";d&&(b=jQuery.trim(d.text())),""!=b&&(c&&(a+=k.textpanel_padding_title_description),a+=d.outerHeight())}return a}function o(b,c){if(!c)var c=!1;if(!0==c){e&&b>e.height()&&e.height(b);var d={height:b+"px"};a.add(f).animate(d,k.textpanel_fade_duration)}else e&&e.height(b),a.add(f).height(b)}function p(){if(!0==k.textpanel_enable_bg){(e=a.children(".ug-textpanel-bg")).fadeTo(0,k.textpanel_bg_opacity);var h={"background-color":k.textpanel_bg_color};h=jQuery.extend(h,k.textpanel_bg_css),e.css(h)}if(!0==k.textpanel_enable_title){c=f.children(".ug-textpanel-title");var b={};null!==k.textpanel_title_color&&(b.color=k.textpanel_title_color),null!==k.textpanel_title_font_family&&(b["font-family"]=k.textpanel_title_font_family),null!==k.textpanel_title_text_align&&(b["text-align"]=k.textpanel_title_text_align),null!==k.textpanel_title_font_size&&(b["font-size"]=k.textpanel_title_font_size+"px"),null!==k.textpanel_title_bold&&(!0===k.textpanel_title_bold?b["font-weight"]="bold":b["font-weight"]="normal"),k.textpanel_css_title&&(b=jQuery.extend(b,k.textpanel_css_title)),c.css(b)}if(!0==k.textpanel_enable_description){d=f.children(".ug-textpanel-description");var g={};null!==k.textpanel_desc_color&&(g.color=k.textpanel_desc_color),null!==k.textpanel_desc_font_family&&(g["font-family"]=k.textpanel_desc_font_family),null!==k.textpanel_desc_text_align&&(g["text-align"]=k.textpanel_desc_text_align),null!==k.textpanel_desc_font_size&&(g["font-size"]=k.textpanel_desc_font_size+"px"),null!==k.textpanel_desc_bold&&(!0===k.textpanel_desc_bold?g["font-weight"]="bold":g["font-weight"]="normal"),k.textpanel_css_title&&(g=jQuery.extend(g,k.textpanel_css_description)),d.css(g)}}function q(){var a=g.getSelectedItem();h.setText(a.title,a.description)}this.positionElements=function(c){var a,b;if(!k.textpanel_height||"top"==k.textpanel_text_valign)return m(c),!1;switch(k.textpanel_text_valign){default:case"top":m(!1);break;case"bottom":a=n(),m(!1,f.height()-a-k.textpanel_padding_bottom);break;case"center":case"middle":b=n(),m(!1,(f.height()-b)/2)}},this.init=function(c,a,b){if(g=c,b&&(j=b,a=i.convertCustomPrefixOptions(a,j,"textpanel")),a&&(k=jQuery.extend(k,a)),!1==k.textpanel_enable_title&& !1==k.textpanel_enable_description)throw new Error("Textpanel Error: The title or description must be enabled");k.textpanel_height&&k.textpanel_height<0&&(k.textpanel_height=null),!0!=k.textpanel_desc_style_as_title||(k.textpanel_desc_color||(k.textpanel_desc_color=k.textpanel_title_color),k.textpanel_desc_bold||(k.textpanel_desc_bold=k.textpanel_title_bold),k.textpanel_desc_font_family||(k.textpanel_desc_font_family=k.textpanel_title_font_family),k.textpanel_desc_font_size||(k.textpanel_desc_font_size=k.textpanel_title_font_size),k.textpanel_desc_text_align||(k.textpanel_desc_text_align=k.textpanel_title_text_align))},this.appendHTML=function(e,c){b=e;var d="<div class='ug-textpanel"+(c=c?" "+c:"")+"'>";!0==k.textpanel_enable_bg&&(d+="<div class='ug-textpanel-bg"+c+"'></div>"),d+="<div class='ug-textpanel-textwrapper"+c+"'>",!0==k.textpanel_enable_title&&(d+="<div class='ug-textpanel-title"+c+"'></div>"),!0==k.textpanel_enable_description&&(d+="<div class='ug-textpanel-description"+c+"'></div>"),d+="</div></div>",e.append(d),f=(a=e.children(".ug-textpanel")).children(".ug-textpanel-textwrapper"),p()},this.destroy=function(){jQuery(g).off(g.events.ITEM_CHANGE)},this.run=function(){h.setSizeByParent(),jQuery(g).on(g.events.ITEM_CHANGE,q)},this.setPanelSize=function(g,b){if(l.setInternalHeight=!0,b)l.setInternalHeight=!1;else var b=80;k.textpanel_height&&(b=k.textpanel_height),a.width(g),a.height(b),e&&(e.width(g),e.height(b));var j=g-k.textpanel_padding_left-k.textpanel_padding_right,m=k.textpanel_padding_left;i.setElementSizeAndPosition(f,m,0,j,b),c&&c.width(j),d&&d.width(j),!1==l.isFirstTime&&h.positionElements(!1)},this.setSizeByParent=function(){var a=i.getElementSize(b);h.setPanelSize(a.width)},this.setTextPlain=function(a,b){c&&c.html(a),d&&d.html(b)},this.setText=function(a,b){!0==l.isFirstTime?(h.setTextPlain(a,b),l.isFirstTime=!1,h.positionElements(!1)):f.stop().fadeTo(k.textpanel_fade_duration,0,function(){h.setTextPlain(a,b),h.positionElements(!0),jQuery(this).fadeTo(k.textpanel_fade_duration,1)})},this.positionPanel=function(c,d){var b={};if(null!=c)b.top=c,b.bottom="auto";else switch(k.textpanel_align){case"top":b.top=k.textpanel_margin+"px";break;case"bottom":b.top="auto",b.bottom=k.textpanel_margin+"px";break;case"middle":b.top=i.getElementRelativePos(a,"middle",k.textpanel_margin)}null!=d&&(b.left=d),a.css(b)},this.setOptions=function(a){j&&(a=i.convertCustomPrefixOptions(a,j,"textpanel")),k=jQuery.extend(k,a)},this.getElement=function(){return a},this.getSize=function(){return i.getElementSize(a)},this.refresh=function(b,c,a,d){p(),a?h.setPanelSize(a,d):h.setSizeByParent(),h.positionElements(!1),!0!==c&&h.positionPanel(),!0===b&&h.show()},this.hide=function(){a.hide()},this.show=function(){a.show()},this.getOptions=function(){return k},this.getOption=function(a){return!1==k.hasOwnProperty(a)?null:k[a]}}function UGZoomButtonsPanel(){var b,c,d,e,f,a=this,g=new UGSlider,h=new UGFunctions,i={slider_zoompanel_skin:""};function j(a){return!!(!a||a.hasClass("ug-zoompanel-button-disabled"))}function k(a){a&&a.addClass("ug-zoompanel-button-disabled")}function l(a){a&&a.removeClass("ug-zoompanel-button-disabled")}function m(){if(!1==g.isCurrentSlideType("image"))return!0;!0==g.isCurrentSlideImageFit()?!1==j(e)&&(k(e),k(f)):!0==j(e)&&(l(e),l(f))}this.init=function(b,a){g=b,a&&(i=jQuery.extend(i,a))},this.appendHTML=function(g){c=g;var a="<div class='ug-slider-control ug-zoompanel ug-skin-"+i.slider_zoompanel_skin+"'>";a+="<div class='ug-zoompanel-button ug-zoompanel-plus'></div>",a+="<div class='ug-zoompanel-button ug-zoompanel-minus ug-zoompanel-button-disabled'></div>",a+="<div class='ug-zoompanel-button ug-zoompanel-return ug-zoompanel-button-disabled'></div>",a+="</div>",g.append(a),d=(b=g.children(".ug-zoompanel")).children(".ug-zoompanel-plus"),e=b.children(".ug-zoompanel-minus"),f=b.children(".ug-zoompanel-return")},this.setObjects=function(a,b,c){d=a,e=b,f=c,e&&e.addClass("ug-zoompanel-button-disabled"),f&&f.addClass("ug-zoompanel-button-disabled")},this.getElement=function(){return b},a.initEvents=function(){h.addClassOnHover(d,"ug-button-hover"),h.addClassOnHover(e,"ug-button-hover"),h.addClassOnHover(f,"ug-button-hover"),h.setButtonOnClick(d,function(){if(!0==j(d))return!0;g.zoomIn()}),h.setButtonOnClick(e,function(){if(!0==j(e))return!0;g.zoomOut()}),h.setButtonOnClick(f,function(){if(!0==j(f))return!0;g.zoomBack()}),jQuery(g).on(g.events.ZOOM_CHANGE,m),jQuery(g).on(g.events.ITEM_CHANGED,m)}}function UGBullets(){var a,b,c,d=this,e=0,f=new UniteGalleryMain,g=-1,h=new UGFunctions,i={isInited:!1},j={bullets_skin:"",bullets_addclass:"",bullets_space_between:-1};function k(){var b="",f="";-1!=j.bullets_space_between&&(f=" style='margin-left:"+j.bullets_space_between+"px'");for(var d=0;d<e;d++)0==d?b+="<div class='ug-bullet'></div>":b+="<div class='ug-bullet'"+f+"></div>";if(a.html(b),!c){var g=a.find(".ug-bullet:first-child");g.length&&(c=g.width())}}function l(a){if(!0==d.isActive(a))return!0;var b=a.index();jQuery(d).trigger(d.events.BULLET_CLICK,b)}function m(){var b=a.children(".ug-bullet");h.setButtonOnClick(b,l),b.on("mousedown mouseup",function(a){return!1})}function n(a){if(a<0||a>=e)throw new Error("wrong bullet index: "+a)}function o(){if(!0==i.isInited)return!0;throw new Error("The bullets are not inited!")}this.events={BULLET_CLICK:"bullet_click"},this.init=function(a,b,c){f=a,e=c||f.getNumItems(),i.isInited=!0,""==(j=jQuery.extend(j,b)).bullets_skin&&(j.bullets_skin=j.gallery_skin)},this.getBulletsWidth=function(){return 0!=e&&c?e*c+(e-1)*j.bullets_space_between:0},this.appendHTML=function(c){b=c,o();var d="";""!=j.bullets_addclass&&(d=" "+j.bullets_addclass);var e="<div class='ug-slider-control ug-bullets ug-skin-"+j.bullets_skin+d+"'>";e+="</div>",a=jQuery(e),c.append(a),k(),m()},this.updateNumBullets=function(a){e=a,k(),m()},this.getElement=function(){return a},this.setActive=function(b){o(),n(b);var c=a.children(".ug-bullet");c.removeClass("ug-bullet-active"),jQuery(c[b]).addClass("ug-bullet-active"),g=b},this.isActive=function(b){if(n(b),"number"!=typeof b)var c=b;else var c=a.children(".ug-bullet")[b];return!!c.hasClass("ug-bullet-active")},this.getNumBullets=function(){return e}}function UGProgressBar(){var a,b,c=this,d=0,e=new UGFunctions,f={slider_progressbar_color:"#ffffff",slider_progressbar_opacity:.6,slider_progressbar_line_width:5};this.put=function(c,d){d&&(f=jQuery.extend(f,d)),c.append("<div class='ug-progress-bar'><div class='ug-progress-bar-inner'></div></div>"),(b=(a=c.children(".ug-progress-bar")).children(".ug-progress-bar-inner")).css("background-color",f.slider_progressbar_color),a.height(f.slider_progressbar_line_width),b.height(f.slider_progressbar_line_width),b.width("0%");var e=f.slider_progressbar_opacity,g=b[0];g.style.opacity=e,g.style.filter="alpha(opacity="+100*e+")"},this.putHidden=function(b,d){c.put(b,d),a.hide()},this.getElement=function(){return a},this.setSize=function(d){a.width(d),b.width(d),c.draw()},this.setPosition=function(b,c,d,f){e.placeElement(a,b,c,d,f)},this.draw=function(){b.width(100*d+"%")},this.setProgress=function(a){d=e.normalizePercent(a),c.draw()},this.getType=function(){return"bar"}}function UGProgressPie(){var a,b,c=this,d=!1,e=new UGFunctions,f={slider_progresspie_type_fill:!1,slider_progresspie_color1:"#B5B5B5",slider_progresspie_color2:"#E5E5E5",slider_progresspie_stroke_width:6,slider_progresspie_width:30,slider_progresspie_height:30};function g(j){if(!j)var j=0;var h=Math.min(f.slider_progresspie_width,f.slider_progresspie_height)/2,a=b[0].getContext("2d");!1==d&&(d=!0,a.rotate(1.5*Math.PI),a.translate(-2*h,0)),a.clearRect(0,0,f.slider_progresspie_width,f.slider_progresspie_height);var c=f.slider_progresspie_width/2,e=f.slider_progresspie_height/2,i=0,g=j*Math.PI*2;if(!0==f.slider_progresspie_type_fill)a.beginPath(),a.moveTo(c,e),a.arc(c,e,h,i,g),a.lineTo(c,e),a.fillStyle=f.slider_progresspie_color1,a.fill(),a.closePath();else{a.globalCompositeOperation="source-over",a.beginPath(),a.moveTo(c,e),a.arc(c,e,h,i,g),a.lineTo(c,e),a.fillStyle=f.slider_progresspie_color1,a.fill(),a.closePath(),a.globalCompositeOperation="destination-out";var k=h-f.slider_progresspie_stroke_width;a.beginPath(),a.moveTo(c,e),a.arc(c,e,k,i,g),a.lineTo(c,e),a.fillStyle=f.slider_progresspie_color1,a.fill(),a.closePath()}!0==f.slider_progresspie_type_fill&&(i=g,g=2*Math.PI,a.beginPath(),a.arc(c,e,h,i,g),a.lineTo(c,e),a.fillStyle=f.slider_progresspie_color2,a.fill(),a.closePath())}this.put=function(a,c){c&&(f=jQuery.extend(f,c)),a.append("<canvas class='ug-canvas-pie' width='"+f.slider_progresspie_width+"' height='"+f.slider_progresspie_height+"'></canvas>"),b=a.children(".ug-canvas-pie")},this.putHidden=function(a,d){c.put(a,d),g(.1),b.hide()},this.getElement=function(){return b},this.setPosition=function(a,c){e.placeElement(b,a,c)},this.getSize=function(){return{width:f.slider_progresspie_width,height:f.slider_progresspie_height}},this.setProgress=function(b){a=b=e.normalizePercent(b),g(b)},this.getType=function(){return"pie"}}function UGTouchSliderControl(){var b,c,d,a,e=new UGSlider,f=new UGFunctions,a={slider_transition_continuedrag_speed:250,slider_transition_continuedrag_easing:"linear",slider_transition_return_speed:300,slider_transition_return_easing:"easeInOutQuad"},g={touch_active:!1,startMouseX:0,startMouseY:0,lastMouseX:0,lastMouseY:0,startPosx:0,startTime:0,isInitDataValid:!1,slides:null,lastNumTouches:0,isDragging:!1,storedEventID:"touchSlider",videoStartX:0,isDragVideo:!1,videoObject:null};function h(a){if(!a)var a=e.getSlidesReference();var b=-f.getElementSize(a.objCurrentSlide).left,d=f.getElementSize(c),g=b-d.left;return g}function i(b){if(!0==e.isInnerInPlace())return!1;if(d.trigger(e.events.BEFORE_RETURN),!b)var b=e.getSlidesReference();var h=-f.getElementSize(b.objCurrentSlide).left;c.animate({left:h+"px"},{duration:a.slider_transition_return_speed,easing:a.slider_transition_continuedrag_easing,queue:!1,progress:function(d,e,i){if(!0==g.isDragVideo){var a=f.getElementSize(c).left-h,b=g.videoStartX+a;g.videoObject.css("left",b)}},complete:function(){d.trigger(e.events.AFTER_RETURN)}})}function j(){var b=e.getSlidesReference(),k=h(b);if(0==k)return!1;var m=k>0?"left":"right",j=!1;switch(m){case"right":if(e.isSlideHasItem(b.objPrevSlide))var l=-f.getElementSize(b.objPrevSlide).left;else j=!0;break;case"left":if(e.isSlideHasItem(b.objNextSlide))var l=-f.getElementSize(b.objNextSlide).left;else j=!0}!0==j?i(b):c.stop().animate({left:l+"px"},{duration:a.slider_transition_continuedrag_speed,easing:a.slider_transition_continuedrag_easing,queue:!1,progress:function(){if(!0==g.isDragVideo){var a=f.getElementSize(c).left-g.startPosx,b=g.videoStartX+a;g.videoObject.css("left",b)}},always:function(){var a;a=m,e.getVideoObject().hide(),e.switchSlideNums(a),e.placeNabourItems(),d.trigger(e.events.AFTER_DRAG_CHANGE)}})}function k(a){var b=f.getMousePosition(a);g.startMouseX=b.pageX,g.startMouseY=b.pageY,g.lastMouseX=g.startMouseX,g.lastMouseY=g.startMouseY,g.startTime=jQuery.now();var d=f.getArrTouches(a);g.startArrTouches=f.getArrTouchPositions(d);var e=f.getElementSize(c);g.startPosx=e.left,g.isInitDataValid=!0,g.isDragVideo=!1,f.storeEventData(a,g.storedEventID)}function l(a){g.touch_active=!1}function m(b,a){g.touch_active=!0,k(a)}function n(a){return(a.preventDefault(),g.isDragging=!1,!0==e.isAnimating()&&c.stop(!0,!0),f.getArrTouches(a).length>1)?(!0==g.touch_active&&l("1"),!0):!0==g.touch_active||void m("1",a)}function o(h){if(!1==g.touch_active)return!0;if(0==h.buttons)return l("2"),j(),!0;f.updateStoredEventData(h,g.storedEventID),h.preventDefault();var i=f.getMousePosition(h);g.lastMouseX=i.pageX,g.lastMouseY=i.pageY;var m=null;!0==a.slider_vertical_scroll_ondrag&&(m=f.handleScrollTop(g.storedEventID)),"vert"!==m&&function(h){var a=g.lastMouseX-g.startMouseX;if(0==a)return!0;var j=a<0?"left":"right",i=e.getObjZoom();if(i){if(!0==i.isPanEnabled(h,j))return g.isInitDataValid=!1,!0;if(!1==g.isInitDataValid)return k(h),!0}var f=g.startPosx+a;if(a>0&&f>0?f/=3:a<0&&f+c.width()<b.width()&&(f=g.startPosx+a/3),!1==g.isDragging&&(g.isDragging=!0,d.trigger(e.events.START_DRAG)),c.css("left",f+"px"),!0==g.isDragVideo){var l=f-g.startPosx,m=g.videoStartX+l;g.videoObject.css("left",m)}}(h)}function p(b){var a=f.getArrTouches(b).length;if(!0==e.isInnerInPlace()&& !1==g.touch_active&&0==a)return!0;if(0==a&& !0==g.touch_active){l("3");var c=!1;!1==f.wasVerticalScroll(g.storedEventID)&&(c=function(){var a=e.getSlidesReference(),b=h(a),c=Math.round(3*a.objCurrentSlide.width()/8);if(Math.abs(b)>=c)return!0;var d=Math.abs(g.lastMouseX-g.startMouseX);return g.lastMouseY,g.startMouseY,!(d<20)&&jQuery.now()-g.startTime<500}()),!0==c?j():i()}else 1==a&& !1==g.touch_active&&m("2",b)}this.isTapEventOccured=function(b){var a=f.getArrTouches(b).length;if(0!=a||0!=g.lastNumTouches)return g.lastNumTouches=a,!1;g.lastNumTouches=a,h(e.getSlidesReference());var c=Math.abs(g.lastMouseX-g.startMouseX),d=Math.abs(g.lastMouseY-g.startMouseY),i=jQuery.now(),j=i-g.startTime;return c<20&&d<50&&j<500},this.init=function(f,g){d=jQuery(e=f),g_objects=f.getObjects(),b=g_objects.g_objSlider,c=g_objects.g_objInner,a=jQuery.extend(a,g),b.bind("mousedown touchstart",n),jQuery("body").bind("mousemove touchmove",o),jQuery(window).add("body").bind("mouseup touchend",p)},this.getLastMousePos=function(){return{pageX:g.lastMouseX,pageY:g.lastMouseY}},this.isTouchActive=function(){return g.touch_active}}function UGZoomSliderControl(){var a,b,c,d=new UGSlider,e=new UGFunctions,f={slider_zoom_step:1.2,slider_zoom_max_ratio:6,slider_zoom_return_pan_duration:400,slider_zoom_return_pan_easing:"easeOutCubic"},g={isPanActive:!1,startMouseX:0,startMouseY:0,lastMouseX:0,lastMouseY:0,startImageX:0,startImageY:0,panXActive:!1,panYActive:!1,objImage:null,objImageSize:null,objParent:null,objParentSize:null,objSlide:null,storeImageLastTime:0,isZoomActive:!1,startDistance:0,startMiddlePoint:null,imageOrientPoint:null,objFitImageSize:null,isZoomedOnce:!1};function h(){var a=d.getScaleMode();return"down"!=a&&(a="fit"),a}function i(){var a=jQuery.now();if(a-g.storeImageLastTime<20)return!1;var b=d.getSlidesReference();if(g.objSlide=b.objCurrentSlide,g.objImage=b.objCurrentSlide.find("img"),0==g.objImage.length)return!1;g.objImageSize=e.getElementSize(g.objImage),g.objParent=g.objImage.parent(),g.objParentSize=e.getElementSize(g.objParent);var c=h();objPadding=d.getObjImagePadding(),g.objFitImageSize=e.getImageInsideParentDataByImage(g.objImage,c,objPadding);var a=jQuery.now();return g.storeImageLastTime=a,!0}function j(b,l){var a=d.getSlidesReference().objCurrentSlide.find("img"),g=h();c.trigger(d.events.ZOOM_START);var i=!0,j=d.getObjImagePadding();if("back"==b){var k=e.getImageOriginalSize(a);e.scaleImageFitParent(a,k.width,k.height,g,j)}else{var m="in"==b;i=e.zoomImageInsideParent(a,m,f.slider_zoom_step,l,g,f.slider_zoom_max_ratio,j)}!0==i&&(c.trigger(d.events.ZOOMING),c.trigger(d.events.ZOOM_CHANGE),c.trigger(d.events.ZOOM_END))}function k(b,c,d){var a=e.getArrTouches(c);if(!0===d){if(1!=a.length)return!1}else if(a.length>1)return!1;return!!e.isElementBiggerThenParent(b)}function l(c){var b,a;g.isPanActive=!0,b=c,a=e.getMousePosition(b),g.startMouseX=a.pageX,g.startMouseY=a.pageY,g.lastMouseX=g.startMouseX,g.lastMouseY=g.startMouseY,g.startImageX=g.objImageSize.left,g.startImageY=g.objImageSize.top,g.panXActive=g.objImageSize.width>g.objParentSize.width,g.panYActive=g.objImageSize.height>g.objParentSize.height}function m(a){if(!1==g.isZoomActive)return!1;2!=e.getArrTouches(a).length&&(g.isZoomActive=!1,c.trigger(d.events.ZOOM_END))}function n(f){if(!0==g.isZoomActive)return!0;var a,b=e.getArrTouches(f);if(2!=b.length)return!0;a=b,g.isZoomActive=!0,g.startDistance=e.getDistance(a[0].pageX,a[0].pageY,a[1].pageX,a[1].pageY),0==g.startDistance&&(g.startDistance=1),g.startMiddlePoint=e.getMiddlePoint(a[0].pageX,a[0].pageY,a[1].pageX,a[1].pageY),g.objImageSize=e.getElementSize(g.objImage),g.startImageX=g.objImageSize.left,g.startImageY=g.objImageSize.top,g.imageOrientPoint=e.getElementLocalPoint(g.startMiddlePoint,g.objImage),!1==e.isPointInsideElement(g.imageOrientPoint,g.objImageSize)&&(g.imageOrientPoint=e.getElementCenterPoint(g.objImage)),c.trigger(d.events.ZOOM_START)}function o(){if(void 0==g.objImage||0==g.objImage.length)return!0;if(e.getElementSize(g.objImage).width<g.objFitImageSize.imageWidth){g.objImage.css({position:"absolute",margin:"none"});var b,c,h,i,a,l,j,k,m={top:g.objFitImageSize.imageTop+"px",left:g.objFitImageSize.imageLeft+"px",width:g.objFitImageSize.imageWidth+"px",height:g.objFitImageSize.imageHeight+"px"};g.objImage.animate(m,{duration:f.slider_zoom_return_pan_duration,easing:f.slider_zoom_return_pan_easing,queue:!1})}else b=!1,c=!1,h=0,i=0,a=e.getElementSize(g.objImage),l=d.getObjImagePadding(),j=e.getElementCenterPosition(g.objImage,l),g.panXActive=g.objImageSize.width>g.objParentSize.width,g.panYActive=g.objImageSize.height>g.objParentSize.height,!0==g.panYActive?a.top>0?(i=0,c=!0):a.bottom<g.objParentSize.height&&(i=g.objParentSize.height-a.height,c=!0):a.top!=j.top&&(c=!0,i=j.top),!0==g.panXActive?a.left>0?(h=0,b=!0):a.right<g.objParentSize.width&&(h=g.objParentSize.width-a.width,b=!0):a.left!=j.left&&(b=!0,h=j.left),k={},!0==c&&(k.top=i+"px"),!0==b&&(k.left=h+"px"),(!0==c|| !0==b)&&g.objImage.animate(k,{duration:f.slider_zoom_return_pan_duration,easing:f.slider_zoom_return_pan_easing,queue:!1})}function p(a){return!1==d.isCurrentSlideType("image")||(i(),void 0==g.objImage||0==g.objImage.length||void(a.preventDefault(),!0== !!(g.objImage&&g.objImage.is(":animated"))&&g.objImage.stop(!0),!0==g.isZoomActive?m(a):n(a),!0==g.isZoomActive?g.isPanActive=!1:!0==k(g.objImage,a)&& !0==g.isZoomedOnce&&l(a)))}function q(a){if(!1==d.isCurrentSlideType("image"))return!0;if(!0==jQuery(a.target).data("ug-button"))return!1;if(i(),void 0==g.objImage||0==g.objImage.length)return!0;var b=g.isPanActive,c=g.isZoomActive;if(!1==d.isInnerInPlace())return g.isZoomActive=!1,g.isPanActive=!1,!0;if(!0==g.isZoomActive?m(a):n(a),!0==g.isZoomActive)g.isPanActive=!1;else{var e=k(g.objImage,a,!0);!0==g.isPanActive?g.isPanActive=!1:!0==e&&l(a)}(b||c)&& !1==g.isZoomActive&& !1==g.isPanActive&&o()}function r(a){if(!1==d.isCurrentSlideType("image"))return!0;!0==g.isZoomActive?function(l){var a=e.getArrTouches(l),b=e.getDistance(a[0].pageX,a[0].pageY,a[1].pageX,a[1].pageY)/g.startDistance,h=e.getMiddlePoint(a[0].pageX,a[0].pageY,a[1].pageX,a[1].pageY),i=g.objImageSize.width*b,m=g.objImageSize.height*b,j=e.getImageOriginalSize(g.objImage),k=1;if(j.width>0&&(k=i/j.width),k>f.slider_zoom_max_ratio)return!0;panX=-(g.imageOrientPoint.x*b-g.imageOrientPoint.x),panY=-(g.imageOrientPoint.y*b-g.imageOrientPoint.y);var n=h.x-g.startMiddlePoint.x,o=h.y-g.startMiddlePoint.y,p=g.startImageX+panX+n,q=g.startImageY+panY+o;e.setElementSizeAndPosition(g.objImage,p,q,i,m),c.trigger(d.events.ZOOMING),c.trigger(d.events.ZOOM_CHANGE)}(a):!0==g.isPanActive&&function(j){if(void 0==g.objImage||0==g.objImage.length)return!0;var a=e.getMousePosition(j);a.pageX,g.startMouseX,a.pageY,g.startMouseY;var c=a.pageX-g.lastMouseX,f=a.pageY-g.lastMouseY,h=c<0?"left":"right",i=f<0?"up":"down";g.lastMouseX=a.pageX,g.lastMouseY=a.pageY;var b=e.getElementSize(g.objImage);!1==g.panYActive?f=0:"down"==i&&b.top>0?f/=3:"up"==i&&b.bottom<g.objParentSize.height&&(f/=3),!1==g.panXActive|| !1==d.isInnerInPlace()?c=0:"right"==h&&b.left>0?c/=3:"left"==h&&b.right<g.objParentSize.width&&(c/=3);var k=b.left+c,l=b.top+f;e.placeElement(g.objImage,k,l)}(a)}function s(a,b,h,i){if(!1==f.slider_zoom_mousewheel|| !1==d.isCurrentSlideType("image"))return!0;a.preventDefault();var c=b>0,g=e.getMousePosition(a);j(!0==c?"in":"out",g)}this.________EXTERNAL_____________=function(){},this.isPanEnabled=function(a,b){if(i(),void 0==g.objImage||0==g.objImage.length|| !1==g.isZoomedOnce|| !1==k(g.objImage,a)|| !1==d.isInnerInPlace())return!1;if("left"==b){if(g.objImageSize.right<=g.objParentSize.width)return!1}else if(g.objImageSize.left>=0)return!1;return!0},this.init=function(i,j){var e,h;e=i,h=j,c=jQuery(d=e),g_objects=e.getObjects(),a=g_objects.g_objSlider,b=g_objects.g_objInner,f=jQuery.extend(f,h),a.on("mousewheel",s),a.bind("mousedown touchstart",p),jQuery("body").bind("mousemove touchmove",r),jQuery(window).add("body").bind("mouseup touchend",q),c.bind(d.events.BEFORE_RETURN,function(){o()}),c.bind(d.events.ITEM_CHANGED,function(){g.isZoomedOnce=!1}),c.bind(d.events.ZOOM_CHANGE,function(){g.isZoomedOnce=!0})},this.zoomIn=function(){j("in")},this.zoomOut=function(){j("out")},this.zoomBack=function(){j("back")}}function UGWistiaAPI(){this.isAPILoaded=!1;var a,b,c=this,d=jQuery(this),e=!1;function f(){return"undefined"!=typeof Wistia}function g(d,g,a,c,i){b=null,e=!1;var f=d+"_video";jQuery("#"+d).html("<div id='"+f+"' class='wistia_embed' style='width:"+a+";height:"+c+";' data-video-width='"+a+"' data-video-height='"+c+"'>&nbsp;</div>"),b=Wistia.embed(g,{version:"v1",videoWidth:a,videoHeight:c,container:f,autoPlay:i}),e=!0,h()}function h(){b.bind("play",function(){d.trigger(c.events.START_PLAYING)}),b.bind("pause",function(){d.trigger(c.events.STOP_PLAYING)}),b.bind("end",function(){d.trigger(c.events.STOP_PLAYING),d.trigger(c.events.VIDEO_ENDED)})}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return!0==g_ugWistiaAPI.isAPILoaded||(f()?(g_ugWistiaAPI.isAPILoaded=!0,!0):void(g_ugFunctions.loadJs("fast.wistia.com/assets/external/E-v1.js",!0),g_ugWistiaAPI.isAPILoaded=!0))},this.doCommand=function(a){if(null==b|| !1==e)return!1;switch(a){case"play":b.play();break;case"pause":b.pause()}},this.pause=function(){c.doCommand("pause")},this.play=function(){c.doCommand("play")},this.putVideo=function(b,c,d,e,h){if(f())return g(b,c,d,e,h),!0;this.loadAPI(),a=setInterval(function(){f()&&(g(b,c,d,e,h),clearInterval(a))},500)},this.isPlayerReady=function(){return!!e&&!!b}}function UGSoundCloudAPI(){this.isAPILoaded=!1;var a,b,c,d=this,e=jQuery(this);function f(){return"undefined"!=typeof SC}function g(d,f,g,i,j){a=null,g_isPlayerReady=!1;var e=d+"_iframe",c=location.protocol+"//w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/"+f;c+="&amp;buying=false&amp;liking=false&amp;download=false&amp;sharing=false&amp;show_artwork=true&show_comments=false&amp;show_playcount=true&amp;show_user=false&amp;hide_related=true&amp;visual=true&amp;start_track=0&amp;callback=true",!0===j?c+="&amp;auto_play=true":c+="&amp;auto_play=false",jQuery("#"+d).html("<iframe id='"+e+"' src="+c+" width='"+g+"' height='"+i+"' frameborder='0' scrolling='no' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>"),(a=SC.Widget(e)).bind(SC.Widget.Events.READY,function(){a&&(g_isPlayerReady=!0,h())}),b=d}function h(){a.bind(SC.Widget.Events.PLAY,function(){e.trigger(d.events.START_PLAYING)}),a.bind(SC.Widget.Events.PAUSE,function(){e.trigger(d.events.STOP_PLAYING)}),a.bind(SC.Widget.Events.FINISH,function(){e.trigger(d.events.STOP_PLAYING),e.trigger(d.events.VIDEO_ENDED)})}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return!0==g_ugSoundCloudAPI.isAPILoaded||(f()?(g_ugSoundCloudAPI.isAPILoaded=!0,!0):void(g_ugFunctions.loadJs("w.soundcloud.com/player/api.js",!0),g_ugSoundCloudAPI.isAPILoaded=!0))},this.putSound=function(a,b,d,e,h){if(f())return g(a,b,d,e,h),!0;this.loadAPI(),c=setInterval(function(){f()&&(g(a,b,d,e,h),clearInterval(c))},500)},this.doCommand=function(b){if(null==a|| !1==g_isPlayerReady)return!1;switch(b){case"play":a.play();break;case"pause":a.pause()}},this.pause=function(){d.doCommand("pause")},this.play=function(){d.doCommand("play")},this.destroy=function(){g_isPlayerReady=!1,a=null,b&&(jQuery("#"+b).html(""),b=null)}}function UGHtml5MediaAPI(){this.isAPILoaded=!1;var a,b,c=this,d=jQuery(this);function e(){return"undefined"!=typeof mejs}function f(e,b,f,h,i){a=null,g_isPlayerReady=!1;var d=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/flashmediaelement-cdn.swf",m=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/silverlightmediaelement.xap",j=e+"_video",k="";i&& !0===i&&(k="autoplay='autoplay'");var l="";b.posterImage&&(l="poster='"+b.posterImage+"'");var c="<video id='"+j+"' width='"+f+"' height='"+h+"'  controls='controls' preload='none' "+k+" "+l+">";""!=b.mp4&&(c+="<source type='video/mp4' src='"+b.mp4+"' />"),""!=b.webm&&(c+="<source type='video/webm' src='"+b.webm+"' />"),""!=b.ogv&&(c+="<source type='video/ogg' src='"+b.ogv+"' />"),c+="<object width='"+f+"' height='"+h+"' type='application/x-shockwave-flash' data='"+d+"'>",c+="<param name='movie' value='"+d+"' />",c+="<param name='flashvars' value='controls=true&file="+b.mp4+"' />",c+="</object>",c+="</video>",jQuery("#"+e).html(c),new MediaElement(j,{enablePluginDebug:!1,flashName:d,silverlightName:m,success:function(b,c){g_isPlayerReady=!0,a=b,!1==i&&a.pause(),g()},error:function(a){trace(a)}})}function g(){g_ugFunctions.addEvent(a,"play",function(){d.trigger(c.events.START_PLAYING)}),g_ugFunctions.addEvent(a,"pause",function(){d.trigger(c.events.STOP_PLAYING)}),g_ugFunctions.addEvent(a,"ended",function(){d.trigger(c.events.STOP_PLAYING),d.trigger(c.events.VIDEO_ENDED)})}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return!0==g_ugHtml5MediaAPI.isAPILoaded||(e()?(g_ugHtml5MediaAPI.isAPILoaded=!0,!0):void(g_ugFunctions.loadJs("cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelement.min.js",!0),g_ugFunctions.loadCss("cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelementplayer.min.css",!0),g_ugHtml5MediaAPI.isAPILoaded=!0))},this.putVideo=function(a,c,d,g,h){if(e())return f(a,c,d,g,h),!0;this.loadAPI(),b=setInterval(function(){e()&&(f(a,c,d,g,h),clearInterval(b))},500)},this.doCommand=function(b){if(null==a|| !1==g_isPlayerReady)return!1;switch(b){case"play":a.play();break;case"pause":a.pause()}},this.pause=function(){c.doCommand("pause")},this.play=function(){c.doCommand("play")}}function UGVimeoAPI(){this.isAPILoaded=!1;var a,b,c=this,d=jQuery(this),e=null,f=!1,g=!1;function h(){return"undefined"!=typeof Froogaloop}function i(a,d,g,h,i){e=null,f=!1;var c=location.protocol+"//player.vimeo.com/video/"+d+"?api=1";!0===i&&(c+="&amp;byline=0&amp;autoplay=1&amp;title=0&amp;portrait=0"),jQuery("#"+a).html("<iframe src="+c+" width='"+g+"' height='"+h+"' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>");var k=jQuery("#"+a+" iframe")[0];(e=Froogaloop(k)).addEvent("ready",function(){e&&(f=!0,j())}),b=a}function j(){if(!e)return!1;e.addEvent("cuechange",function(){!0==g&&c.play()}),e.addEvent("play",function(){d.trigger(c.events.START_PLAYING)}),e.addEvent("pause",function(){d.trigger(c.events.STOP_PLAYING)}),e.addEvent("finish",function(){d.trigger(c.events.STOP_PLAYING),d.trigger(c.events.VIDEO_ENDED)})}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return!0==g_ugVimeoAPI.isAPILoaded||(h()?(g_ugVimeoAPI.isAPILoaded=!0,!0):void(g_ugFunctions.loadJs("f.vimeocdn.com/js/froogaloop2.min.js",!0),g_ugVimeoAPI.isAPILoaded=!0))},this.doCommand=function(a){if(null==e|| !1==f)return!1;e.api(a)},this.pause=function(){c.doCommand("pause")},this.play=function(){c.doCommand("play")},this.destroy=function(){e&&(e.api("unload"),e=null,f=!1),b&&jQuery("#"+b).html("")},this.putVideo=function(b,c,d,e,f){if(h())return i(b,c,d,e,f),!0;this.loadAPI(),a=setInterval(function(){h()&&(i(b,c,d,e,f),clearInterval(a))},500)},this.isPlayerReady=function(){return!!f&&!!e},this.changeVideo=function(a,b){if(!1==c.isPlayerReady())return!1;g=b,e.api("loadVideo",a)},this.getVideoImages=function(a,c,d){var b=location.protocol+"//vimeo.com/api/v2/video/"+a+".json";jQuery.get(b,{},function(b){var a={};a.preview=b[0].thumbnail_large,a.thumb=b[0].thumbnail_medium,d(c,a)})}}function UGYoutubeAPI(){this.isAPILoaded=!1;var a,b,c=this,d=null,e=!1,f=jQuery(this),g=-1,h={video_youtube_showinfo:!0};function i(a,f,g,i,j){d&&e&&d.destroy();var c={controls:2,showinfo:h.video_youtube_showinfo,rel:0};!0===j&&(c.autoplay=1),e=!1,d=new YT.Player(a,{height:i,width:g,videoId:f,playerVars:c,events:{onReady:k,onStateChange:l}}),b=a}function j(){return"undefined"!=typeof YT&& void 0!==YT.Player}function k(){e=!0}function l(){if("function"!=typeof d.getPlayerState)return trace("Youtube API error: can't get player state"),!1;var a=d.getPlayerState();switch(a){case YT.PlayerState.PLAYING:f.trigger(c.events.START_PLAYING);break;case YT.PlayerState.ENDED:f.trigger(c.events.STOP_PLAYING),f.trigger(c.events.VIDEO_ENDED);break;default:g==YT.PlayerState.PLAYING&&f.trigger(c.events.STOP_PLAYING)}g=a}this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.setOptions=function(a){h=jQuery.extend(h,a)},this.putVideo=function(b,c,d,e,f){if(j())return i(b,c,d,e,f),!0;this.loadAPI(),a=setInterval(function(){j()&&(i(b,c,d,e,f),clearInterval(a))},500)},this.loadAPI=function(){return!0==g_ugYoutubeAPI.isAPILoaded||("undefined"!=typeof YT?(g_ugYoutubeAPI.isAPILoaded=!0,!0):void(g_ugFunctions.loadJs("https://www.youtube.com/player_api",!1),g_ugYoutubeAPI.isAPILoaded=!0))},this.doCommand=function(a,b){if(!d)return!0;if(!1==e)return!1;switch(a){case"play":if("function"!=typeof d.playVideo)return!1;d.playVideo();break;case"pause":if("function"!=typeof d.pauseVideo)return!1;d.pauseVideo();break;case"seek":if("function"!=typeof d.seekTo)return!1;d.seekTo(b);break;case"stopToBeginning":var c=d.getPlayerState();switch(d.pauseVideo(),c){case YT.PlayerState.PLAYING:case YT.PlayerState.ENDED:case YT.PlayerState.PAUSED:d.seekTo(0)}}},this.play=function(){c.doCommand("play")},this.pause=function(){c.doCommand("pause")},this.destroy=function(){try{d&&(e=!1,d.clearVideo(),d.destroy())}catch(a){jQuery("#"+b).html("")}},this.stopToBeginning=function(){c.doCommand("stopToBeginning")},this.changeVideo=function(a,b){if(!1==c.isPlayerReady())return!1;b&& !0==b?d.loadVideoById(a,0,"large"):d.cueVideoById(a,0,"large")},this.isPlayerReady=function(){return!!e&&!!d},this.getVideoImages=function(b){var a={};return a.preview="https://i.ytimg.com/vi/"+b+"/sddefault.jpg",a.thumb="https://i.ytimg.com/vi/"+b+"/default.jpg",a}}function UGVideoPlayer(){var a,b,c,d,e,f,g,h,i=this,j=jQuery(this),k=new UGFunctions,l=new UGYoutubeAPI,m=new UGVimeoAPI,n=new UGHtml5MediaAPI,o=new UGSoundCloudAPI,p=new UGWistiaAPI,q=null,r={video_enable_closebutton:!0};this.events={SHOW:"video_show",HIDE:"video_hide",PLAY_START:"video_play_start",PLAY_STOP:"video_play_stop",VIDEO_ENDED:"video_ended"};var s={standAloneMode:!1,youtubeInnerID:"",vimeoPlayerID:"",html5PlayerID:"",wistiaPlayerID:"",soundCloudPlayerID:""};function t(){i.hide()}function u(){j.trigger(i.events.PLAY_START),e&&e.hide()}function v(){j.trigger(i.events.PLAY_STOP),e&&e.show()}function w(){j.trigger(i.events.VIDEO_ENDED)}function x(h){var a=["youtube","vimeo","html5","soundcloud","wistia"];for(var i in a){var e=a[i];if(e!=h)switch(e){case"youtube":l.pause(),l.destroy(),b.hide();break;case"vimeo":m.pause(),m.destroy(),c.hide();break;case"html5":n.pause(),d.hide();break;case"soundcloud":o.pause(),o.destroy(),f.hide();break;case"wistia":p.pause(),g.hide()}}}this.init=function(b,a,c){if(!(h=c))throw new Error("missing gallery ID for video player, it's a must!");r=jQuery.extend(r,b),l.setOptions(r),a&& !0==a&&(s.standAloneMode=!0)},this.setHtml=function(j){s.youtubeInnerID=h+"_youtube_inner",s.vimeoPlayerID=h+"_videoplayer_vimeo",s.html5PlayerID=h+"_videoplayer_html5",s.wistiaPlayerID=h+"_videoplayer_wistia",s.soundCloudPlayerID=h+"_videoplayer_soundcloud";var i="<div class='ug-videoplayer' style='display:none'>";i+="<div class='ug-videoplayer-wrapper ug-videoplayer-youtube' style='display:none'><div id='"+s.youtubeInnerID+"'></div></div>",i+="<div id='"+s.vimeoPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-vimeo' style='display:none'></div>",i+="<div id='"+s.html5PlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-html5'></div>",i+="<div id='"+s.soundCloudPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-soundcloud'></div>",i+="<div id='"+s.wistiaPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-wistia'></div>",!1==s.standAloneMode&& !0==r.video_enable_closebutton&&(i+="<div class='ug-videoplayer-button-close'></div>"),i+="</div>",j.append(i),a=j.children(".ug-videoplayer"),b=a.children(".ug-videoplayer-youtube"),c=a.children(".ug-videoplayer-vimeo"),d=a.children(".ug-videoplayer-html5"),f=a.children(".ug-videoplayer-soundcloud"),g=a.children(".ug-videoplayer-wistia"),!1==s.standAloneMode&& !0==r.video_enable_closebutton&&(e=a.children(".ug-videoplayer-button-close"))},this.destroy=function(){e&&(e.off("click"),e.off("touchend")),jQuery(l).off(l.events.START_PLAYING),jQuery(l).off(l.events.STOP_PLAYING),jQuery(m).off(m.events.START_PLAYING),jQuery(m).off(m.events.STOP_PLAYING),jQuery(n).off(n.events.START_PLAYING),jQuery(n).off(n.events.STOP_PLAYING),jQuery(o).off(o.events.START_PLAYING,u),jQuery(o).off(o.events.STOP_PLAYING,v),jQuery(p).off(p.events.START_PLAYING,u),jQuery(p).off(p.events.STOP_PLAYING,v),q=null},this.initEvents=function(){e&&(k.setButtonMobileReady(e),k.setButtonOnClick(e,t)),jQuery(l).on(l.events.START_PLAYING,u),jQuery(l).on(l.events.STOP_PLAYING,v),jQuery(l).on(l.events.VIDEO_ENDED,w),jQuery(m).on(m.events.START_PLAYING,u),jQuery(m).on(m.events.STOP_PLAYING,v),jQuery(m).on(m.events.VIDEO_ENDED,w),jQuery(n).on(n.events.START_PLAYING,u),jQuery(n).on(n.events.STOP_PLAYING,v),jQuery(n).on(n.events.VIDEO_ENDED,w),jQuery(o).on(o.events.START_PLAYING,u),jQuery(o).on(o.events.STOP_PLAYING,v),jQuery(o).on(o.events.VIDEO_ENDED,w),jQuery(p).on(p.events.START_PLAYING,u),jQuery(p).on(p.events.STOP_PLAYING,v),jQuery(p).on(p.events.VIDEO_ENDED,w)},this.setSize=function(b,c){k.setElementSize(a,b,c),e&&k.placeElement(e,"right","top")},this.setPosition=function(b,c){k.placeElement(a,b,c)},this.getObject=function(){return a},this.show=function(){if(!0==i.isVisible())return!0;a.show(),a.fadeTo(0,1),e&&e.show(),j.trigger(i.events.SHOW)},this.hide=function(){if(!1==i.isVisible())return!0;x(),q=null,a.hide(),j.trigger(i.events.HIDE)},this.getActiveAPI=function(){switch(q){case"youtube":return l;case"vimeo":return m;case"wistia":return p;case"soundcloud":return o;case"html5":return n;default:return null}},this.pause=function(){var a=i.getActiveAPI();if(null==a)return!1;"function"==typeof a.pause&&a.pause()},this.isVisible=function(){return a.is(":visible")},this.playYoutube=function(c,a){if(void 0===a)var a=!0;x("youtube"),b.show(),0==b.children("#"+s.youtubeInnerID).length&&b.append("<div id='"+s.youtubeInnerID+"'></div>"),!0==l.isPlayerReady()&& !0==s.standAloneMode?l.changeVideo(c,a):l.putVideo(s.youtubeInnerID,c,"100%","100%",a),q="youtube"},this.playVimeo=function(b,a){if(void 0===a)var a=!0;x("vimeo"),c.show(),m.putVideo(s.vimeoPlayerID,b,"100%","100%",a),q="vimeo"},this.playHtml5Video=function(b,c,e,f,a){if(void 0===a)var a=!0;x("html5"),d.show(),n.putVideo(s.html5PlayerID,{ogv:b,webm:c,mp4:e,posterImage:f},"100%","100%",a),q="html5"},this.playSoundCloud=function(b,a){if(void 0===a)var a=!0;x("soundcloud"),f.show(),o.putSound(s.soundCloudPlayerID,b,"100%","100%",a),q="soundcloud"},this.playWistia=function(b,a){if(void 0===a)var a=!0;x("wistia"),g.show(),p.putVideo(s.wistiaPlayerID,b,"100%","100%",a),q="wistia"}}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function d(k){var b=k||window.event,o=j.call(arguments,1),i=0,d=0,c=0,l=0;if((k=a.event.fix(b)).type="mousewheel","detail"in b&&(c=-1*b.detail),"wheelDelta"in b&&(c=b.wheelDelta),"wheelDeltaY"in b&&(c=b.wheelDeltaY),"wheelDeltaX"in b&&(d=-1*b.wheelDeltaX),"axis"in b&&b.axis===b.HORIZONTAL_AXIS&&(d=-1*c,c=0),i=0===c?d:c,"deltaY"in b&&(i=c=-1*b.deltaY),"deltaX"in b&&(d=b.deltaX,0===c&&(i=-1*d)),0!==c||0!==d){if(1===b.deltaMode){var m=a.data(this,"mousewheel-line-height");i*=m,c*=m,d*=m}else if(2===b.deltaMode){var n=a.data(this,"mousewheel-page-height");i*=n,c*=n,d*=n}return l=Math.max(Math.abs(c),Math.abs(d)),(!h||h>l)&&(h=l,f(b,l)&&(h/=40)),f(b,l)&&(i/=40,d/=40,c/=40),i=Math[i>=1?"floor":"ceil"](i/h),d=Math[d>=1?"floor":"ceil"](d/h),c=Math[c>=1?"floor":"ceil"](c/h),k.deltaX=d,k.deltaY=c,k.deltaFactor=h,k.deltaMode=0,o.unshift(k,i,d,c),g&&clearTimeout(g),g=setTimeout(e,200),(a.event.dispatch||a.event.handle).apply(this,o)}}function e(){h=null}function f(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120==0}var g,h,b=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],j=Array.prototype.slice;if(a.event.fixHooks)for(var c=b.length;c;)a.event.fixHooks[b[--c]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var b=i.length;b;)this.addEventListener(i[--b],d,!1);else this.onmousewheel=d;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=i.length;a;)this.removeEventListener(i[--a],d,!1);else this.onmousewheel=null},getLineHeight:function(b){return parseInt(a(b)["offsetParent"in a.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],function($){return a($)}):"object"==typeof module&&"object"==typeof module.exports?exports=a(require("jquery")):a(jQuery)}(function($){$.easing.jswing=$.easing.swing;var c=Math.pow,d=Math.sqrt,e=Math.sin,f=Math.cos,a=Math.PI,g=2*a/3,h=2*a/4.5;function b(a){return a<.36363636363636365?7.5625*a*a:a<.7272727272727273?7.5625*(a-=.5454545454545454)*a+.75:a<.9090909090909091?7.5625*(a-=.8181818181818182)*a+.9375:7.5625*(a-=.9545454545454546)*a+.984375}$.extend($.easing,{def:"easeOutQuad",swing:function(a){return $.easing[$.easing.def](a)},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return 1-(1-a)*(1-a)},easeInOutQuad:function(a){return a<.5?2*a*a:1-c(-2*a+2,2)/2},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1-c(1-a,3)},easeInOutCubic:function(a){return a<.5?4*a*a*a:1-c(-2*a+2,3)/2},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1-c(1-a,4)},easeInOutQuart:function(a){return a<.5?8*a*a*a*a:1-c(-2*a+2,4)/2},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1-c(1-a,5)},easeInOutQuint:function(a){return a<.5?16*a*a*a*a*a:1-c(-2*a+2,5)/2},easeInSine:function(b){return 1-f(b*a/2)},easeOutSine:function(b){return e(b*a/2)},easeInOutSine:function(b){return-(f(a*b)-1)/2},easeInExpo:function(a){return 0===a?0:c(2,10*a-10)},easeOutExpo:function(a){return 1===a?1:1-c(2,-10*a)},easeInOutExpo:function(a){return 0===a?0:1===a?1:a<.5?c(2,20*a-10)/2:(2-c(2,-20*a+10))/2},easeInCirc:function(a){return 1-d(1-c(a,2))},easeOutCirc:function(a){return d(1-c(a-1,2))},easeInOutCirc:function(a){return a<.5?(1-d(1-c(2*a,2)))/2:(d(1-c(-2*a+2,2))+1)/2},easeInElastic:function(a){return 0===a?0:1===a?1:-c(2,10*a-10)*e((10*a-10.75)*g)},easeOutElastic:function(a){return 0===a?0:1===a?1:c(2,-10*a)*e((10*a-.75)*g)+1},easeInOutElastic:function(a){return 0===a?0:1===a?1:a<.5?-(c(2,20*a-10)*e((20*a-11.125)*h))/2:c(2,-20*a+10)*e((20*a-11.125)*h)/2+1},easeInBack:function(a){return 2.70158*a*a*a-1.70158*a*a},easeOutBack:function(a){return 1+2.70158*c(a-1,3)+1.70158*c(a-1,2)},easeInOutBack:function(a){return a<.5?c(2*a,2)*(3.5949095*2*a-2.5949095)/2:(c(2*a-2,2)*(3.5949095*(2*a-2)+2.5949095)+2)/2},easeInBounce:function(a){return 1-b(1-a)},easeOutBounce:b,easeInOutBounce:function(a){return a<.5?(1-b(1-2*a))/2:(1+b(2*a-1))/2}})}),function(a,i){if(void 0===a.cssHooks)return!1;function j(a,c,d){var b=o[c.type]||{};return null==a?d||!c.def?null:c.def:isNaN(a=b.floor?~~a:parseFloat(a))?c.def:b.mod?(a+b.mod)%b.mod:0>a?0:b.max<a?b.max:a}function k(d){var h=b(),g=h._rgba=[];return d=d.toLowerCase(),e(n,function(j,a){var b,f=a.re.exec(d),i=f&&a.parse(f),e=a.space||"rgba";return i?(b=h[e](i),h[c[e].cache]=b[c[e].cache],g=h._rgba=b._rgba,!1):void 0}),g.length?("0,0,0,0"===g.join()&&a.extend(g,f.transparent),h):f[d]}function l(b,c,a){return 1>6*(a=(a+1)%1)?b+(c-b)*a*6:1>2*a?c:2>3*a?b+(c-b)*(2/3-a)*6:b}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",m=/^([\-+])=\s*(\d+\.?\d*)/,n=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],b=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},c={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},o={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=b.support={},d=a("<p>")[0],e=a.each;d.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=d.style.backgroundColor.indexOf("rgba")> -1,e(c,function(b,a){a.cache="_"+b,a.props.alpha={idx:3,type:"percent",def:1}}),b.fn=a.extend(b.prototype,{parse:function(d,g,l,m){if(d===i)return this._rgba=[null,null,null,null],this;(d.jquery||d.nodeType)&&(d=a(d).css(g),g=i);var n=this,h=a.type(d),o=this._rgba=[];return g!==i&&(d=[d,g,l,m],h="array"),"string"===h?this.parse(k(d)||f._default):"array"===h?(e(c.rgba.props,function(b,a){o[a.idx]=j(d[a.idx],a)}),this):"object"===h?(d instanceof b?e(c,function(b,a){d[a.cache]&&(n[a.cache]=d[a.cache].slice())}):e(c,function(f,b){var c=b.cache;e(b.props,function(a,e){if(!n[c]&&b.to){if("alpha"===a||null==d[a])return;n[c]=b.to(n._rgba)}n[c][e.idx]=j(d[a],e,!0)}),n[c]&&0>a.inArray(null,n[c].slice(0,3))&&(n[c][3]=1,b.from&&(n._rgba=b.from(n[c])))}),this):void 0},is:function(a){var f=b(a),d=!0,g=this;return e(c,function(h,a){var b,c=f[a.cache];return c&&(b=g[a.cache]||a.to&&a.to(g._rgba)||[],e(a.props,function(e,a){return null!=c[a.idx]?d=c[a.idx]===b[a.idx]:void 0})),d}),d},_space:function(){var a=[],b=this;return e(c,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(h,l){var d=b(h),f=d._space(),a=c[f],g=0===this.alpha()?b("transparent"):this,i=g[a.cache]||a.to(g._rgba),k=i.slice();return d=d[a.cache],e(a.props,function(g,f){var e=f.idx,a=i[e],b=d[e],c=o[f.type]||{};null!==b&&(null===a?k[e]=b:(c.mod&&(b-a>c.mod/2?a+=c.mod:a-b>c.mod/2&&(a-=c.mod)),k[e]=j((b-a)*l+a,f)))}),this[f](k)},blend:function(d){if(1===this._rgba[3])return this;var c=this._rgba.slice(),e=c.pop(),f=b(d)._rgba;return b(a.map(c,function(a,b){return(1-e)*f[b]+e*a}))},toRgbaString:function(){var c="rgba(",b=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===b[3]&&(b.pop(),c="rgb("),c+b.join()+")"},toHslaString:function(){var c="hsla(",b=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===b[3]&&(b.pop(),c="hsl("),c+b.join()+")"},toHexString:function(c){var b=this._rgba.slice(),d=b.pop();return c&&b.push(~~(255*d)),"#"+a.map(b,function(a){return 1===(a=(a||0).toString(16)).length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),b.fn.parse.prototype=b.fn,c.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var i,j,c=a[0]/255,d=a[1]/255,f=a[2]/255,k=a[3],e=Math.max(c,d,f),g=Math.min(c,d,f),b=e-g,h=e+g,l=.5*h;return i=g===e?0:c===e?60*(d-f)/b+360:d===e?60*(f-c)/b+120:60*(c-d)/b+240,j=0===b?0:.5>=l?b/h:b/(2-h),[Math.round(i)%360,j,l,null==k?1:k]},c.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var d=a[0]/360,e=a[1],b=a[2],g=a[3],c=.5>=b?b*(1+e):b+e-b*e,f=2*b-c;return[Math.round(255*l(f,c,d+1/3)),Math.round(255*l(f,c,d)),Math.round(255*l(f,c,d-1/3)),g]},e(c,function(d,c){var f=c.props,g=c.cache,h=c.to,k=c.from;b.fn[d]=function(c){if(h&&!this[g]&&(this[g]=h(this._rgba)),c===i)return this[g].slice();var l,m=a.type(c),n="array"===m||"object"===m?c:arguments,d=this[g].slice();return e(f,function(c,a){var b=n["object"===m?c:a.idx];null==b&&(b=d[a.idx]),d[a.idx]=j(b,a)}),k?((l=b(k(d)))[g]=d,l):b(d)},e(f,function(c,e){b.fn[c]||(b.fn[c]=function(b){var g,f=a.type(b),j="alpha"===c?this._hsla?"hsla":"rgba":d,h=this[j](),i=h[e.idx];return"undefined"===f?i:("function"===f&&(b=b.call(this,i),f=a.type(b)),null==b&&e.empty?this:("string"===f&&(g=m.exec(b))&&(b=i+parseFloat(g[2])*("+"===g[1]?1:-1)),h[e.idx]=b,this[j](h)))})})}),b.hook=function(c){e(c.split(" "),function(d,c){a.cssHooks[c]={set:function(g,d){var i,e,f="";if("transparent"!==d&&("string"!==a.type(d)||(i=k(d)))){if(d=b(i||d),!h.rgba&&1!==d._rgba[3]){for(e="backgroundColor"===c?g.parentNode:g;(""===f||"transparent"===f)&&e&&e.style;)try{f=a.css(e,"backgroundColor"),e=e.parentNode}catch(j){}d=d.blend(f&&"transparent"!==f?f:"_default")}d=d.toRgbaString()}try{g.style[c]=d}catch(l){}}},a.fx.step[c]=function(d){d.colorInit||(d.start=b(d.elem,c),d.end=b(d.end),d.colorInit=!0),a.cssHooks[c].set(d.elem,d.start.transition(d.end,d.pos))}})},b.hook(g),a.cssHooks.borderColor={expand:function(b){var a={};return e(["Top","Right","Bottom","Left"],function(d,c){a["border"+c+"Color"]=b}),a}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(a){function b(){try{var c=this===document?a(this):a(this).contents()}catch(d){return!1}c.mousemove(function(b){a.mlp={x:b.pageX,y:b.pageY}}),c.find("iframe").on("load",b)}a.mlp={x:0,y:0},a(b),a.fn.ismouseover=function(){var b=!1;return this.eq(0).each(function(){var d=a(this).is("iframe")?a(this).contents().find("body"):a(this),c=d.offset();b=c.left<=a.mlp.x&&c.left+d.outerWidth()>a.mlp.x&&c.top<=a.mlp.y&&c.top+d.outerHeight()>a.mlp.y}),b}}(jQuery);var g_ugYoutubeAPI=new UGYoutubeAPI,g_ugVimeoAPI=new UGVimeoAPI,g_ugHtml5MediaAPI=new UGHtml5MediaAPI,g_ugSoundCloudAPI=new UGSoundCloudAPI,g_ugWistiaAPI=new UGWistiaAPI;function ugCheckForMinJQueryVersion(){if(!1==g_ugFunctions.checkMinJqueryVersion("1.8.0"))throw new Error("The gallery can run from jquery 1.8 You have jQuery "+jQuery.fn.jquery+" Please update your jQuery library.")}function ugCheckForErrors(b,c){try{"jquery"==c?(!function(){if("undefined"==typeof jQuery)throw new Error("jQuery library not included")}(),ugCheckForMinJQueryVersion()):(ugCheckForMinJQueryVersion(),function(){if("function"==typeof jQuery.fn.unitegallery)return!0;var a="You have some jquery.js library include that comes after the gallery files js include.";throw a+="<br> This include eliminates the gallery libraries, and make it not work.","cms"==c?(a+="<br><br> To fix it you can:<br>&nbsp;&nbsp;&nbsp; 1. In the Gallery Settings -> Troubleshooting set option:  <strong><b>Put JS Includes To Body</b></strong> option to true.",a+="<br>&nbsp;&nbsp;&nbsp; 2. Find the double jquery.js include and remove it."):a+="<br><br> Please find and remove this jquery.js include and the gallery will work. <br> * There should be only one jquery.js include before all other js includes in the page.",new Error(a)}())}catch(e){var a=e.message;if(a="<div style='font-size:16px;color:#BC0C06;max-width:900px;border:1px solid red;padding:10px;'>"+(a="Unite Gallery Error: "+a)+"</div>","jquery"==c){var d=document.getElementById(b);d.innerHTML=a,d.style.display="block"}else jQuery(b).show().html(a);return!1}return!0}function UniteGalleryMain(){var b,c,d,e,f,g,h,i,j,a=this,k=jQuery(a),l=new UGFunctions,m=[],n=null,o=-1,p={};this.events={ITEM_CHANGE:"item_change",SIZE_CHANGE:"size_change",ENTER_FULLSCREEN:"enter_fullscreen",EXIT_FULLSCREEN:"exit_fullscreen",START_PLAY:"start_play",STOP_PLAY:"stop_play",PAUSE_PLAYING:"pause_playing",CONTINUE_PLAYING:"continue_playing",SLIDER_ACTION_START:"slider_action_start",SLIDER_ACTION_END:"slider_action_end",ITEM_IMAGE_UPDATED:"item_image_updated",GALLERY_KEYPRESS:"gallery_keypress",GALLERY_BEFORE_REQUEST_ITEMS:"gallery_before_request_items",OPEN_LIGHTBOX:"open_lightbox",CLOSE_LIGHTBOX:"close_lightbox"};var q={gallery_width:900,gallery_height:500,gallery_min_width:150,gallery_min_height:100,gallery_theme:"default",gallery_skin:"default",gallery_images_preload_type:"minimal",gallery_autoplay:!1,gallery_play_interval:3e3,gallery_pause_on_mouseover:!0,gallery_mousewheel_role:"zoom",gallery_control_keyboard:!0,gallery_carousel:!0,gallery_preserve_ratio:!0,gallery_background_color:"",gallery_debug_errors:!1,gallery_shuffle:!1,gallery_urlajax:null,gallery_enable_tabs:!1,gallery_enable_loadmore:!1,gallery_enable_cache:!0,gallery_initial_catid:""},r={objCustomOptions:{},isAllItemsPreloaded:!1,isFreestyleMode:!1,lastWidth:0,lastHeigh:0,handleResize:null,isInited:!1,isPlayMode:!1,isPlayModePaused:!1,playTimePassed:0,playTimeLastStep:0,playHandle:"",playStepInterval:33,objProgress:null,isFakeFullscreen:!1,thumbsType:null,isYoutubePresent:!1,isVimeoPresent:!1,isHtml5VideoPresent:!1,isSoundCloudPresent:!1,isWistiaPresent:!1,resizeDelay:100,isRunFirstTime:!0,originalOptions:{},funcCustomHeight:null};function s(A,k,i,s){var m="object"==typeof k;if(m&&(r.objCustomOptions=k),!0==r.isRunFirstTime){if(0==(c=jQuery(b=A)).length)return trace("div with id: "+b+" not found"),!1;d=c.parent(),function(){try{ugCheckForMinJQueryVersion()}catch(a){v(a.message)}"object"==typeof c.outerWidth()&&v("You have some buggy script. most chances jquery-ui.js that destroy jquery outerWidth, outerHeight functions. The gallery can't run. Please update jquery-ui.js to latest version."),setTimeout(function(){ugCheckForErrors(b,"cms")},5e3)}(),r.originalOptions=jQuery.extend({},q),m&&(q=jQuery.extend(q,k)),!0==q.gallery_enable_cache&&q.gallery_initial_catid&&S(q.gallery_initial_catid),a.setSizeClass();var p=c.children();E(p),F(),c.find("img").fadeTo(0,0).hide(),c.show(),z()}else if(a.destroy(),q=jQuery.extend({},r.originalOptions),o=-1,n=null,f=void 0,e=void 0,f=void 0,q=jQuery.extend(q,r.objCustomOptions),i){if(s&& !0==q.gallery_enable_cache&&S(s,i),"noitems"==i)return u("No items in this category",""),!1;c.html(i);var p=c.children();E(p),F(),c.children().fadeTo(0,0).hide(),c.show(),z()}!0==r.isRunFirstTime&& !0==q.gallery_enable_tabs&&(g=new UGTabs).init(a,q),!0==r.isRunFirstTime&& !0==q.gallery_enable_loadmore&&(h=new UGLoadMore).init(a,q),m&&w(r.objCustomOptions),x(),!0==q.gallery_shuffle&&a.shuffleItems(),function(c){if(c.hasOwnProperty("gallery_theme"))q.gallery_theme=c.gallery_theme;else{var e=q.gallery_theme;!1==g_ugFunctions.isThemeRegistered(e)&&(q.gallery_theme=g_ugFunctions.getFirstRegisteredTheme())}var f,b,d=(-1==(b=(0,q.gallery_theme)).indexOf("UGTheme_")&&(b="UGTheme_"+b),b);try{q.gallery_theme=window[d]}catch(g){}q.gallery_theme=window[d],(j=new q.gallery_theme).init(a,c)}(r.objCustomOptions),y(),C(),0==c.width()?l.waitForWidth(c,t):t()}function t(){a.setSizeClass(),!1==r.isFreestyleMode&& !0==q.gallery_preserve_ratio&&B(),j.run(),g&&r.isRunFirstTime&&g.run(),G(),R(),i>0&&a.selectItem(0),!0==q.gallery_autoplay&&a.startPlayMode(),r.isRunFirstTime=!1}function u(b,a){if(void 0===a)var a="<b>Unite Gallery Error: </b>";else a="<b>"+a+": </b>";b=a+b,c.children().remove(),c.html("<div class='ug-error-message-wrapper'><div class='ug-error-message'>"+b+"</div></div>"),c.show()}function v(a){throw u(a),new Error(a)}function w(){q.gallery_images_preload_type||(q.gallery_images_preload_type="minimal"),(void 0==q.gallery_min_height||q.gallery_height<q.gallery_min_height)&&(q.gallery_min_height=0),(void 0==q.gallery_min_width||q.gallery_width<q.gallery_min_width)&&(q.gallery_min_width=0)}function x(){if(!q.gallery_theme)throw new Error("The gallery can't run without theme");if(jQuery.isNumeric(q.gallery_height)&&q.gallery_height<q.gallery_min_height)throw new Error("The <b>gallery_height</b> option must be bigger then <b>gallery_min_height option</b>");if(q.gallery_width<q.gallery_min_width)throw new Error("The <b>gallery_width</b> option must be bigger then <b>gallery_min_width option</b>")}function y(){c.addClass("ug-gallery-wrapper"),c.append("<div class='ug-overlay-disabled' style='display:none'></div>"),a.setSizeClass()}function z(){c.children().remove()}function A(){var b=a.getSize();r.lastWidth=b.width,r.lastHeight=b.height}function B(){var b=a.getSize();if(b.width/b.height!=b.orig_ratio){var d=b.width/b.orig_ratio;(d=Math.round(d))<q.gallery_min_height&&(d=q.gallery_min_height),c.height(d)}}function C(){var a={"max-width":l.getCssSizeParam(q.gallery_width),"min-width":l.getCssSizeParam(q.gallery_min_width)};if(!1==r.isFreestyleMode){var b=l.getCssSizeParam(q.gallery_height);a.height=b}else a.overflow="visible";q.gallery_background_color&&(a["background-color"]=q.gallery_background_color),c.css(a)}function D(c){var u=a.isMobileMode(),g=c.prop("tagName").toLowerCase(),n="";if("a"==g){n=c.attr("href");var g=(c=c.children()).prop("tagName").toLowerCase()}var j=c.data("type");void 0==j&&(j="image");var b={};if(b.type=j,"img"==g){var k=c.data("lazyload-src");k&&""!=k&&(c.attr("src",k),jQuery.removeData(c,"lazyload-src"));var d=c.data("image"),e=c.data("thumb");void 0===d&&(d=null),void 0===e&&(e=null);var o=c.attr("src");d||(d=o),e||(e=o),e||(e=d),d||(d=e),b.urlThumb=e,b.urlImage=d,b.title=c.attr("alt"),b.objThumbImage=c,b.objThumbImage.attr("src",b.urlThumb)}else{if("image"==j)throw trace("Problematic gallery item found:"),trace(c),trace("Please look for some third party js script that could add this item to the gallery"),new Error("The item should not be image type");b.urlThumb=c.data("thumb"),b.title=c.data("title"),b.objThumbImage=null,b.urlImage=c.data("image")}if(!0==u){var l=c.data("thumb-mobile");void 0!==l&&""!=l&&(b.urlThumb=l,"img"==g&&c.attr("src",b.urlThumb));var m=c.data("image-mobile");void 0!==m&&""!=m&&(b.urlImage=m)}b.link=n,b.description=c.attr("title"),b.description||(b.description=c.data("description")),b.description||(b.description=""),b.isNewAdded=!1,b.isLoaded=!1,b.isThumbImageLoaded=!1,b.objPreloadImage=null,b.isBigImageLoadStarted=!1,b.isBigImageLoaded=!1,b.isBigImageLoadError=!1,b.imageWidth=0,b.imageHeight=0,b.thumbWidth=0,b.thumbHeight=0,b.thumbRatioByWidth=0,b.thumbRatioByHeight=0;var h=c.data("width"),i=c.data("height");h&&"number"==typeof h&&i&&"number"==typeof i&&(b.thumbWidth=h,b.thumbHeight=i,b.thumbRatioByWidth=h/i,b.thumbRatioByHeight=i/h),b.addHtml=null;var p=void 0==b.urlImage||""==b.urlImage,q=void 0==b.urlThumb||""==b.urlThumb;switch(b.type){case"youtube":if(b.videoid=c.data("videoid"),p||q){var s=g_ugYoutubeAPI.getVideoImages(b.videoid);p&&(b.urlImage=s.preview),q&&(b.urlThumb=s.thumb,"img"==g&&c.attr("src",b.urlThumb))}r.isYoutubePresent=!0;break;case"vimeo":b.videoid=c.data("videoid"),r.isVimeoPresent=!0;break;case"html5video":b.videoogv=c.data("videoogv"),b.videowebm=c.data("videowebm"),b.videomp4=c.data("videomp4"),r.isHtml5VideoPresent=!0;break;case"soundcloud":b.trackid=c.data("trackid"),r.isSoundCloudPresent=!0;break;case"wistia":b.videoid=c.data("videoid"),r.isWistiaPresent=!0;break;case"custom":var f=c.children("img");f.length&&(f=jQuery(f[0]),b.urlThumb=f.attr("src"),b.title=f.attr("alt"),b.objThumbImage=f);var t=c.children().not("img:first-child");t.length&&(b.addHtml=t.clone())}return b.objThumbImage&&(b.objThumbImage.removeAttr("data-description",""),b.objThumbImage.removeAttr("data-image",""),b.objThumbImage.removeAttr("data-thumb",""),b.objThumbImage.removeAttr("title","")),b}function E(c,d){if(!0!==d)m=[];else for(var a=0;a<i;a++)m[a].isNewAdded=!1;for(var a=0;a<c.length;a++){var e=jQuery(c[a]),b=D(e);numIndex=m.length,b.index=numIndex,!0===d&&(b.isNewAdded=!0),m.push(b)}i=m.length}function F(){r.isYoutubePresent&&g_ugYoutubeAPI.loadAPI(),r.isVimeoPresent&&g_ugVimeoAPI.loadAPI(),r.isHtml5VideoPresent&&g_ugHtml5MediaAPI.loadAPI(),r.isSoundCloudPresent&&g_ugSoundCloudAPI.loadAPI(),r.isWistiaPresent&&g_ugWistiaAPI.loadAPI()}function G(){if("visible"!=q.gallery_images_preload_type||e||(q.gallery_images_preload_type="minimal"),!0==r.isAllItemsPreloaded)return!0;switch(q.gallery_images_preload_type){default:case"minimal":break;case"all":jQuery(m).each(function(){H(this)});break;case"visible":jQuery(m).each(function(){var a=this;!0==e.isItemThumbVisible(a)&&H(a)})}}function H(b){if(!0==b.isBigImageLoadStarted|| !0==b.isBigImageLoaded|| !0==b.isBigImageLoadError)return!0;var c=b.urlImage;if(""==c|| void 0==c)return b.isBigImageLoadError=!0,!1;b.isBigImageLoadStarted=!0,b.objPreloadImage=jQuery("<img/>").attr("src",c),b.objPreloadImage.data("itemIndex",b.index),b.objPreloadImage.on("load",a.onItemBigImageLoaded),b.objPreloadImage.on("error",function(){var c=jQuery(this).data("itemIndex"),b=m[c];b.isBigImageLoadError=!0,b.isBigImageLoaded=!1;var d=jQuery(this).attr("src");console.log("Can't load image: "+d),k.trigger(a.events.ITEM_IMAGE_UPDATED,[c,b.urlImage]),b.objThumbImage.attr("src",b.urlThumb)}),I()}function I(){if(!0==r.isAllItemsPreloaded)return!1;for(var a in m)if(!1==m[a].isBigImageLoadStarted)return!1;r.isAllItemsPreloaded=!0}function J(b){!0==q.gallery_pause_on_mouseover&& !1==a.isFullScreen()&& !0==r.isPlayMode&&f&& !1==f.isSlideActionActive()&&a.pausePlaying()}function K(b){!0==q.gallery_pause_on_mouseover&& !0==r.isPlayMode&&f&& !1==f.isSlideActionActive()&& !1==f.isCurrentSlideLoadingImage()&&a.continuePlaying()}function L(b){var c=jQuery(b.target);if(c.is("textarea")||c.is("select")||c.is("input"))return!0;var d=b.charCode?b.charCode:b.keyCode?b.keyCode:b.which?b.which:0,e=!0;switch(d){case 39:a.nextItem();break;case 37:a.prevItem();break;default:e=!1}!0==e&&(b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation()),k.trigger(a.events.GALLERY_KEYPRESS,[d,b])}function M(){var b=a.getSize();if(0==b.width)return!0;a.setSizeClass();var b=a.getSize();if(b.width!=r.lastWidth|| !1==r.isFreestyleMode&&b.height!=r.lastHeight){var d=!1;if(r.funcCustomHeight){var e=r.funcCustomHeight(b);e&&(c.height(e),d=!0)}!1==d&& !0==q.gallery_preserve_ratio&& !1==r.isFreestyleMode&&B(),A(),k.trigger(a.events.SIZE_CHANGE)}}function N(a){"visible"==q.gallery_images_preload_type&& !1==r.isAllItemsPreloaded&&G()}function O(){var d=l.isFullScreen(),e=d?a.events.ENTER_FULLSCREEN:a.events.EXIT_FULLSCREEN;if(b!==l.getGlobalData("fullscreenID"))return!0;d?c.addClass("ug-fullscreen"):c.removeClass("ug-fullscreen"),k.trigger(e),M()}function P(c,b){!function(a){if(!0==a.isBigImageLoadStarted|| !0==a.isBigImageLoaded|| !0==a.isBigImageLoadError)return!1;switch(q.gallery_images_preload_type){default:case"minimal":break;case"all":H(a);break;case"visible":!0==e.isItemThumbVisible(a)&&H(a)}}(a.getItem(b))}function Q(){!0==a.isPlayMode()&&a.continuePlaying()}function R(){if(c.on("dragstart",function(a){a.preventDefault()}),k.on(a.events.ITEM_IMAGE_UPDATED,P),e)switch(r.thumbsType){case"strip":jQuery(e).on(e.events.STRIP_MOVE,N);break;case"grid":jQuery(e).on(e.events.PANE_CHANGE,N)}"advance"==q.gallery_mousewheel_role&& !1==r.isFreestyleMode&&c.on("mousewheel",a.onGalleryMouseWheel),A(),jQuery(window).resize(function(){c.css("width","auto"),l.whenContiniousEventOver("gallery_resize",M,r.resizeDelay)}),setTimeout(function(){setInterval(M,2e3)},1e4),l.addFullScreenChangeEvent(O),f&&(jQuery(f).on(f.events.ITEM_CHANGED,function(){var b=f.getCurrentItemIndex();-1!=b&&a.selectItem(b)}),!0==q.gallery_pause_on_mouseover&&(f.getElement().hover(J,K),k.on(a.events.ENTER_FULLSCREEN,function(){K()})),T(f,f.events.ACTION_START,a.events.SLIDER_ACTION_START),T(f,f.events.ACTION_END,a.events.SLIDER_ACTION_END),jQuery(f).on(f.events.CURRENTSLIDE_LOAD_END,Q)),!0==q.gallery_control_keyboard&&jQuery(document).keydown(L)}function S(d,b){if(b){var a=b;"noitems"!=a&&(a=jQuery(b).clone())}else var a=c.children().clone();p[d]=a}function T(a,b,c){jQuery(a).on(b,function(a){k.trigger(c,[this])})}function U(){var b=jQuery.now(),c=b-r.playTimeLastStep;r.playTimeLastStep=b;var d=a.isGalleryVisible();if(!1==d)return!1;if(r.playTimePassed+=c,r.objProgress){var e=r.playTimePassed/q.gallery_play_interval;r.objProgress.setProgress(e)}r.playTimePassed>=q.gallery_play_interval&&(a.nextItem(),r.playTimePassed=0)}this.onItemBigImageLoaded=function(d,a){if(!a)var a=jQuery(this);var b=m[a.data("itemIndex")];b.isBigImageLoaded=!0;var c=l.getImageOriginalSize(a);b.imageWidth=c.width,b.imageHeight=c.height},this.checkFillImageSize=function(b,a){if(!a){var c=b.data("itemIndex");if(void 0===c)throw new Error("Wrong image given to gallery.checkFillImageSize");var a=m[c]}var d=l.getImageOriginalSize(b);a.imageWidth=d.width,a.imageHeight=d.height},this.setFreestyleMode=function(){r.isFreestyleMode=!0},this.attachThumbsPanel=function(a,b){r.thumbsType=a,e=b},this.initSlider=function(b,c){if(!b)var b={};b=jQuery.extend(r.objCustomOptions,b),(f=new UGSlider).init(a,b,c)},this.onGalleryMouseWheel=function(b,c,d,e){b.preventDefault(),c>0?a.prevItem():a.nextItem()},this.destroy=function(){if(c.off("dragstart"),k.off(a.events.ITEM_IMAGE_UPDATED),e)switch(r.thumbsType){case"strip":jQuery(e).off(e.events.STRIP_MOVE);break;case"grid":jQuery(e).off(e.events.PANE_CHANGE)}if(c.off("mousewheel"),jQuery(window).off("resize"),l.destroyFullScreenChangeEvent(),f){jQuery(f).off(f.events.ITEM_CHANGED);var b=f.getElement();b.off("mouseenter"),b.off("mouseleave"),k.off(a.events.ENTER_FULLSCREEN),jQuery(f).off(f.events.ACTION_START),jQuery(f).off(f.events.ACTION_END),jQuery(f).off(f.events.CURRENTSLIDE_LOAD_END)}!0==q.gallery_control_keyboard&&jQuery(document).off("keydown"),j&&"function"==typeof j.destroy&&j.destroy(),c.html("")},this.getArrItems=function(){return m},this.getObjects=function(){return{g_galleryID:b,g_objWrapper:c,g_objThumbs:e,g_objSlider:f,g_options:q,g_arrItems:m,g_numItems:i}},this.getObjSlider=function(){return f},this.getItem=function(a){if(a<0||a>=i)throw new Error("item with index: "+a+" not found");return m[a]},this.getWidth=function(){return a.getSize().width},this.getHeight=function(){return a.getSize().height},this.getSize=function(){var a=l.getElementSize(c);return a.orig_width=q.gallery_width,a.orig_height=q.gallery_height,a.orig_ratio=a.orig_width/a.orig_height,a},this.getGalleryID=function(){return b.replace("#","")},this.getNextItem=function(a,c){"object"==typeof a&&(a=a.index);var b=a+1;if(!0!==c&&1==i)return null;if(b>=i){if(!0!=q.gallery_carousel&& !0!==c)return null;b=0}return m[b]},this.getPrevItem=function(a){"object"==typeof a&&(a=a.index);var b=a-1;if(b<0){if(!0!=q.gallery_carousel&& !0!==forceCarousel)return null;b=i-1}return m[b]},this.getSelectedItem=function(){return n},this.getSelectedItemIndex=function(){return o},this.getNumItems=function(){return i},this.isLastItem=function(){return o==i-1},this.isFirstItem=function(){return 0==o},this.getOptions=function(){return q},this.getElement=function(){return c},this.___________SET_CONTROLS___________=function(){},this.setNextButton=function(b){b.data("ug-button",!0),l.setButtonOnClick(b,a.nextItem)},this.setPrevButton=function(b){b.data("ug-button",!0),l.setButtonOnClick(b,a.prevItem)},this.setFullScreenToggleButton=function(b){b.data("ug-button",!0),l.setButtonOnTap(b,a.toggleFullscreen),k.on(a.events.ENTER_FULLSCREEN,function(){b.addClass("ug-fullscreenmode")}),k.on(a.events.EXIT_FULLSCREEN,function(){b.removeClass("ug-fullscreenmode")})},this.destroyFullscreenButton=function(b){l.destroyButton(b),k.off(a.events.ENTER_FULLSCREEN),k.off(a.events.EXIT_FULLSCREEN)},this.setPlayButton=function(b){b.data("ug-button",!0),l.setButtonOnClick(b,a.togglePlayMode),k.on(a.events.START_PLAY,function(){b.addClass("ug-stop-mode")}),k.on(a.events.STOP_PLAY,function(){b.removeClass("ug-stop-mode")})},this.destroyPlayButton=function(b){l.destroyButton(b),k.off(a.events.START_PLAY),k.off(a.events.STOP_PLAY)},this.setProgressIndicator=function(a){r.objProgress=a},this.setTextContainers=function(b,c){k.on(a.events.ITEM_CHANGE,function(){var d=a.getSelectedItem();b.html(d.title),c.html(d.description)})},this.showDisabledOverlay=function(){c.children(".ug-overlay-disabled").show()},this.hideDisabledOverlay=function(){c.children(".ug-overlay-disabled").hide()},this.___________END_SET_CONTROLS___________=function(){},this.___________PLAY_MODE___________=function(){},this.startPlayMode=function(){if(r.isPlayMode=!0,r.isPlayModePaused=!1,r.playTimePassed=0,r.playTimeLastStep=jQuery.now(),r.playHandle=setInterval(U,r.playStepInterval),r.objProgress){var b=r.objProgress.getElement();r.objProgress.setProgress(0),b.show()}k.trigger(a.events.START_PLAY),f&& !0==f.isCurrentSlideLoadingImage()&&a.pausePlaying()},this.resetPlaying=function(){if(!1==r.isPlayMode)return!0;r.playTimePassed=0,r.playTimeLastStep=jQuery.now()},this.pausePlaying=function(){if(!0==r.isPlayModePaused)return!0;r.isPlayModePaused=!0,clearInterval(r.playHandle),k.trigger(a.events.PAUSE_PLAYING)},this.continuePlaying=function(){if(!1==r.isPlayModePaused)return!0;r.isPlayModePaused=!1,r.playTimeLastStep=jQuery.now(),r.playHandle=setInterval(U,r.playStepInterval)},this.stopPlayMode=function(){r.isPlayMode=!1,clearInterval(r.playHandle),r.playTimePassed=0,r.objProgress&&r.objProgress.getElement().hide(),k.trigger(a.events.STOP_PLAY)},this.isPlayMode=function(){return r.isPlayMode},this.togglePlayMode=function(){!1==a.isPlayMode()?a.startPlayMode():a.stopPlayMode()},this.___________GENERAL_EXTERNAL___________=function(){},this.shuffleItems=function(){for(var a in m=l.arrayShuffle(m))m[a].index=parseInt(a)},this.setOptions=function(a){q=jQuery.extend(q,a)},this.selectItem=function(b,d){"number"==typeof b&&(b=a.getItem(b));var c=b.index;if(c==o)return!0;(function(){if(null==n)return!0;e&&e.setThumbUnselected(n.objThumbWrapper),n=null,o=-1})(),n=b,o=c,k.trigger(a.events.ITEM_CHANGE,[b,d]),!0==r.isPlayMode&&(a.resetPlaying(),!0==f.isCurrentSlideLoadingImage()&&a.pausePlaying())},this.nextItem=function(){var b=o+1;if(0==i|| !1==q.gallery_carousel&&b>=i)return!0;b>=i&&(b=0),a.selectItem(b,"next")},this.prevItem=function(){var b=o-1;if(-1==o&&(b=0),0==i|| !1==q.gallery_carousel&&b<0)return!0;b<0&&(b=i-1),a.selectItem(b,"prev")},this.isFullScreen=function(){return!0==r.isFakeFullscreen|| !0==l.isFullScreen()},this.isFakeFullscreen=function(){return r.isFakeFullscreen},this.toFullScreen=function(){l.setGlobalData("fullscreenID",b);var d=c.get(0);!1==l.toFullscreen(d)&&(jQuery("body").addClass("ug-body-fullscreen"),c.addClass("ug-fake-fullscreen"),r.isFakeFullscreen=!0,k.trigger(a.events.ENTER_FULLSCREEN),k.trigger(a.events.SIZE_CHANGE))},this.exitFullScreen=function(){!0==r.isFakeFullscreen?(jQuery("body").removeClass("ug-body-fullscreen"),c.removeClass("ug-fake-fullscreen"),r.isFakeFullscreen=!1,k.trigger(a.events.EXIT_FULLSCREEN),k.trigger(a.events.SIZE_CHANGE)):l.exitFullscreen()},this.toggleFullscreen=function(){!1==a.isFullScreen()?a.toFullScreen():a.exitFullScreen()},this.resize=function(d,a,b){c.css("width","auto"),c.css("max-width",d+"px"),a&&c.height(a),b|| !0===b||M()},this.setSizeClass=function(e,b){if(!e)var f,e=c;if(!b)var b=a.getSize().width;if(0==b)var b=jQuery(window).width();var d="";if(b<=480?d="ug-under-480":b<=780?d="ug-under-780":b<960&&(d="ug-under-960"),!0==e.hasClass(d))return!0;(f=e)||(f=c),f.removeClass("ug-under-480"),f.removeClass("ug-under-780"),f.removeClass("ug-under-960"),""!=d&&e.addClass(d)},this.isMobileMode=function(){return!!c.hasClass("ug-under-480")},this.isSmallWindow=function(){var a=jQuery(window).width();return!a||a<=480},this.isGalleryVisible=function(){return c.is(":visible")},this.changeItems=function(a,c){if(!a)var a="noitems";s(b,"nochange",a,c)},this.addItems=function(b){if(!b||0==b.length)return!1;var a=c.children(".ug-newitems-wrapper");0==a.length&&c.append("<div class='ug-newitems-wrapper' style='display:none'></div>"),(a=c.children(".ug-newitems-wrapper")).append(b);var d=jQuery(a.children());if(E(d,!0),F(),!j||"function"!=typeof j.addItems)throw new Error("addItems function not found in the theme");a.remove(),j.addItems()},this.getNewAddedItemsIndexes=function(){var a=[];return jQuery.each(m,function(b,c){!0==c.isNewAdded&&a.push(b)}),a},this.showErrorMessageReplaceGallery=function(a){u(a)},this.setFuncCustomHeight=function(a){r.funcCustomHeight=a},this.__________EXTERNAL_EVENTS_______=function(){},this.triggerEvent=function(b,a){a?("array"!=jQuery.type(a)&&(a=[a]),k.trigger(b,a)):k.trigger(b)},this.onEvent=function(a,b){k.on(a,b)},this.destroyEvent=function(a){k.off(a)},this.__________AJAX_REQUEST_______=function(){},this.ajaxRequest=function(e,a,c,f){if(!c||"function"!=typeof c)throw new Error("ajaxRequest error: success function should be passed");var d=q.gallery_urlajax;if(!d||""==d)throw new Error("ajaxRequest error: Ajax url don't passed");if(void 0===a)var a={};jQuery.ajax({type:"post",url:q.gallery_urlajax,dataType:"json",data:{action:"unitegallery_ajax_action",client_action:e,galleryID:b,data:a},success:function(a){if(!a)throw new Error("Empty ajax response!");if(-1==a||0===a|| void 0===a.success)throw new Error("ajax error!!!");if(!1==a.success)return u(a.message,"ajax error"),!1;c(a)},error:function(a,b,c){console.log("Ajax Error!!! "+b),responseText=a.responseText,f&&"function"==typeof f?f(responseText):trace(responseText)}})},this.requestNewItems=function(c,e,b){var d=q.gallery_enable_cache;if(b||(b=c),!0==e&&(d=!1),!0==d&&p.hasOwnProperty(b)){var f=p[b];a.changeItems(f,b)}else k.trigger(a.events.GALLERY_BEFORE_REQUEST_ITEMS),a.ajaxRequest("front_get_cat_items",{catid:c},function(c){var d=c.html;a.changeItems(d,b)})},this.run=function(d,b){if(q.gallery_debug_errors,b&&b.hasOwnProperty("gallery_debug_errors")&&(q.gallery_debug_errors=b.gallery_debug_errors),!0==q.gallery_debug_errors)try{s(d,b)}catch(a){if("object"==typeof a){var c=a.message,e=a.lineNumber,f=a.fileName,g=a.stack;c+=" <br><br> in file: "+f,c+=" <b> line "+e+"</b>",trace(a)}else var c=a;u(c=c.replace("Error:",""))}else s(d,b)}}function UGLightbox(){var b,c,d,e,f,g,h,i,j=this,k=jQuery(this),l=new UniteGalleryMain,m=new UGSlider,n=new UGFunctions,o=new UGTextPanel,p={lightbox_type:"wide",lightbox_show_textpanel:!0,lightbox_textpanel_width:550,lightbox_hide_arrows_onvideoplay:!0,lightbox_arrows_position:"sides",lightbox_arrows_offset:10,lightbox_arrows_inside_offset:10,lightbox_arrows_inside_alwayson:!1,lightbox_overlay_color:null,lightbox_overlay_opacity:1,lightbox_top_panel_opacity:null,lightbox_show_numbers:!0,lightbox_numbers_size:null,lightbox_numbers_color:null,lightbox_numbers_padding_top:null,lightbox_numbers_padding_right:null,lightbox_compact_closebutton_offsetx:1,lightbox_compact_closebutton_offsety:1,lightbox_close_on_emptyspace:!0};this.events={LIGHTBOX_INIT:"lightbox_init"};var a={topPanelHeight:44,initTextPanelHeight:26,isOpened:!1,isRightNowOpened:!1,putSlider:!0,isCompact:!1,fadeDuration:300,positionFrom:null,textPanelTop:null,textPanelLeft:null,isArrowsInside:!1,isArrowsOnHoverMode:!1,lastMouseX:null,lastMouseY:null,originalOptions:null,isSliderChangedOnce:!1,isTopPanelEnabled:!0},q={lightbox_slider_controls_always_on:!0,lightbox_slider_enable_bullets:!1,lightbox_slider_enable_arrows:!1,lightbox_slider_enable_progress_indicator:!1,lightbox_slider_enable_play_button:!1,lightbox_slider_enable_fullscreen_button:!1,lightbox_slider_enable_zoom_panel:!1,lightbox_slider_enable_text_panel:!1,lightbox_slider_scale_mode_media:"down",lightbox_slider_scale_mode:"down",lightbox_slider_loader_type:3,lightbox_slider_loader_color:"black",lightbox_slider_transition:"fade",lightbox_slider_image_padding_top:a.topPanelHeight,lightbox_slider_image_padding_bottom:0,lightbox_slider_video_padding_top:0,lightbox_slider_video_padding_bottom:0,lightbox_textpanel_align:"middle",lightbox_textpanel_padding_top:5,lightbox_textpanel_padding_bottom:5,slider_video_constantsize:!1,lightbox_slider_image_border:!1,lightbox_textpanel_enable_title:!0,lightbox_textpanel_enable_description:!1,lightbox_textpanel_desc_style_as_title:!0,lightbox_textpanel_enable_bg:!1,video_enable_closebutton:!1,lightbox_slider_video_enable_closebutton:!1,video_youtube_showinfo:!1,lightbox_slider_enable_links:!1},r={lightbox_overlay_opacity:.6,lightbox_slider_image_border:!0,lightbox_slider_image_shadow:!0,lightbox_slider_image_padding_top:30,lightbox_slider_image_padding_bottom:30,slider_video_constantsize:!0,lightbox_textpanel_align:"bottom",lightbox_textpanel_title_text_align:"left",lightbox_textpanel_desc_text_align:"left",lightbox_textpanel_padding_left:10,lightbox_textpanel_padding_right:10};function s(){!0==a.isCompact&& !0==p.lightbox_show_textpanel&&(p.lightbox_slider_image_padding_bottom=a.initTextPanelHeight),!0==a.isCompact&&"inside"==p.lightbox_arrows_position&&(a.isArrowsInside=!0),!0==a.isArrowsInside&& !1==p.lightbox_arrows_inside_alwayson&&(a.isArrowsOnHoverMode=!0),!1==p.lightbox_show_textpanel&&(a.isTopPanelEnabled=!1,a.topPanelHeight=0,p.lightbox_slider_image_padding_top=0)}function t(a){if(!m)return!0;var b={slider_image_padding_top:a};m.setOptions(b),m.refreshSlideItems()}function u(f){if(!b||!o)return!1;var d=b.height();if(0==d|| !1==b.is(":visible"))return!1;var c=d,e=o.getSize().height;d!=a.topPanelHeight&&(c=a.topPanelHeight),e>c&&(c=e),d!=c&&(b.height(c),m&& !1==m.isAnimating()&&t(c))}function v(b){if(!1==a.isOpened||!o||!m)return!1;var f=n.getElementSize(d),c=o.getSize();if(0==c.width||c.height>120)return!1;if(!b)var g=m.getSlideImage(),b=n.getElementSize(g);if(0==b.height||0==b.width||b.bottom+c.height<f.height)return!1;var h=m.getOptions(),e=c.height;if(e!=h.slider_image_padding_bottom){var i={slider_image_padding_bottom:e};if(!1==m.isAnimating())return m.setOptions(i),m.refreshSlideItems(),!0}return!1}function w(c){n.getElementSize(d);var g=m.getSlideImage(),b=n.getElementSize(g);if(0==b.width)return!1;a.textPanelLeft=b.left,a.textPanelTop=b.bottom;var e=b.width;if(i){var f=n.getElementSize(i);e-=f.width;var h=b.right-f.width;n.placeElement(i,h,a.textPanelTop)}o&&(o.show(),o.refresh(!0,!0,e),function(b,d){if(!b)var c=m.getSlideImage(),b=n.getElementSize(c);a.textPanelTop=b.bottom}(b)),!1==v(b)&&(a.positionFrom="handleCompactTextpanelSizes",o&&(o.positionPanel(a.textPanelTop,a.textPanelLeft),!0===c&&(c(),L())))}function x(){return!1==m.isCurrentSlideType("image")|| !0==m.isCurrentImageInPlace()}function y(l,j){if(!1==a.isArrowsInside||!f)return!1;var k=x();if(f.show(),g.show(),a.positionFrom="positionArrowsInside",!0==a.isArrowsOnHoverMode&& !0==k&& !1==E()&&F(!0),!1==k)var d=n.getElementRelativePos(f,"left",p.lightbox_arrows_offset),b=n.getElementRelativePos(f,"middle"),e=n.getElementRelativePos(g,"right",p.lightbox_arrows_offset),h=b;else{var c=m.getSlideImage(),i=n.getElementSize(c);n.getElementSize(m.getElement());var d=n.getElementRelativePos(f,"left",0,c)+i.left+p.lightbox_arrows_inside_offset,b=n.getElementRelativePos(f,"middle",0,c)+i.top,e=n.getElementRelativePos(f,"right",0,c)+i.left-p.lightbox_arrows_inside_offset,h=b}if(!0===j){var o={left:d,top:b},q={left:e,top:h};f.stop().animate(o,{duration:a.fadeDuration}),g.stop().animate(q,{duration:a.fadeDuration})}else f.stop(),g.stop(),n.placeElement(f,d,b),n.placeElement(g,e,h);!0==l&&G(j)}function z(k,g){a.positionFrom=null;var l=x(),f=n.getElementRelativePos(h,"right",2,d);if(!1==l)var b=2,c=f;else{var o=m.getSlideImage(),i=n.getElementSize(o),e=n.getElementSize(m.getElement()),j=n.getElementSize(h);e.top==e.height&&(e.top=0);var c=e.left+i.right-j.width/2+p.lightbox_compact_closebutton_offsetx,b=e.top+i.top-j.height/2-p.lightbox_compact_closebutton_offsety;b<2&&(b=2),c>f&&(c=f)}if(!0===g){var q={left:c,top:b};h.stop().animate(q,{duration:a.fadeDuration})}else h.stop(),n.placeElement(h,c,b);!0===k&&H(g)}function A(){h&&h.stop().fadeTo(a.fadeDuration,0),C(),D(),a.positionFrom="hideCompactElements",!0==a.isArrowsInside&&F()}function B(){var c=n.getElementSize(d);b&&n.setElementSizeAndPosition(b,0,0,c.width,a.topPanelHeight),f&& !1==a.isArrowsInside&&(!0==p.lightbox_hide_arrows_onvideoplay&&(f.show(),g.show()),n.placeElement(f,"left","middle",p.lightbox_arrows_offset),n.placeElement(g,"right","middle",p.lightbox_arrows_offset)),!1==a.isCompact&&n.placeElement(h,"right","top",2,2),o&&((a.positionFrom="positionElements",!1==a.isCompact)?(k=c,l={},(q=p.lightbox_textpanel_width)>k.width-47-40?(l.textpanel_padding_left=47,l.textpanel_padding_right=40,l.textpanel_title_text_align="center",l.textpanel_desc_text_align="center"):(l.textpanel_padding_left=Math.floor((k.width-q)/2),l.textpanel_padding_right=l.textpanel_padding_left,l.textpanel_title_text_align="left",l.textpanel_desc_text_align="left",p.lightbox_textpanel_title_text_align&&(l.textpanel_title_text_align=p.lightbox_textpanel_desc_text_align),p.lightbox_textpanel_desc_text_align&&(l.textpanel_desc_text_align=p.lightbox_textpanel_desc_text_align)),o.setOptions(l),o.refresh(!0,!0),u("positionTextPanelWide"),o.positionPanel()):(K(),L()));var e=c.width,i=c.height;if(m){if(b){var k,l,q,j={slider_image_padding_top:b.height()};m.setOptions(j)}m.setSize(e,i),m.setPosition(0,0)}}function C(){o&&o.getElement().stop().fadeTo(a.fadeDuration,0)}function D(){i&&i.stop().fadeTo(a.fadeDuration,0)}function E(){if(!a.lastMouseX)return!0;var b={pageX:a.lastMouseX,pageY:a.lastMouseY};return m.isMouseInsideSlideImage(b)}function F(b,c){return!!f&&(!0==a.isArrowsOnHoverMode&& !1===c?(E(),!0):void(!0===b?(f.stop().fadeTo(0,0),g.stop().fadeTo(0,0)):(f.stop().fadeTo(a.fadeDuration,0),g.stop().fadeTo(a.fadeDuration,0))))}function G(b,c){return!!f&&(!0==a.isArrowsOnHoverMode&& !0!==c&& !0==x()|| !0==m.isSwiping()||void(!0!==b&&(f.stop(),g.stop()),f.fadeTo(a.fadeDuration,1),g.fadeTo(a.fadeDuration,1)))}function H(b){!0!==b&&h.stop(),h.fadeTo(a.fadeDuration,1)}function I(a){if(!o)return!1;if(!a)var a=m.getCurrentItem();o.setTextPlain(a.title,a.description)}function J(a){if(!i)return!1;if(!a)var a=m.getCurrentItem();var b=l.getNumItems(),c=a.index+1;i.html(c+" / "+b)}function K(){if(!o)return!1;o.getElement().show().stop().fadeTo(a.fadeDuration,1)}function L(){i&&i.stop().fadeTo(a.fadeDuration,1)}function M(){if(!1==a.isCompact)return!0;A()}function N(){if(!1==a.isCompact)return!0;a.positionFrom="onZoomChange",z(!1,!0),y(!1,!0),!0==a.isCompact&&(!1==(m.isCurrentSlideType("image")&& !0==m.isCurrentImageInPlace())?(C(),D()):(a.positionFrom="onZoomChange",K(),L()))}function O(){if(!1==a.isCompact)return!0;a.positionFrom="onSliderAfterReturn",z(!0),y(!0),!1==v()&&w(),K(),L()}function P(c,b){if(b=jQuery(b),!1==a.isCompact|| !1==m.isSlideCurrent(b))return!0;a.positionFrom="onSliderAfterPutImage",z(!0),y(!0),w()}function Q(){var d=m.getOptions().slider_image_padding_top;if(b){var c=b.height();c!=d&&t(c)}!0==a.isCompact&&(I(),J(),a.positionFrom="onSliderTransitionEnd",z(!0),y(!0),!1==m.isSlideActionActive()&& !1==v()&&w(),K(),L())}function R(c,b){!1==a.isCompact?(i&&J(b),o&&(I(b),!1==a.isRightNowOpened&&(o.positionElements(!1),u("onchange"),o.positionPanel()))):!1==m.isAnimating()&&(o&&I(b),i&&J(b)),!1==a.isSliderChangedOnce&&(a.isSliderChangedOnce=!0,k.trigger(j.events.LIGHTBOX_INIT))}function S(c,b){return!!("image"!=m.getSlideType()&& !1==a.isCompact&&m.isSlideActionActive())||(!0==m.isPreloading()?(j.close("slider"),!0):void(!0==p.lightbox_close_on_emptyspace&& !1==m.isMouseInsideSlideImage(b)&&j.close("slider_inside")))}function T(){B()}function U(){b?function(){if(!b)return!1;b.hide()}():i&&i.hide(),f&& !0==p.lightbox_hide_arrows_onvideoplay&&(f.hide(),g.hide())}function V(){b?(function(){if(!b)return!1;b.show()}(),u("onStopVideo")):i&&i.show(),f&& !0==p.lightbox_hide_arrows_onvideoplay&&(f.show(),g.show())}function W(e,c,d){var b=!1;switch(c){case 27:!0==a.isOpened&&j.close("keypress");break;case 38:case 40:case 33:case 34:b=!0}!0==a.isOpened&& !0==b&&d.preventDefault()}function X(){!0==a.isArrowsOnHoverMode&&G(!1,!0)}function Y(b){a.positionFrom="hideCompactElements",!0==a.isArrowsOnHoverMode&& !0==x()&&F(!1,!0)}function Z(b){a.lastMouseX=b.pageX,a.lastMouseY=b.pageY,!0==(!f|| !1==f.is(":visible")||1!=f.css("opacity"))&&E()&& !1==m.isAnimating()&&(a.positionFrom="onMouseMove",f&& !1==f.is(":animated")&&G(!1,!0))}function _(b,c,d,e){if(!1==a.isOpened)return!0;switch(p.gallery_mousewheel_role){default:case"zoom":"image"!=m.getSlideType()&&b.preventDefault();break;case"none":b.preventDefault();break;case"advance":l.onGalleryMouseWheel(b,c,d,e)}}this.destroy=function(){if(jQuery(document).unbind("mousemove"),e.off("touchstart"),e.off("touchend"),h.off("click"),c.off(l.events.ITEM_CHANGE),m){jQuery(m).off(m.events.TRANSITION_END),jQuery(m).off(m.events.CLICK),jQuery(m).off(m.events.START_DRAG),jQuery(m).off(m.events.TRANSITION_START),jQuery(m).off(m.events.AFTER_DRAG_CHANGE),jQuery(m).off(m.events.AFTER_RETURN);var a=m.getVideoObject();jQuery(a).off(a.events.PLAY_START),jQuery(a).off(a.events.PLAY_STOP),jQuery(m).on(m.events.IMAGE_MOUSEENTER,X),jQuery(m).on(m.events.IMAGE_MOUSELEAVE,Y),m.destroy()}jQuery(window).unbind("resize"),c.off(l.events.GALLERY_KEYPRESS,W),d.off("mousewheel"),d.remove()},this.open=function(j){var b=l.getItem(j);a.isOpened=!0,a.isRightNowOpened=!0,setTimeout(function(){a.isRightNowOpened=!1},100),m&&m.setItem(b,"lightbox_open"),o&&o.setTextPlain(b.title,b.description),e.stop().fadeTo(0,0),d.show(),d.fadeTo(0,1),e.stop().fadeTo(a.fadeDuration,p.lightbox_overlay_opacity),B(),!0==a.isCompact&&(!0==m.isPreloading()?(h&&h.hide(),f&& !0==a.isArrowsInside&&(f.hide(),g.hide()),i&&i.hide(),o&&o.hide()):!0==a.isArrowsInside&&(f.hide(),g.hide())),m&&m.startSlideAction(),c.trigger(l.events.OPEN_LIGHTBOX,b)},this.close=function(b){a.isOpened=!1,!0==a.isCompact&&A(),m&&m.stopSlideAction(),"image"!=m.getSlideType()?d.hide():d.fadeTo(a.fadeDuration,0,function(){d.hide()}),c.trigger(l.events.CLOSE_LIGHTBOX)},this.init=function(e,f){var b,d;b=e,d=f,l=b,c=jQuery(b),p=jQuery.extend(p,q),p=jQuery.extend(p,d),a.originalOptions=jQuery.extend({},p),"compact"==p.lightbox_type&&(a.isCompact=!0,p=jQuery.extend(p,r),p=jQuery.extend(p,d)),s(),!0==a.putSlider?(l.initSlider(p,"lightbox"),m=(g_objects=b.getObjects()).g_objSlider):m=null,!0==p.lightbox_show_textpanel?o.init(l,p,"lightbox"):o=null},this.putHtml=function(){var c,j,k;l.isSmallWindow()&& !0==a.isCompact&&(a.isCompact=!1,s(),a.isArrowsInside=!1,a.isArrowsOnHoverMode=!1,(p=jQuery.extend({},a.originalOptions)).lightbox_arrows_position="sides",m.setOptions(p)),c="",j="",!0==a.isCompact&&(j=" ug-lightbox-compact"),c+="<div class='ug-gallery-wrapper ug-lightbox"+j+"'>",c+="<div class='ug-lightbox-overlay'></div>",!1==a.isCompact&&a.isTopPanelEnabled?(c+="<div class='ug-lightbox-top-panel'>",c+="<div class='ug-lightbox-top-panel-overlay'></div>",p.lightbox_show_numbers&&(c+="<div class='ug-lightbox-numbers'></div>"),c+="</div>"):p.lightbox_show_numbers&&(c+="<div class='ug-lightbox-numbers'></div>"),c+="<div class='ug-lightbox-button-close'></div>",k=l.getNumItems(),$hide="hidden",k>1&&($hide=""),c+="<div class='ug-lightbox-arrow-left "+$hide+"'></div>",c+="<div class='ug-lightbox-arrow-right "+$hide+"'></div>",c+="</div>",d=jQuery(c),jQuery("body").append(d),m&&m.setHtml(d),e=d.children(".ug-lightbox-overlay"),!1==a.isCompact&& !0==a.isTopPanelEnabled&&0==(b=d.children(".ug-lightbox-top-panel")).length&&(b=null),h=d.find(".ug-lightbox-button-close"),p.lightbox_show_numbers&&(i=d.find(".ug-lightbox-numbers")),f=d.children(".ug-lightbox-arrow-left"),g=d.children(".ug-lightbox-arrow-right"),o&&(b?o.appendHTML(b):o.appendHTML(d))},this.run=function(){(function(){if(null!==p.lightbox_overlay_color&&e.css("background-color",p.lightbox_overlay_color),null!==p.lightbox_overlay_opacity&&e.fadeTo(0,p.lightbox_overlay_opacity),b&&null!==p.lightbox_top_panel_opacity&&b.children(".ug-lightbox-top-panel-overlay").fadeTo(0,p.lightbox_top_panel_opacity),i){var a={};null!==p.lightbox_numbers_size&&(a["font-size"]=p.lightbox_numbers_size+"px"),p.lightbox_numbers_color&&(a.color=p.lightbox_numbers_color),null!==p.lightbox_numbers_padding_right&&(a["padding-right"]=p.lightbox_numbers_padding_right+"px"),null!==p.lightbox_numbers_padding_top&&(a["padding-top"]=p.lightbox_numbers_padding_top+"px"),i.css(a)}})(),m&&m.run(),function(){if(e.on("touchstart",function(a){a.preventDefault()}),e.on("touchend",function(a){j.close("overlay")}),n.addClassOnHover(g,"ug-arrow-hover"),n.addClassOnHover(f,"ug-arrow-hover"),n.addClassOnHover(h),l.setNextButton(g),l.setPrevButton(f),h.click(function(){j.close("button")}),c.on(l.events.ITEM_CHANGE,R),m){jQuery(m).on(m.events.TRANSITION_END,Q),jQuery(m).on(m.events.CLICK,S);var b=m.getVideoObject();jQuery(b).on(b.events.PLAY_START,U),jQuery(b).on(b.events.PLAY_STOP,V),jQuery(m).on(m.events.START_DRAG,M),jQuery(m).on(m.events.TRANSITION_START,M),jQuery(m).on(m.events.AFTER_DRAG_CHANGE,O),jQuery(m).on(m.events.AFTER_RETURN,O),jQuery(m).on(m.events.AFTER_PUT_IMAGE,P),jQuery(m).on(m.events.ZOOM_CHANGE,N),jQuery(m).on(m.events.IMAGE_MOUSEENTER,X),jQuery(m).on(m.events.IMAGE_MOUSELEAVE,Y)}jQuery(window).resize(function(){if(!1==a.isOpened)return!0;n.whenContiniousEventOver("lightbox_resize",T,100)}),c.on(l.events.GALLERY_KEYPRESS,W),!0==a.isArrowsOnHoverMode&&jQuery(document).bind("mousemove",Z),d.on("mousewheel",_)}()}}function UGCarousel(){var a,b,c,d,e,f=this,g=jQuery(this),h=new UniteGalleryMain,i=new UGFunctions,j=new UGTileDesign,k=new UGThumbsGeneral,l={carousel_padding:8,carousel_space_between_tiles:20,carousel_navigation_numtiles:3,carousel_scroll_duration:500,carousel_scroll_easing:"easeOutCubic",carousel_autoplay:!0,carousel_autoplay_timeout:3e3,carousel_autoplay_direction:"right",carousel_autoplay_pause_onhover:!0,carousel_vertical_scroll_ondrag:!1};this.events={START_PLAY:"carousel_start_play",PAUSE_PLAY:"carousel_pause_play",STOP_PLAY:"carousel_stop_play"};var m={eventSizeChange:"thumb_size_change",isFirstTimeRun:!0,carouselMaxWidth:null,tileWidth:0,initTileWidth:0,initTileHeight:0,sideSpace:1500,spaceActionSize:500,numCurrent:0,touchActive:!1,startInnerPos:0,lastTime:0,startTime:0,startMousePos:0,lastMousePos:0,scrollShortDuration:200,scrollShortEasing:"easeOutQuad",handle:null,isPlayMode:!1,isPaused:!1,storedEventID:"carousel"};function n(a,b){if(!b)var b=m.initTileHeight/m.initTileWidth*a;m.tileWidth=a,j.setOptions({tile_width:a,tile_height:b}),l.tile_width=a,l.tile_height=b,j.resizeAllTiles(a),v(!0)}function o(){return i.getElementSize(e).left}function p(a){return i.getMousePosition(a).pageX}function q(){return e.children(".ug-thumb-wrapper")}function r(a){return i.getNumItemsInSpace(a,m.tileWidth,l.carousel_space_between_tiles)}function s(){return q().length}function t(a){w(a);var b=q();return jQuery(b[a])}function u(){var a=i.getElementSize(d).width;return r(a)}function v(a){if(!a)var a=!1;var c,f=q(),g=0,b=0;return jQuery.each(f,function(e,a){a=jQuery(a),i.placeElement(a,g,0);var d=i.getElementSize(a);g+=d.width+l.carousel_space_between_tiles,b=Math.max(b,d.height),e==f.length-1&&(c=d.right)}),e.width(c),b+=2*l.carousel_padding,!0===a&&(e.height(b),d.height(b)),z(m.numCurrent,!1),c}function w(a){if(a>q().length-1)throw new Error("Wrogn tile number: "+a)}function x(d,a){if("left"==a)var c=e.children(".ug-thumb-wrapper").first();else var c=e.children(".ug-thumb-wrapper").last();var f=function(f,g,i){var a=f.data("index");if(void 0==a)throw new Error("every tile should have index!");for(var c=[],d=0;d<g;d++){if("prev"==i)var b=h.getPrevItem(a,!0);else var b=h.getNextItem(a,!0);if(!b)throw new Error("the item to add is empty");var e=b.objTileOriginal.clone(!0,!0);a=b.index,e.addClass("cloned"),c.push(e)}return c}(c,d,"left"==a?"prev":"next");jQuery.each(f,function(d,c){"left"==a?e.prepend(c):e.append(c),b.trigger(m.eventSizeChange,c),j.loadTileImage(c)})}function y(c,d){w(e);for(var b=q(),e=b.length,a=0;a<c;a++)"left"==d?jQuery(b[a]).remove():jQuery(b[e-1-a]).remove()}function z(b,a,g){if(void 0===a){var a=!0;if(e.is(":animated"))return!0}var h=t(b),c={left:-i.getElementSize(h).left+l.carousel_padding+"px"};if(!0===a){var d=l.carousel_scroll_duration,f=l.carousel_scroll_easing;!0===g&&(d=m.scrollShortDuration,f=m.scrollShortEasing),e.stop(!0).animate(c,{duration:d,easing:f,queue:!1,complete:function(){m.numCurrent=b,A(!0)}})}else m.numCurrent=b,e.css(c)}function A(){var k,l,h,n,t,a=(k=-o(),m.sideSpace-k),b=(l=i.getElementSize(d),h=i.getElementSize(e),n=h.width-l.width+h.left,m.sideSpace-n),c=0,j=0,f=0,g=0,q=s();if(a>m.spaceActionSize)c=r(a),x(c,"left"),m.numCurrent+=c;else if(a< -m.spaceActionSize){var f=r(Math.abs(a));y(f,"left"),m.numCurrent-=f}if(b>m.spaceActionSize?(j=r(b),x(j,"right")):b< -m.spaceActionSize&&(g=r(Math.abs(b)),y(g,"right")),g>q)throw new Error("Can't remove more then num tiles");var p=!1;return(c||j||f||g)&&(v(),p=!0),p}function B(){"left"==l.carousel_autoplay_direction?f.scrollRight(1):f.scrollLeft(1)}function C(a){if(!0==m.touchActive)return!0;m.touchActive=!0,f.pauseAutoplay(),m.startTime=jQuery.now(),m.startMousePos=p(a),m.startInnerPos=o(),m.lastTime=m.startTime,m.lastMousePos=m.startMousePos,i.storeEventData(a,m.storedEventID)}function D(b){if(!1==m.touchActive)return!0;i.updateStoredEventData(b,m.storedEventID),b.preventDefault();var d=null;if(!0==l.carousel_vertical_scroll_ondrag&&(d=i.handleScrollTop(m.storedEventID)),"vert"===d)return!0;m.lastMousePos=p(b);var f,c=m.lastMousePos-m.startMousePos,a=m.startInnerPos+c,g=c>0?"prev":"next",h=i.getElementSize(e).width;a>0&&"prev"==g&&(a/=3),a< -h&&"next"==g&&(a=m.startInnerPos+c/3),f=a,e.css({left:f+"px"})}function E(g){var b,a,c,d,e;if(!1==m.touchActive)return!0;m.touchActive=!1,e=(b=-o(),a=r(b),c=i.getElementSize(t(a)).left,d=i.getElementSize(t(a+1)).left,Math.abs(c-b)<Math.abs(d-b)?a:a+1),z(e,!0,!0),f.unpauseAutoplay()}function F(a){if(!1==l.carousel_autoplay_pause_onhover)return!0;!0==m.isPlayMode&& !1==m.isPaused&&f.pauseAutoplay()}function G(a){if(!1==l.carousel_autoplay_pause_onhover)return!0;f.unpauseAutoplay()}function H(){var a=m.lastTime-m.startTime,b=Math.abs(m.lastMousePos-m.startMousePos);return!(a>300)&&!(b>30)}this.startAutoplay=function(){m.isPlayMode=!0,m.isPaused=!1,g.trigger(f.events.START_PLAY),m.handle&&clearInterval(m.handle),m.handle=setInterval(B,l.carousel_autoplay_timeout)},this.unpauseAutoplay=function(){if(!1==m.isPlayMode|| !1==m.isPaused)return!0;f.startAutoplay()},this.pauseAutoplay=function(){if(!1==m.isPlayMode)return!0;m.isPaused=!0,m.handle&&clearInterval(m.handle),g.trigger(f.events.PAUSE_PLAY)},this.stopAutoplay=function(){if(!1==m.isPlayMode)return!0;m.isPaused=!1,m.isPlayMode=!1,m.handle&&clearInterval(m.handle),g.trigger(f.events.STOP_PLAY)},this.destroy=function(){m.handle&&clearInterval(m.handle),g.off(f.events.START_PLAY),g.off(f.events.STOP_PLAY),d.unbind("mousedown"),d.unbind("touchstart"),jQuery("body").unbind("mousemove"),jQuery("body").unbind("touchmove"),jQuery(window).add("body").unbind("mouseup").unbind("touchend"),d.off("mouseenter").off("mouseleave"),j.destroy()},this.init=function(g,i,e){var d,f;e&&this.setMaxWidth(e),d=g,f=i,g_objects=d.getObjects(),h=d,a=jQuery(d),b=g_objects.g_objWrapper,c=g_objects.g_arrItems,l=jQuery.extend(l,f),j.setFixedMode(),j.setApproveClickFunction(H),j.init(d,l),k=j.getObjThumbs(),l=j.getOptions(),m.initTileWidth=l.tile_width,m.initTileHeight=l.tile_height,m.tileWidth=l.tile_width},this.setMaxWidth=function(a){m.carouselMaxWidth=a},this.setHtml=function(a){!function(a){if(!a)var a=b;b.append("<div class='ug-carousel-wrapper'><div class='ug-carousel-inner'></div></div>"),e=(d=b.children(".ug-carousel-wrapper")).children(".ug-carousel-inner"),j.setHtml(e),k.getThumbs().fadeTo(0,1)}(a)},this.getElement=function(){return d},this.getObjTileDesign=function(){return j},this.getEstimatedHeight=function(){return l.tile_height+2*l.carousel_padding},this.run=function(){!function(){if(null===m.carouselMaxWidth)throw new Error("The carousel width not set");if(m.tileWidth<m.initTileWidth){var a=m.carouselMaxWidth-2*l.carousel_padding;a>m.initTileWidth&&(a=m.initTileWidth),n(a);var g=i.getNumItemsInSpace(m.carouselMaxWidth,a,l.carousel_space_between_tiles)}else{var g=i.getNumItemsInSpace(m.carouselMaxWidth,m.tileWidth,l.carousel_space_between_tiles);if(g<=0){g=1;var a=m.carouselMaxWidth-2*l.carousel_padding;n(a)}}var h=i.getSpaceByNumItems(g,m.tileWidth,l.carousel_space_between_tiles);h+=2*l.carousel_padding,d.width(h),!0==m.isFirstTimeRun?(j.initEvents(),d.bind("mousedown touchstart",C),jQuery("body").bind("mousemove touchmove",D),jQuery(window).add("body").bind("mouseup touchend",E),d.hover(F,G),j.run(),jQuery.each(c,function(c,a){a.objThumbWrapper.data("index",c),b.trigger(m.eventSizeChange,[a.objThumbWrapper,!0]),a.objTileOriginal=a.objThumbWrapper.clone(!0,!0)}),v(!0),!0==l.carousel_autoplay&&f.startAutoplay()):(!0==l.carousel_autoplay&&f.pauseAutoplay(),z(0,!1),!0==l.carousel_autoplay&&f.startAutoplay()),i.placeElement(e,0,l.carousel_padding),A(),m.isFirstTimeRun=!1}()},this.scrollRight=function(a){if(!a||"object"==typeof a)var a=l.carousel_navigation_numtiles;var c=u();a>c&&(a=c);var b=m.numCurrent-a;b<=0&&(b=0),z(b)},this.scrollLeft=function(a){if(!a||"object"==typeof a)var a=l.carousel_navigation_numtiles;var c=u();a>c&&(a=c);var d=s(),b=m.numCurrent+a;b>=d&&(b=d-1),z(b)},this.setScrollLeftButton=function(a){i.setButtonMobileReady(a),i.setButtonOnClick(a,f.scrollLeft)},this.setScrollRightButton=function(a){i.setButtonMobileReady(a),i.setButtonOnClick(a,f.scrollRight)},this.setPlayPauseButton=function(a){i.setButtonMobileReady(a),!0==m.isPlayMode&& !1==m.isPaused&&a.addClass("ug-pause-icon"),g.on(f.events.START_PLAY,function(){a.addClass("ug-pause-icon")}),g.on(f.events.STOP_PLAY,function(){a.removeClass("ug-pause-icon")}),i.setButtonOnClick(a,function(){!1==m.isPlayMode|| !0==m.isPaused?f.startAutoplay():f.stopAutoplay()})}}function UGTabs(){jQuery(this);var a,b,c,d=new UniteGalleryMain;new UGFunctions;var e={tabs_type:"tabs",tabs_container:"#ug_tabs",tabs_class_selected:"ug-tab-selected"};function f(a){d.requestNewItems(a)}function g(){var c=e.tabs_class_selected,b=jQuery(this);if(b.hasClass(c))return!0;a.not(b).removeClass(c),b.addClass(c);var d=b.data("catid");if(!d)return!0;f(d)}function h(){var a=jQuery(this).val();if(!a)return!0;f(a)}this.events={},this.destroy=function(){b&&b.off("change"),a&&a.off("click")},this.init=function(h,i){var f,g;f=h,g=i,c=jQuery(d=f),e=jQuery.extend(e,g),"select"==e.tabs_type?b=jQuery(e.tabs_container):a=jQuery(e.tabs_container+" .ug-tab")},this.run=function(){"select"==e.tabs_type?b.change(h):a.click(g)}}function UG_API(b){var a=this;jQuery(a);var c,d=new UniteGalleryMain,e=[];function f(a){var c={index:a.index,title:a.title,description:a.description,urlImage:a.urlImage,urlThumb:a.urlThumb},d=a.objThumbImage.data();for(var b in d){switch(b){case"image":case"description":continue}c[b]=d[b]}return c}d=b,c=jQuery(b),this.events={API_INIT_FUNCTIONS:"api_init",API_ON_EVENT:"api_on_event"},this.on=function(g,b,h){switch(!0!==h&&e.push({event:g,func:b}),g){case"item_change":c.on(d.events.ITEM_CHANGE,function(){var a=f(d.getSelectedItem());b(a.index,a)});break;case"resize":c.on(d.events.SIZE_CHANGE,b);break;case"enter_fullscreen":c.on(d.events.ENTER_FULLSCREEN,b);break;case"exit_fullscreen":c.on(d.events.EXIT_FULLSCREEN,b);break;case"play":c.on(d.events.START_PLAY,b);break;case"stop":c.on(d.events.STOP_PLAY,b);break;case"pause":c.on(d.events.PAUSE_PLAYING,b);break;case"continue":c.on(d.events.CONTINUE_PLAYING,b);break;case"open_lightbox":c.on(d.events.OPEN_LIGHTBOX,b);break;case"close_lightbox":c.on(d.events.CLOSE_LIGHTBOX,b);break;default:console&&console.log("wrong api event: "+g)}c.trigger(a.events.API_ON_EVENT,[g,b])},this.play=function(){d.startPlayMode()},this.stop=function(){d.stopPlayMode()},this.togglePlay=function(){d.togglePlayMode()},this.enterFullscreen=function(){d.toFullScreen()},this.exitFullscreen=function(){d.exitFullScreen()},this.toggleFullscreen=function(){d.toggleFullscreen()},this.resetZoom=function(){var a=d.getObjSlider();if(!a)return!1;a.zoomBack()},this.zoomIn=function(){var a=d.getObjSlider();if(!a)return!1;a.zoomIn()},this.zoomOut=function(){var a=d.getObjSlider();if(!a)return!1;a.zoomOut()},this.nextItem=function(){d.nextItem()},this.prevItem=function(){d.prevItem()},this.selectItem=function(a){d.selectItem(a)},this.resize=function(a,b){b?d.resize(a,b):d.resize(a)},this.getItem=function(a){var b=d.getItem(a);return f(b)},this.getNumItems=function(){return d.getNumItems()},this.reloadGallery=function(b){if(!b)var b={};d.run(null,b),e.map(function(b){a.on(b.event,b.func,!0)})},this.destroy=function(){d.destroy()},c.trigger(a.events.API_INIT_FUNCTIONS,a)}function UGLoadMore(){jQuery(this);var a,b,c,d,e,f=new UniteGalleryMain;new UGFunctions;var g={isInited:!1},h={loadmore_container:"ug_loadmore_wrapper"};function i(){a.show()}function j(){b.hide(),c.show();var e={numitems:f.getNumItems()};f.ajaxRequest("front_loadmore",e,function(d){c.hide();var e=d.html_items,g=d.show_loadmore;!0==g?(b.blur().show(),c.hide()):a.hide(),f.addItems(e)},function(a){a="Ajax Error!"+a,c.hide(),d.show(),d.html(a)})}this.events={},this.destroy=function(){if(!1==g.isInited)return!1},this.init=function(k,l){if(e=jQuery(f=k),h=jQuery.extend(h,l),function(){if(0==(a=jQuery("#"+h.loadmore_container)).length||0==(b=a.find(".ug-loadmore-button")).length||0==(c=a.find(".ug-loadmore-loader")).length||0==(d=a.find(".ug-loadmore-error")).length)return!1;g.isInited=!0}(),!1==g.isInited)return trace("load more not inited, something is wrong"),!1;f.onEvent("tiles_first_placed",i),b.click(j)}}jQuery.fn.unitegallery=function(a){var c="#"+jQuery(this).attr("id");if(!a)var a={};var b=new UniteGalleryMain;return b.run(c,a),new UG_API(b)}